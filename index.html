<!DOCTYPE html>
<html lang="en">
<head>
    <!-- VERSION: 2024-12-29-v103 - ADMIN OFFERS PANEL + PROFESSIONAL CONSOLE -->
    <!-- ============================================ -->
    <!-- PALETTE 2: WARM LUXE AMBER -->
    <!-- Rich black (#000000) with muted gold (#fb7d47) and warm coral (#FF6B6B) -->
    <!-- Luxurious, inviting, premium warmth -->
    <!-- ============================================ -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="version" content="2024-12-23-v12">
    
    <!-- SEO Meta Tags -->
    <title>MocapWork - Premium Motion Capture Animations for Unreal, Unity & Blender</title>
    
    <!-- Primary Meta Tags -->
    <meta name="title" content="MocapWork - Premium Motion Capture Animations for Games & Film">
    <meta name="description" content="Buy professional motion capture animations for Unreal Engine, Unity & Blender. 100+ studio-quality mocap animations with royalty-free licenses. Instant download for game development, film & virtual production.">
    <meta name="keywords" content="motion capture animations, buy mocap, unreal engine mocap, unity animations, blender mocap, professional mocap, game animations, character animations, fbx animations, royalty free mocap, instant download mocap, 3d animation assets">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="author" content="MocapWork">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mocapwork.com/">
    <meta property="og:site_name" content="MocapWork">
    <meta property="og:title" content="MocapWork - 100+ Premium Motion Capture Animations">
    <meta property="og:description" content="Studio-quality motion capture animations for Unreal Engine, Unity & Blender. Royalty-free licenses, instant downloads. Perfect for games, films & virtual production.">
    <meta property="og:image" content="https://mocapwork.com/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="MocapWork - Premium Motion Capture Animation Marketplace">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://mocapwork.com/">
    <meta property="twitter:title" content="MocapWork - Premium Motion Capture Animations">
    <meta property="twitter:description" content="100+ professional mocap animations for Unreal, Unity & Blender. Studio-quality, royalty-free, instant download. Elevate your game dev & film projects.">
    <meta property="twitter:image" content="https://mocapwork.com/og-image.jpg">
    <meta property="twitter:image:alt" content="MocapWork Motion Capture Animation Library">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://mocapwork.com/">
    
    <!-- Favicon - Add custom MW favicon files here -->
    <!-- <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"> -->
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3MFZSKB0V4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-3MFZSKB0V4');
    </script>
    <meta name="description" content="Buy professional motion capture animations for games, film, and virtual production. High-quality mocap library ready for Unreal Engine, Unity, Blender, and more. From $1 with instant download.">
    <meta name="keywords" content="buy motion capture, mocap animations, purchase animations, game development, Unreal Engine, Unity, Blender, 3D animation, motion capture library, professional mocap">
    <meta name="author" content="MocapWork">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://goldstargamingtv-droid.github.io/mocap/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://goldstargamingtv-droid.github.io/mocap/">
    <meta property="og:title" content="MocapWork - Premium Motion Capture Animation Library">
    <meta property="og:description" content="Professional motion capture animations from $1. Instant download for Unreal Engine, Unity, Blender, and more. Browse our library of high-quality mocap animations.">
    <meta property="og:image" content="https://goldstargamingtv-droid.github.io/mocap/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="MocapWork">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://goldstargamingtv-droid.github.io/mocap/">
    <meta name="twitter:title" content="MocapWork - Premium Motion Capture Animations">
    <meta name="twitter:description" content="Professional motion capture animations from $1. Instant download for Unreal Engine, Unity, Blender, and more.">
    <meta name="twitter:image" content="https://goldstargamingtv-droid.github.io/mocap/og-image.jpg">
    
    <!-- Additional SEO -->
    <meta name="theme-color" content="#0F0F1A">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Performance: Resource Hints -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://js.stripe.com">
    <link rel="dns-prefetch" href="https://api.stripe.com">
    <link rel="preconnect" href="https://ekzablbemeponkrcitco.supabase.co">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        :root {
            --bg-primary: #000000;
            --bg-secondary: #0F0F0F;
            --bg-card: #1A1A1A;
            --teal: #F59E0B;
            --teal-dark: #D97706;
            --amber: #FF6B6B;
            --amber-light: #FF8E8E;
            --coral: #FFA07A;
            --coral-light: #FFB894;
            --text-white: #FFFFFF;          /* Pure white for max readability */
            --text-primary: #FFFFFF;        /* Pure white */
            --text-secondary: #E7E5D3;      /* Light cream - muted text */
            --text-muted: #A8A593;          /* Very muted - subtle text */
        }

        /* Accessibility: Skip to main content link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #fb7d47;
            color: var(--bg-primary);
            padding: 8px 16px;
            text-decoration: none;
            font-weight: 600;
            z-index: 100000;
            border-radius: 0 0 8px 0;
        }
        
        .skip-link:focus {
            top: 0;
        }
        
        /* Visually hidden but accessible to screen readers and SEO */
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* Custom Scrollbar - Grey with Orange Accent */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #F59E0B 0%, #FF6B6B 100%);
            border-radius: 6px;
            border: 2px solid #1a1a1a;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #FBBF24 0%, #FF8E8E 100%);
        }

        /* Firefox Scrollbar */
        * {
            scrollbar-width: thin;
            scrollbar-color: #fb7d47 #1a1a1a;
        }

        .font-sora {
            font-family: 'Sora', sans-serif;
        }

        /* Smooth grain overlay - DISABLED */
        .grain {
            display: none;
        }

        /* Gradient Text */
        .gradient-text {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .animated-gradient {
            background: linear-gradient(90deg, var(--teal), var(--amber), var(--teal));
            background-size: 200% auto;
            animation: gradientShift 3s ease infinite;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .glow-coral {
            text-shadow: 0 0 30px rgba(251, 125, 71, 0.4);
        }

        /* Button Styles */
        .btn {
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            font-size: 15px;
            text-decoration: none;
            display: inline-block;
            font-family: 'Sora', sans-serif;
        }

        .btn-primary {
            padding: 12px 24px;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.3);
            color: #ffffff;
            border-radius: 50px;
            font-weight: 600;
            font-family: 'DM Sans', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease, border-color 0.2s ease;
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.1),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 2px 8px rgba(0, 0, 0, 0.2);
            isolation: isolate;
        }
        
        .btn-primary::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 50px;
            background: linear-gradient(
                90deg,
                transparent 0%,
                #fb7d47 20%,
                #fb7d47 40%,
                #FF6B6B 60%,
                transparent 80%,
                transparent 100%
            );
            background-size: 200% 100%;
            z-index: -2;
            opacity: 0;
            transition: opacity 0.3s ease;
            animation: liquidFlow 4s ease-in-out infinite paused;
        }
        
        .btn-primary::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50px;
            background: rgba(10, 10, 10, 0.95);
            z-index: -1;
        }

        .btn-primary:hover {
            transform: scale(1.03);
            border-color: rgba(10, 10, 10, 0.95);
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.15),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 0 25px rgba(251, 125, 71, 0.4);
        }
        
        .btn-primary:hover::before {
            opacity: 1;
            animation-play-state: running;
        }

        .btn-secondary {
            padding: 12px 24px;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.3);
            color: #ffffff;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease, border-color 0.2s ease;
            font-family: 'DM Sans', sans-serif;
            text-decoration: none;
            font-size: 14px;
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.1),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 2px 8px rgba(0, 0, 0, 0.2);
            isolation: isolate;
        }
        
        .btn-secondary::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 50px;
            background: linear-gradient(
                90deg,
                transparent 0%,
                #fb7d47 20%,
                #fb7d47 40%,
                #FF6B6B 60%,
                transparent 80%,
                transparent 100%
            );
            background-size: 200% 100%;
            z-index: -2;
            opacity: 0;
            transition: opacity 0.3s ease;
            animation: liquidFlow 4s ease-in-out infinite paused;
        }
        
        .btn-secondary::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50px;
            background: rgba(10, 10, 10, 0.95);
            z-index: -1;
        }

        .btn-secondary:hover {
            transform: scale(1.03);
            border-color: rgba(10, 10, 10, 0.95);
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.15),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 0 25px rgba(251, 125, 71, 0.4);
        }
        
        .btn-secondary:hover::before {
            opacity: 1;
            animation-play-state: running;
        }

        /* Navbar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 10002;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: transparent;
            will-change: background, border-color;
        }

        .navbar.scrolled {
            background: rgba(10, 10, 10, 0.95);
            border-bottom: 2px solid rgba(0, 212, 255, 0.15);
        }

        /* Transparent Sticky Selection Bar */
        .selection-bar {
            position: fixed;
            top: -200px;
            right: 20px;
            z-index: 10001;
            display: flex;
            flex-direction: column;
            gap: 12px;
            transition: top 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none;
        }

        .selection-bar.active {
            top: 80px;
            pointer-events: auto;
        }

        .selection-bar-btn {
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease, border-color 0.2s ease;
            border: 2px solid rgba(0, 212, 255, 0.3);
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.1),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 4px 20px rgba(0, 0, 0, 0.4);
            min-width: 200px;
            justify-content: center;
            position: relative;
            isolation: isolate;
        }

        .selection-bar-btn-primary {
            background: rgba(10, 10, 10, 0.95);
            color: #ffffff;
        }
        
        .selection-bar-btn-primary::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 50px;
            background: linear-gradient(
                90deg,
                transparent 0%,
                #fb7d47 20%,
                #fb7d47 40%,
                #FF6B6B 60%,
                transparent 80%,
                transparent 100%
            );
            background-size: 200% 100%;
            z-index: -2;
            opacity: 0;
            transition: opacity 0.3s ease;
            animation: liquidFlow 4s ease-in-out infinite paused;
        }
        
        .selection-bar-btn-primary::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50px;
            background: rgba(10, 10, 10, 0.95);
            z-index: -1;
        }

        .selection-bar-btn-primary:hover {
            border-color: rgba(10, 10, 10, 0.95);
            transform: scale(1.03);
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.15),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 0 25px rgba(251, 125, 71, 0.4);
        }
        
        .selection-bar-btn-primary:hover::before {
            opacity: 1;
            animation-play-state: running;
        }

        .selection-bar-btn-secondary {
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(255, 107, 107, 0.3);
            color: #FF6B6B;
        }

        .selection-bar-btn-secondary:hover {
            border-color: #FF6B6B;
            transform: scale(1.03);
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.15),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 0 25px rgba(255, 107, 107, 0.4);
        }

        .selection-count-badge {
            background: #fb7d47;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 12px;
        }

        .navbar-container {
            max-width: 100%;
            margin: 0;
            padding: 0 40px;
            display: flex;
            align-items: center;
            gap: 20px;
            height: 70px;
        }

        .nav-search {
            flex: 1;
            position: relative;
        }

        .nav-links-left {
            display: flex;
            align-items: center;
            flex-shrink: 0;
        }

        .nav-links-right {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-shrink: 0;
        }

        .nav-center {
            display: none;
        }

        .nav-right {
            display: flex;
            gap: 16px;
            align-items: center;
            flex-shrink: 0;
        }

        .nav-link {
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 700;
            font-size: 15px;
            font-family: 'Sora', sans-serif;
            transition: color 0.3s ease;
            position: relative;
            white-space: nowrap;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            transition: width 0.3s ease;
        }

        .nav-link:hover {
            color: var(--text-white);
        }

        .nav-link:hover::after,
        .nav-link.active::after {
            width: 100%;
        }

        /* Animations Dropdown */
        .nav-dropdown-wrapper {
            position: relative;
            display: inline-block;
        }
        
        .nav-dropdown-wrapper .nav-link {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .nav-dropdown-wrapper .nav-link svg {
            width: 12px;
            height: 12px;
            transition: transform 0.3s ease;
        }
        
        .nav-dropdown-wrapper:hover .nav-link svg {
            transform: rotate(180deg);
        }
        
        .nav-dropdown {
            position: absolute;
            top: calc(100% + 12px);
            left: 50%;
            min-width: 220px;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 16px;
            padding: 12px;
            opacity: 0;
            visibility: hidden;
            transform: translateX(-50%) translateY(-10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
            z-index: 10003;
        }
        
        .nav-dropdown-wrapper:hover .nav-dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
        }
        
        .nav-dropdown-title {
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            padding: 8px 12px 12px;
            border-bottom: 1px solid rgba(0, 212, 255, 0.1);
            margin-bottom: 8px;
        }
        
        .nav-dropdown-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 14px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text-primary);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
        }
        
        .nav-dropdown-item:hover {
            background: rgba(245, 158, 11, 0.15);
            color: #fb7d47;
        }
        
        .nav-dropdown-item-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: rgba(0, 212, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.2s ease;
        }
        
        .nav-dropdown-item:hover .nav-dropdown-item-icon {
            background: rgba(245, 158, 11, 0.2);
            transform: scale(1.1);
        }
        
        .nav-dropdown-item-text {
            flex: 1;
        }
        
        .nav-dropdown-item-label {
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 2px;
        }

        /* Navbar Search */

        .search-input-nav {
            width: 100%;
            padding: 10px 40px 10px 40px;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 25px;
            color: var(--text-primary);
            font-size: 14px;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1);
        }

        .search-input-nav:focus {
            outline: none;
            border-color: rgba(0, 212, 255, 0.4);
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 20px rgba(251, 125, 71, 0.2);
        }

        .search-input-nav::placeholder {
            color: var(--text-muted);
        }

        .search-icon-nav {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 16px;
            opacity: 0.6;
        }

        .search-clear-nav {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 16px;
            cursor: pointer;
            display: none;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .search-clear-nav:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.1);
        }

        .search-dropdown-nav {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 12px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
            z-index: 1000;
        }

        .search-dropdown-nav.active {
            display: block;
        }

        .search-dropdown-library {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 12px;
            max-height: 400px;
            overflow-y: auto;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
            z-index: 10000;
        }
        
        /* Profile Icon */
        /* Profile Icon & Dropdown */
        .profile-container {
            position: relative;
            display: inline-block;
        }
        
        .profile-icon {
            position: relative;
            padding: 8px;
            border-radius: 12px;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.3);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease, border-color 0.2s ease;
            isolation: isolate;
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.1),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .profile-icon::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 14px;
            background: linear-gradient(
                90deg,
                transparent 0%,
                #fb7d47 20%,
                #fb7d47 40%,
                #FF6B6B 60%,
                transparent 80%,
                transparent 100%
            );
            background-size: 200% 100%;
            z-index: -2;
            opacity: 0;
            transition: opacity 0.3s ease;
            animation: liquidFlow 4s ease-in-out infinite paused;
        }
        
        .profile-icon::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 12px;
            background: rgba(10, 10, 10, 0.95);
            z-index: -1;
        }
        
        .profile-icon svg {
            width: 28px;
            height: 28px;
            fill: #FFFFFF;
            position: relative;
            z-index: 1;
        }
        
        .profile-icon:hover {
            transform: scale(1.05);
            border-color: rgba(10, 10, 10, 0.95);
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.15),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 0 25px rgba(251, 125, 71, 0.4);
        }
        
        .profile-icon:hover::before {
            opacity: 1;
            animation-play-state: running;
        }
        
        .profile-dropdown {
            position: absolute;
            top: calc(100% + 12px);
            right: 0;
            min-width: 220px;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 16px;
            padding: 12px;
            display: none;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
            z-index: 10003;
        }
        
        /* Invisible bridge to keep dropdown open */
        .profile-dropdown::before {
            content: '';
            position: absolute;
            top: -12px;
            left: 0;
            right: 0;
            height: 12px;
            background: transparent;
        }
        
        .profile-container:hover .profile-dropdown,
        .profile-dropdown:hover {
            display: block;
        }
        
        .profile-dropdown-title {
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            padding: 8px 12px 12px;
            border-bottom: 1px solid rgba(0, 212, 255, 0.1);
            margin-bottom: 8px;
        }
        
        .profile-dropdown-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 14px;
            color: var(--text-primary);
            text-decoration: none;
            border-radius: 10px;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .profile-dropdown-item:hover {
            background: rgba(245, 158, 11, 0.15);
            color: #fb7d47;
        }
        
        .profile-dropdown-item-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: rgba(0, 212, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        
        .profile-dropdown-item-icon svg {
            width: 18px;
            height: 18px;
            fill: #fb7d47;
        }
        
        .profile-dropdown-item:hover .profile-dropdown-item-icon {
            background: rgba(245, 158, 11, 0.2);
            transform: scale(1.1);
        }
        
        .profile-dropdown-item.signout-item {
            color: #FF6B6B;
        }
        
        .profile-dropdown-item.signout-item:hover {
            background: rgba(239, 68, 68, 0.15);
            color: #FF6B6B;
        }
        
        .profile-dropdown-item.signout-item .profile-dropdown-item-icon {
            background: rgba(239, 68, 68, 0.1);
        }
        
        .profile-dropdown-item.signout-item .profile-dropdown-item-icon svg {
            fill: #FF6B6B;
        }
        
        .profile-dropdown-item.signout-item:hover .profile-dropdown-item-icon {
            background: rgba(239, 68, 68, 0.2);
        }
        
        .profile-dropdown-divider {
            height: 1px;
            background: rgba(0, 212, 255, 0.1);
            margin: 8px 0;
        }

        .cart-container {
            position: relative;
            display: inline-block;
            margin-left: 6px;
        }

        .cart-icon {
            position: relative !important;
            cursor: pointer;
            padding: 8px;
            margin-right: 10px;
            display: inline-flex !important;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease, border-color 0.2s ease;
            isolation: isolate;
            background: rgba(10, 10, 10, 0.95);
            border-radius: 12px;
            border: 2px solid rgba(0, 212, 255, 0.3);
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.1),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .cart-icon::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 14px;
            background: linear-gradient(
                90deg,
                transparent 0%,
                #fb7d47 20%,
                #fb7d47 40%,
                #FF6B6B 60%,
                transparent 80%,
                transparent 100%
            );
            background-size: 200% 100%;
            z-index: -2;
            opacity: 0;
            transition: opacity 0.3s ease;
            animation: liquidFlow 4s ease-in-out infinite paused;
        }
        
        .cart-icon::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 12px;
            background: rgba(10, 10, 10, 0.95);
            z-index: -1;
        }

        .cart-icon:hover {
            transform: scale(1.05);
            border-color: rgba(10, 10, 10, 0.95);
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.15),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 0 25px rgba(251, 125, 71, 0.4);
        }
        
        .cart-icon:hover::before {
            opacity: 1;
            animation-play-state: running;
        }
        
        .cart-icon svg {
            width: 28px;
            height: 28px;
            fill: none;
            stroke-linecap: round;
            stroke-linejoin: round;
            position: relative;
            z-index: 1;
        }
        
        /* Animated cart gradient */
        .cart-icon .cart__gradient stop:first-child {
            stop-color: #fb7d47;
        }
        .cart-icon .cart__gradient stop:last-child {
            stop-color: #FF6B6B;
        }
        
        /* Default state - white, no animation */
        .cart-icon .cart__lines {
            stroke: rgba(255, 255, 255, 0.8);
            transition: stroke 0.3s ease;
        }
        
        .cart-icon .cart__top {
            stroke-dasharray: 338 338;
            stroke-dashoffset: 0;
            will-change: stroke-dashoffset;
        }
        
        .cart-icon .cart__wheel-stroke {
            stroke-dasharray: 81.68 81.68;
            stroke-dashoffset: 0;
            will-change: stroke-dashoffset;
        }
        
        .cart-icon .cart__wheel1 {
            transform-origin: 43px 111px;
            will-change: transform;
        }
        
        .cart-icon .cart__wheel2 {
            transform-origin: 102px 111px;
            will-change: transform;
        }
        
        .cart-icon .cart__track {
            stroke: rgba(255, 255, 255, 0.15);
        }
        
        /* Has items - slow animation (5s) as reminder */
        .cart-icon.has-items .cart__lines {
            stroke: url(#cartGradientNav);
        }
        
        .cart-icon.has-items .cart__top {
            animation: cartTop 5s ease-in-out infinite;
        }
        
        .cart-icon.has-items .cart__wheel1 {
            animation: cartWheel1 5s ease-in-out infinite;
        }
        
        .cart-icon.has-items .cart__wheel2 {
            animation: cartWheel2 5s ease-in-out infinite;
        }
        
        .cart-icon.has-items .cart__wheel-stroke {
            animation: cartWheelStroke 5s ease-in-out infinite;
        }
        
        /* Hover state - fast animation (2s) */
        .cart-icon:hover .cart__lines {
            stroke: url(#cartGradientNav);
        }
        
        .cart-icon:hover .cart__top {
            animation: cartTop 2s ease-in-out infinite;
        }
        
        .cart-icon:hover .cart__wheel1 {
            animation: cartWheel1 2s ease-in-out infinite;
        }
        
        .cart-icon:hover .cart__wheel2 {
            animation: cartWheel2 2s ease-in-out infinite;
        }
        
        .cart-icon:hover .cart__wheel-stroke {
            animation: cartWheelStroke 2s ease-in-out infinite;
        }
        
        /* Cart animations */
        @keyframes cartTop {
            from { stroke-dashoffset: -338; }
            50% { stroke-dashoffset: 0; }
            to { stroke-dashoffset: 338; }
        }
        
        @keyframes cartWheel1 {
            from { transform: rotate(-0.25turn); }
            to { transform: rotate(2.75turn); }
        }
        
        @keyframes cartWheel2 {
            from { transform: rotate(0.25turn); }
            to { transform: rotate(3.25turn); }
        }
        
        @keyframes cartWheelStroke {
            from, to { stroke-dashoffset: 81.68; }
            50% { stroke-dashoffset: 0; }
        }

        .cart-badge {
            position: absolute !important;
            top: -4px !important;
            right: -4px !important;
            background: linear-gradient(135deg, #F59E0B 0%, #FF6B6B 100%);
            color: #000000;
            min-width: 18px;
            height: 18px;
            padding: 0 5px;
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 800;
            font-family: 'Sora', sans-serif;
            z-index: 10;
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.4);
            border: 1.5px solid rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .cart-icon:hover .cart-badge {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.6);
        }
        
        /* Hide badge when empty */
        .cart-badge:empty,
        .cart-badge[data-count="0"] {
            display: none;
        }

        /* Cart Hover Dropdown */
        .cart-hover-dropdown {
            position: fixed;
            top: 0;
            right: 0;
            width: 350px;
            max-height: 500px;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 12px;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
            display: none;
            z-index: 10003;
            overflow: hidden;
        }


        .cart-hover-header {
            padding: 16px 20px;
            border-bottom: 2px solid rgba(0, 212, 255, 0.1);
            font-weight: 700;
            font-size: 16px;
            color: var(--text-primary);
            background: rgba(0, 0, 0, 0.2);
        }

        .cart-hover-items {
            max-height: 320px;
            overflow-y: auto;
            background: transparent;
        }

        .cart-hover-items::-webkit-scrollbar {
            width: 6px;
        }

        .cart-hover-items::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }

        .cart-hover-items::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #F59E0B 0%, #FF6B6B 100%);
            border-radius: 3px;
        }

        .cart-hover-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 8px;
            background: #1a1a1a;
            margin: 8px;
            margin-bottom: 8px;
            transition: all 0.2s ease;
        }

        .cart-hover-item:hover {
            background: rgba(245, 158, 11, 0.15);
            border: 2px solid rgba(245, 158, 11, 0.3);
        }

        .cart-hover-item-img {
            width: 50px;
            height: 50px;
            border-radius: 6px;
            object-fit: cover;
            border: 2px solid rgba(0, 212, 255, 0.2);
        }

        .cart-hover-item-info {
            flex: 1;
            min-width: 0;
        }

        .cart-hover-item-title {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .cart-hover-item-price {
            font-size: 12px;
            color: #FFFFFF;
            font-weight: 600;
        }

        .cart-hover-item-price .price-dollar {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .cart-hover-item-remove {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid rgba(239, 68, 68, 0.3);
            color: #EF4444;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        .cart-hover-item-remove:hover {
            background: rgba(239, 68, 68, 0.2);
            transform: scale(1.1);
        }

        .cart-hover-empty {
            padding: 40px 20px;
            text-align: center;
            color: var(--text-muted);
            font-size: 14px;
            line-height: 1.6;
        }

        .cart-hover-empty-icon {
            font-size: 48px;
            opacity: 0.3;
            margin-bottom: 12px;
        }

        .cart-hover-footer {
            padding: 16px 20px;
            border-top: 2px solid rgba(0, 212, 255, 0.1);
            background: rgba(0, 0, 0, 0.2);
        }

        .cart-hover-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .cart-hover-total span:last-child {
            color: #FFFFFF;
            font-size: 18px;
        }
        
        .cart-hover-total .price-dollar {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .btn-logout-nav {
            padding: 8px 16px;
            background: rgba(239, 68, 68, 0.2);
            border: 2px solid rgba(239, 68, 68, 0.4);
            color: #FCA5A5;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s;
        }

        .btn-logout-nav:hover {
            background: rgba(239, 68, 68, 0.3);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }

        .logo-icon {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .logo-icon::before {
            content: '';
            position: absolute;
            width: 60%;
            height: 60%;
            background: var(--bg-primary);
            border-radius: 6px;
            animation: pulse 3s ease-in-out infinite;
        }

        .logo-text {
            font-size: 26px;
            font-weight: 700;
            letter-spacing: -0.5px;
            color: var(--text-primary);
        }

        .logo-text span {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: none; /* Hidden on desktop - mobile only */
            gap: 40px;
            list-style: none;
            align-items: center;
        }
        
        .mobile-menu-close {
            display: none; /* Only visible on mobile */
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 700;
            font-size: 15px;
            font-family: 'Sora', sans-serif;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: #fb7d47;
            transition: width 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--text-primary);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        
        .btn-login {
            padding: 10px 28px;
            background: rgba(10, 10, 10, 0.95);
            border-radius: 50px;
            border: 2px solid rgba(0, 212, 255, 0.3);
            color: #ffffff !important;
            text-decoration: none;
            font-weight: 700;
            font-size: 15px;
            font-family: 'Sora', sans-serif;
            transition: all 0.3s ease, border-color 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            position: relative;
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.1),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn-login svg {
            width: 16px;
            height: 16px;
            stroke: #fb7d47;
            fill: none;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }
        
        .btn-login::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 50px;
            background: linear-gradient(
                90deg,
                transparent 0%,
                #fb7d47 20%,
                #fb7d47 40%,
                #FF6B6B 60%,
                transparent 80%,
                transparent 100%
            );
            background-size: 200% 100%;
            z-index: -2;
            opacity: 0;
            transition: opacity 0.3s ease;
            animation: liquidFlow 4s ease-in-out infinite paused;
        }
        
        .btn-login::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50px;
            background: rgba(10, 10, 10, 0.95);
            z-index: -1;
        }
        
        .btn-login:hover {
            border-color: rgba(10, 10, 10, 0.95);
            transform: scale(1.05);
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.15),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 0 25px rgba(251, 125, 71, 0.4);
        }
        
        .btn-login:hover::before {
            opacity: 1;
            animation-play-state: running;
        }
        
        @keyframes liquidFlow {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* CTA Buttons - same style as Sign In */
        .btn-cta {
            padding: 14px 32px;
            background: rgba(10, 10, 10, 0.95);
            border-radius: 50px;
            border: 2px solid rgba(0, 212, 255, 0.3);
            color: #ffffff !important;
            text-decoration: none;
            font-weight: 700;
            font-size: 15px;
            font-family: 'Sora', sans-serif;
            transition: all 0.3s ease, border-color 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.1),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 2px 8px rgba(0, 0, 0, 0.2);
            cursor: pointer;
        }
        
        .btn-cta svg {
            width: 18px;
            height: 18px;
            stroke: #fb7d47;
            fill: none;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            flex-shrink: 0;
        }
        
        .btn-cta::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 50px;
            background: linear-gradient(
                90deg,
                transparent 0%,
                #fb7d47 20%,
                #fb7d47 40%,
                #FF6B6B 60%,
                transparent 80%,
                transparent 100%
            );
            background-size: 200% 100%;
            z-index: -2;
            opacity: 0;
            transition: opacity 0.3s ease;
            animation: liquidFlow 4s ease-in-out infinite paused;
        }
        
        .btn-cta::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50px;
            background: rgba(10, 10, 10, 0.95);
            z-index: -1;
        }
        
        .btn-cta:hover {
            border-color: rgba(10, 10, 10, 0.95);
            transform: scale(1.05);
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.15),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 0 25px rgba(251, 125, 71, 0.4);
        }
        
        .btn-cta:hover::before {
            opacity: 1;
            animation-play-state: running;
        }

        /* Admin Dashboard Button */
        .btn-admin {
            padding: 10px 20px;
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(0, 212, 255, 0.15));
            border-radius: 10px;
            border: 2px solid rgba(245, 158, 11, 0.5);
            color: var(--amber) !important;
            text-decoration: none;
            font-weight: 700;
            font-size: 14px;
            font-family: 'Sora', sans-serif;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            margin-right: 12px;
        }
        
        .btn-admin:hover {
            background: linear-gradient(135deg, var(--amber), var(--teal));
            color: #000 !important;
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(245, 158, 11, 0.4);
        }

        .hamburger-menu {
            display: none;
            border: none;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 24px;
            cursor: pointer;
        }

        /* Force hide on desktop */
        @media (min-width: 769px) {
            .hamburger-menu {
                display: none !important;
                visibility: hidden !important;
                opacity: 0 !important;
                pointer-events: none !important;
            }
        }

        /* Advanced Search Bar */
        .search-container {
            position: sticky;
            top: 70px;
            z-index: 999;
            background: rgba(10, 10, 10, 0.98);
            border-bottom: 2px solid rgba(0, 212, 255, 0.1);
            padding: 16px 0;
            transition: all 0.3s ease;
        }

        .search-wrapper {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 40px;
            position: relative;
        }

        .search-box {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
        }

        .search-input {
            width: 100%;
            padding: 16px 56px 16px 56px;
            background: var(--bg-secondary);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 50px;
            color: var(--text-primary);
            font-size: 16px;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #fb7d47;
            box-shadow: 0 0 0 4px rgba(251, 125, 71, 0.1);
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        .search-icon {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 20px;
        }

        .search-clear {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 20px;
            cursor: pointer;
            display: none;
            padding: 4px 8px;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .search-clear:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.1);
        }

        .search-dropdown {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 16px;
            max-height: 500px;
            overflow-y: auto;
            display: none;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
        }

        .search-dropdown.active {
            display: block;
        }

        .search-section {
            padding: 16px 20px;
            border-bottom: 2px solid rgba(0, 212, 255, 0.1);
        }

        .search-section:last-child {
            border-bottom: none;
        }

        .search-section-title {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--text-muted);
            margin-bottom: 12px;
            letter-spacing: 0.5px;
        }

        .search-result-item {
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 4px;
        }

        .search-result-item:hover {
            background: rgba(0, 212, 255, 0.1);
        }

        .search-result-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .search-result-text {
            flex: 1;
            color: var(--text-white);
        }

        .search-result-text strong {
            color: var(--text-white);
        }

        .search-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .search-tag {
            padding: 6px 12px;
            background: rgba(0, 212, 255, 0.1);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 20px;
            font-size: 13px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .search-tag:hover {
            background: rgba(0, 212, 255, 0.2);
            color: #fb7d47;
        }

        .search-filters {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .search-filter-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            color: var(--text-secondary);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .search-filter-btn:hover,
        .search-filter-btn.active {
            background: rgba(0, 212, 255, 0.1);
            border-color: #fb7d47;
            color: #fb7d47;
        }

        /* Hero Section */
        .hero {
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding-top: 70px;
            padding-bottom: 10px;
            overflow: visible;
            /* No background - use body's fixed background */
            background: transparent;
        }

        /* Floating Particles - REMOVED for liquid metal effect */

        .hero-background {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: hidden;
            z-index: -1;
            pointer-events: none;
        }

        /* Static Background Image */
        .hero-static-bg {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: 100%;
            height: 100%;
            transform: translate(-50%, -50%);
            z-index: 1;
            background-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url('hero-background.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        
        /* Static gradient overlay on top of JPG */
        .hero-static-bg::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: radial-gradient(circle at 30% 20%, rgba(0, 212, 255, 0.15), transparent 50%),
                              radial-gradient(circle at 70% 80%, rgba(245, 158, 11, 0.15), transparent 50%);
            z-index: 2;
            pointer-events: none;
        }

        /* Floating shapes - animated gradient blobs */
        .floating-shape {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            animation: float 8s ease-in-out infinite;
            z-index: 3;
        }

        .shape-1 {
            top: 20%;
            left: 15%;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(0, 212, 255, 0.15), transparent);
        }

        .shape-2 {
            bottom: 20%;
            right: 15%;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(245, 158, 11, 0.15), transparent);
            animation-delay: 4s;
        }

        .hero-content {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 0 24px;
            max-width: 1600px;
            width: 100%;
            animation: fadeInUp 1s ease-out;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            background: rgba(100, 116, 139, 0.1);
            border: 2px solid rgba(100, 116, 139, 0.2);
            border-radius: 50px;
            color: #fb7d47;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 8px;
            margin-top: 5px;
            backdrop-filter: blur(10px);
        }

        .badge-dot {
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .badge-dot svg {
            width: 16px;
            height: 16px;
            fill: #fb7d47;
            animation: pulse 2s infinite;
        }

        .hero-title {
            font-size: clamp(3rem, 9vw, 6rem);
            font-weight: 800;
            line-height: 1.0;
            margin-bottom: 10px;
            letter-spacing: -3px;
            font-family: 'Sora', sans-serif;
            color: #000000;
        }

        .hero-subtitle {
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            color: var(--text-secondary);
            margin-bottom: 6px;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.4;
        }

        /* Hero subtitle color styles */
        .hero-subtitle-buy-gradient {
            background: linear-gradient(135deg, #F59E0B, #FF6B6B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
        }

        .hero-subtitle-secondary {
            color: #FFFFFF;
            font-weight: 400;
        }

        .hero-subtitle-professional-glow {
            color: #FBBF24;
            font-weight: 800;
            font-size: 1.15em;
        }

        .hero-subtitle-platforms-gradient {
            background: linear-gradient(135deg, #FF6B6B, #fb7d47);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
        }

        /* Hero 3-Step Process */
        .hero-steps {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .hero-step {
            display: flex;
            flex-direction: row;
            align-items: center;
            text-align: left;
            padding: 12px 18px;
            background: rgba(10, 10, 10, 0.6);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 50px;
            gap: 12px;
            transition: all 0.3s ease;
            position: relative;
            backdrop-filter: blur(10px);
        }
        
        .hero-step:hover {
            border-color: #fb7d47;
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(251, 125, 71, 0.2);
        }
        
        .hero-step-icon {
            width: 36px;
            height: 36px;
            background: rgba(251, 125, 71, 0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }
        
        .hero-step:hover .hero-step-icon {
            background: rgba(251, 125, 71, 0.2);
            transform: scale(1.05);
        }
        
        .hero-step-icon svg {
            width: 18px;
            height: 18px;
        }
        
        .hero-step-content {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .hero-step-number {
            font-size: 10px;
            font-weight: 700;
            color: #fb7d47;
            letter-spacing: 1.5px;
            font-family: 'Sora', sans-serif;
            line-height: 1;
        }
        
        .hero-step-title {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-white);
            font-family: 'Sora', sans-serif;
            line-height: 1.2;
        }
        
        .hero-step-desc {
            font-size: 11px;
            color: var(--text-muted);
            line-height: 1.3;
            font-weight: 400;
        }
        
        .hero-step-connector {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .hero-step-connector svg {
            width: 20px;
            height: 20px;
            opacity: 0.4;
        }
        
        @media (max-width: 900px) {
            .hero-steps {
                gap: 8px;
            }
            
            .hero-step {
                padding: 10px 14px;
            }
            
            .hero-step-connector {
                display: none;
            }
        }
        
        @media (max-width: 600px) {
            .hero-steps {
                flex-direction: column;
                gap: 8px;
            }
            
            .hero-step {
                width: 100%;
                max-width: 280px;
                padding: 10px 16px;
            }
        }

        .hero-buttons {
            display: flex;
            gap: 14px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }

        .btn-primary-cta {
            position: relative;
            overflow: hidden;
        }

        .button-shine {
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { left: -100%; }
            50%, 100% { left: 100%; }
        }

        .trust-badge {
            display: inline-flex;
            align-items: center;
            padding: 8px 16px;
            background: rgba(100, 116, 139, 0.1);
            border: 2px solid rgba(100, 116, 139, 0.2);
            border-radius: 50px;
            font-size: 12px;
            color: #fb7d47;
            margin-top: 6px;
            margin-bottom: 8px;
            backdrop-filter: blur(10px);
        }

        .trust-badge svg {
            fill: #fb7d47;
        }

        .hero-buttons .btn-secondary {
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .hero-buttons .btn-secondary:hover {
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.15),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 0 25px rgba(251, 125, 71, 0.4);
            transform: scale(1.05);
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.02);
            }
        }

        /* ============================================
           NEW 3D ROTATING CAROUSEL
           ============================================ */
        .hero-preview-carousel {
            margin-bottom: 8px;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            overflow: visible;
        }

        .hero-preview-carousel.loaded {
            opacity: 1;
        }

        .carousel-container {
            position: relative;
            width: 320px;
            height: 200px;
            perspective: 1000px;
            transform-origin: center;
            transform-style: flat; /* Don't let 3D affect siblings */
        }

        .carousel-track {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-origin: center;
            transform-style: preserve-3d;
            transform: translateZ(-200px) rotateY(0);
            animation: carouselRotate 18s infinite cubic-bezier(0.77, 0, 0.175, 1) forwards;
        }

        .carousel-track.paused {
            animation-play-state: paused;
        }

        .carousel-item {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 180px;
            height: 200px;
            margin: auto;
            border-radius: 16px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid rgba(0, 212, 255, 0.3);
            background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            transform-origin: center;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .carousel-item:hover {
            border-color: rgba(0, 212, 255, 0.6);
            box-shadow: 0 15px 40px rgba(251, 125, 71, 0.2);
        }

        /* Position each card around the 3D circle - 7 items = 360/7  51.43deg apart */
        .carousel-item:nth-child(1) { transform: rotateY(0deg) translateZ(280px); }
        .carousel-item:nth-child(2) { transform: rotateY(51.43deg) translateZ(280px); }
        .carousel-item:nth-child(3) { transform: rotateY(102.86deg) translateZ(280px); }
        .carousel-item:nth-child(4) { transform: rotateY(154.29deg) translateZ(280px); }
        .carousel-item:nth-child(5) { transform: rotateY(205.71deg) translateZ(280px); }
        .carousel-item:nth-child(6) { transform: rotateY(257.14deg) translateZ(280px); }
        .carousel-item:nth-child(7) { transform: rotateY(308.57deg) translateZ(280px); }

        /* Carousel rotation animation - 7 stops for 7 items */
        @keyframes carouselRotate {
            0%, 10%      { transform: translateZ(-280px) rotateY(0deg); }
            14.28%, 24.28%  { transform: translateZ(-280px) rotateY(-51.43deg); }
            28.57%, 38.57%  { transform: translateZ(-280px) rotateY(-102.86deg); }
            42.86%, 52.86%  { transform: translateZ(-280px) rotateY(-154.29deg); }
            57.14%, 67.14%  { transform: translateZ(-280px) rotateY(-205.71deg); }
            71.43%, 81.43%  { transform: translateZ(-280px) rotateY(-257.14deg); }
            85.71%, 95.71%  { transform: translateZ(-280px) rotateY(-308.57deg); }
            100%         { transform: translateZ(-280px) rotateY(-360deg); }
        }

        .carousel-item-content {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);
        }

        .carousel-placeholder {
            text-align: center;
            padding: 20px 15px;
        }

        .carousel-placeholder-icon {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .carousel-placeholder-text {
            font-size: 14px;
            font-weight: 700;
            color: #fb7d47;
            margin-bottom: 4px;
        }

        .carousel-placeholder-subtext {
            font-size: 11px;
            color: var(--text-muted);
        }
        
        .carousel-gif-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(245, 158, 11, 0.1));
            border-radius: 12px;
            cursor: pointer;
        }
        
        .carousel-play-icon {
            font-size: 48px;
            color: #fb7d47;
            margin-bottom: 12px;
            filter: drop-shadow(0 0 10px rgba(251, 125, 71, 0.5));
        }

        /* Carousel Overlay Label */
        .carousel-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.9) 100%);
            padding: 12px;
            text-align: center;
        }

        .carousel-overlay-text {
            font-size: 10px;
            font-weight: 600;
            color: var(--text-primary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Carousel Wrapper with Arrows */
        .carousel-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 100px;
            position: relative;
            transform-style: flat;
        }

        /* Arrow Buttons */
        .carousel-arrow {
            width: 48px;
            height: 48px;
            min-width: 48px;
            border-radius: 50%;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.3);
            color: #fb7d47;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease, border-color 0.2s ease;
            flex-shrink: 0;
            z-index: 100;
            position: relative;
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.1),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .carousel-arrow::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 50%;
            background: linear-gradient(
                90deg,
                transparent 0%,
                #fb7d47 20%,
                #fb7d47 40%,
                #FF6B6B 60%,
                transparent 80%,
                transparent 100%
            );
            background-size: 200% 100%;
            z-index: -2;
            opacity: 0;
            transition: opacity 0.3s ease;
            animation: liquidFlow 4s ease-in-out infinite paused;
        }
        
        .carousel-arrow::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50%;
            background: rgba(10, 10, 10, 0.95);
            z-index: -1;
        }

        .carousel-arrow:hover {
            border-color: rgba(10, 10, 10, 0.95);
            transform: scale(1.05);
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.15),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 0 25px rgba(251, 125, 71, 0.4);
        }
        
        .carousel-arrow:hover::before {
            opacity: 1;
            animation-play-state: running;
        }

        .carousel-arrow svg {
            width: 22px;
            height: 22px;
            stroke: #fb7d47;
            position: relative;
            z-index: 1;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .carousel-wrapper {
                gap: 40px;
            }

            .carousel-arrow {
                width: 40px;
                height: 40px;
                min-width: 40px;
            }

            .carousel-arrow svg {
                width: 18px;
                height: 18px;
            }

            .carousel-container {
                width: 200px;
                height: 140px;
                perspective: 600px;
            }

            .carousel-track {
                transform: translateZ(-140px) rotateY(0);
            }

            .carousel-item {
                width: 120px;
                height: 140px;
            }

            .carousel-item:nth-child(1) { transform: rotateY(0deg) translateZ(180px); }
            .carousel-item:nth-child(2) { transform: rotateY(51.43deg) translateZ(180px); }
            .carousel-item:nth-child(3) { transform: rotateY(102.86deg) translateZ(180px); }
            .carousel-item:nth-child(4) { transform: rotateY(154.29deg) translateZ(180px); }
            .carousel-item:nth-child(5) { transform: rotateY(205.71deg) translateZ(180px); }
            .carousel-item:nth-child(6) { transform: rotateY(257.14deg) translateZ(180px); }
            .carousel-item:nth-child(7) { transform: rotateY(308.57deg) translateZ(180px); }

            @keyframes carouselRotate {
                0%, 10%      { transform: translateZ(-180px) rotateY(0deg); }
                14.28%, 24.28%  { transform: translateZ(-180px) rotateY(-51.43deg); }
                28.57%, 38.57%  { transform: translateZ(-180px) rotateY(-102.86deg); }
                42.86%, 52.86%  { transform: translateZ(-180px) rotateY(-154.29deg); }
                57.14%, 67.14%  { transform: translateZ(-180px) rotateY(-205.71deg); }
                71.43%, 81.43%  { transform: translateZ(-180px) rotateY(-257.14deg); }
                85.71%, 95.71%  { transform: translateZ(-180px) rotateY(-308.57deg); }
                100%         { transform: translateZ(-180px) rotateY(-360deg); }
            }

            .carousel-placeholder-icon {
                font-size: 24px;
            }

            .carousel-placeholder-text {
                font-size: 11px;
            }

            .carousel-placeholder-subtext {
                font-size: 9px;
            }

            .carousel-overlay-text {
                font-size: 8px;
            }
            
            /* Mobile Touch Optimizations */
            .hero-buttons {
                width: 100%;
                padding: 0 20px;
            }
            
            .hero-buttons .btn-secondary {
                min-height: 48px; /* Better tap target */
                width: 100%;
                max-width: 300px;
            }
            
            .trust-badge {
                font-size: 11px;
                padding: 10px 16px;
                flex-wrap: wrap;
                text-align: center;
                justify-content: center;
            }
            
            .trust-badge span:last-child {
                width: 100%;
                margin-top: 4px;
                font-size: 10px;
            }
        }

        .platform-logos {
            display: flex;
            gap: 32px;
            justify-content: center;
            align-items: center;
            margin: 6px 0;
            opacity: 0.8;
        }

        .platform-logo {
            height: 40px;
            width: auto;
            opacity: 0.8;
            transition: all 0.3s ease;
        }

        .platform-logo:first-child {
            height: 60px;
        }

        .platform-logo:hover {
            opacity: 1;
            transform: translateY(-4px);
        }

        .scroll-indicator {
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            animation: bounce 2s infinite;
            opacity: 0.6;
        }

        /* Library Section */
        .library-section {
            padding: 60px 32px 120px;
            position: relative;
            overflow: visible;
            z-index: 1;
            background: transparent;
            scroll-margin-top: 40px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInUp 0.8s ease;
        }

        .section-title {
            font-size: clamp(2.8rem, 6vw, 4.2rem);
            font-weight: 900;
            margin-bottom: 24px;
            letter-spacing: -2px;
            font-family: 'Sora', sans-serif;
            color: var(--text-white);
            line-height: 1.1;
        }

        .section-subtitle {
            color: var(--text-primary);
            font-size: clamp(1.1rem, 2vw, 1.35rem);
            font-weight: 500;
            text-shadow: 0 0 30px rgba(245, 158, 11, 0.3);
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Premium Teaser Banner */
        .premium-banner {
            max-width: 900px;
            margin: 0 auto 40px;
            padding: 16px 32px;
            background: rgba(10, 10, 10, 0.8);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 16px;
            text-align: center;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
            animation: fadeInDown 0.6s ease 0.2s backwards;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .premium-banner:hover {
            border-color: rgba(251, 125, 71, 0.6);
        }

        .premium-banner-text {
            font-size: clamp(0.95rem, 2vw, 1.15rem);
            font-weight: 700;
            color: #FFFFFF;
            letter-spacing: 0.3px;
            position: relative;
            z-index: 1;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulseGlowGrey {
            0%, 100% {
                box-shadow: 0 8px 32px rgba(251, 125, 71, 0.2), 
                            inset 0 1px 0 rgba(255, 255, 255, 0.1);
            }
            50% {
                box-shadow: 0 8px 32px rgba(251, 125, 71, 0.35), 
                            inset 0 1px 0 rgba(255, 255, 255, 0.15);
            }
        }

        /* Ultra-Premium Filters Card */
        .filters-card {
            position: relative;
            background: rgba(10, 10, 10, 0.8);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 28px;
            padding: 32px 40px;
            margin: 0 0 32px 0;
            z-index: 100;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
            animation: fadeInScale 0.6s ease 0.3s backwards;
            transform-origin: center top;
        }
        
        /* Removed glassmorphism pseudo-element */

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        /* Luxe Search Bar */
        .search-box {
            position: relative;
            margin-bottom: 24px;
            z-index: 10001;
        }

        .search-icon {
            position: absolute;
            left: 28px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 22px;
            z-index: 2;
            transition: all 0.3s ease;
            filter: drop-shadow(0 0 8px rgba(251, 125, 71, 0.6));
        }

        .search-input {
            width: 100%;
            background: rgba(10, 10, 10, 0.8);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 50px;
            padding: 24px 32px 24px 68px;
            color: var(--text-primary);
            font-size: 17px;
            outline: none;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'DM Sans', sans-serif;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
            font-weight: 500;
        }

        .search-input::placeholder {
            color: var(--text-muted);
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: rgba(0, 212, 255, 0.4);
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.1),
                0 0 20px rgba(251, 125, 71, 0.2);
            transform: scale(1.02);
            padding-top: 28px;
            padding-bottom: 20px;
        }

        .search-input:focus::placeholder {
            opacity: 0;
            transform: translateY(-10px);
        }

        .search-input:focus + .search-floating-label {
            opacity: 1;
            transform: translateY(0);
        }

        .search-floating-label {
            position: absolute;
            left: 68px;
            top: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #fb7d47;
            opacity: 0;
            transform: translateY(5px);
            transition: all 0.3s ease;
            pointer-events: none;
        }

        /* Innovative Premium Dropdowns */
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .filter-group {
            position: relative;
        }

        .filter-group label {
            display: block;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            color: var(--text-muted);
            margin-bottom: 10px;
            padding-left: 4px;
        }

        /* Custom Dropdown Button */
        .custom-dropdown-btn {
            width: 100%;
            background: rgba(10, 10, 10, 0.8);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 50px;
            padding: 16px 20px;
            color: var(--text-primary);
            font-size: 15px;
            font-weight: 600;
            outline: none;
            cursor: pointer;
            transition: border-color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                        box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                        transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'DM Sans', sans-serif;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
            text-align: left;
            position: relative;
            z-index: 1;
        }

        .custom-dropdown-btn:hover {
            border-color: rgba(0, 212, 255, 0.4);
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.1),
                0 0 20px rgba(251, 125, 71, 0.2);
            transform: translateY(-2px);
        }

        .custom-dropdown-btn.active {
            border-color: rgba(0, 212, 255, 0.4);
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 20px rgba(251, 125, 71, 0.2);
        }

        .dropdown-arrow {
            width: 12px;
            height: 12px;
            transition: transform 0.3s ease;
            flex-shrink: 0;
            margin-left: 8px;
        }

        .custom-dropdown-btn.active .dropdown-arrow {
            transform: rotate(180deg);
        }

        /* Custom Dropdown Menu */
        .custom-dropdown-menu {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 16px;
            padding: 12px;
            z-index: 1000;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
            max-height: 320px;
            overflow-y: auto;
            display: none;
            animation: dropdownSlideIn 0.3s ease;
        }

        .custom-dropdown-menu.active {
            display: block;
        }

        @keyframes dropdownSlideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Scrollbar for dropdown */
        .custom-dropdown-menu::-webkit-scrollbar {
            width: 6px;
        }

        .custom-dropdown-menu::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }

        .custom-dropdown-menu::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #F59E0B 0%, #FF6B6B 100%);
            border-radius: 3px;
        }

        /* Pill Options Inside Dropdown */
        .dropdown-pill-option {
            padding: 10px 20px;
            border-radius: 50px;
            border: 2px solid rgba(245, 158, 11, 0.3);
            background: transparent;
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'DM Sans', sans-serif;
            white-space: nowrap;
            text-align: center;
            display: block;
            width: 100%;
            margin-bottom: 8px;
        }

        .dropdown-pill-option:last-child {
            margin-bottom: 0;
        }

        .dropdown-pill-option:hover {
            border-color: rgba(245, 158, 11, 0.6);
            transform: translateX(4px);
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.3),
                        0 4px 12px rgba(0, 0, 0, 0.2);
            background: rgba(245, 158, 11, 0.1);
        }

        .dropdown-pill-option.selected {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            border-color: transparent;
            color: #000000;
            font-weight: 700;
            box-shadow: 0 0 25px rgba(245, 158, 11, 0.5),
                        0 4px 16px rgba(0, 0, 0, 0.3);
        }

        /* Hide native selects */
        .filter-select {
            display: none;
        }

        /* Legacy Select (hidden, for functionality) */
        .filter-pill,
        .filter-pills,
        .filter-pill-group,
        .filter-pill-label {
            display: none;
        }

        /* Results Count with Animation */
        .results-count {
            margin-top: 4px;
            font-size: 15px;
            color: var(--text-secondary);
            font-weight: 600;
            text-align: center;
            animation: fadeIn 0.3s ease;
        }

        .results-count strong {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
            font-size: 17px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        /* AI Suggestions Toggle */
        .ai-suggestions-toggle-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 2px solid rgba(100, 116, 139, 0.15);
        }

        .ai-toggle-label {
            display: flex;
            align-items: center;
            gap: 14px;
            cursor: pointer;
            user-select: none;
        }

        .ai-toggle-input {
            display: none;
        }

        .ai-toggle-slider {
            position: relative;
            width: 48px;
            height: 26px;
            background: rgba(10, 10, 10, 0.8);
            border-radius: 50px;
            transition: all 0.3s ease;
            border: 2px solid rgba(10, 10, 10, 0.8);
        }

        .ai-toggle-slider::before {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 16px;
            height: 16px;
            background: #FFFFFF;
            border-radius: 50%;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .ai-toggle-input:checked + .ai-toggle-slider {
            background: rgba(10, 10, 10, 0.95);
            border-color: #fb7d47;
            box-shadow: 0 0 20px rgba(251, 125, 71, 0.3);
        }

        .ai-toggle-input:checked + .ai-toggle-slider::before {
            transform: translateX(22px);
            box-shadow: 0 2px 8px rgba(251, 125, 71, 0.5);
        }

        .ai-toggle-text {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            transition: color 0.3s ease;
        }

        .ai-toggle-label:hover .ai-toggle-text {
            color: #fb7d47;
        }

        .ai-icon {
            font-size: 16px;
            display: inline-block;
            animation: pulse 2s ease-in-out infinite;
            filter: drop-shadow(0 0 4px rgba(245, 158, 11, 0.6));
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .ai-suggestions-info {
            position: relative;
            cursor: help;
        }

        .ai-suggestions-info:hover .ai-suggestions-tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .ai-suggestions-tooltip {
            position: absolute;
            bottom: calc(100% + 12px);
            right: 0;
            background: rgba(15, 15, 15, 0.98);
            border: 2px solid rgba(0, 212, 255, 0.4);
            border-radius: 12px;
            padding: 12px 16px;
            width: 280px;
            font-size: 12px;
            color: var(--text-secondary);
            opacity: 0;
            visibility: hidden;
            transform: translateY(5px);
            transition: all 0.3s ease;
            pointer-events: none;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6);
            z-index: 1001;
        }

        .ai-suggestions-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            right: 20px;
            border: 6px solid transparent;
            border-top-color: rgba(0, 212, 255, 0.4);
        }

        /* AI Recommendations Banner */
        .ai-recommendations-banner {
            background: rgba(10, 10, 10, 0.8);
            border: 2px solid rgba(251, 125, 71, 0.3);
            border-radius: 16px;
            padding: 20px 24px;
            margin-bottom: 32px;
            display: none;
            align-items: center;
            gap: 16px;
            box-shadow: 0 8px 24px rgba(251, 125, 71, 0.15);
            animation: fadeInScale 0.4s ease;
        }

        .ai-recommendations-banner.active {
            display: flex;
        }

        .ai-banner-icon {
            width: 48px;
            height: 48px;
            background: rgba(10, 10, 10, 0.95);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            position: relative;
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.1),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 2px 8px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        .ai-banner-icon::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 12px;
            padding: 2px;
            background: linear-gradient(
                90deg,
                transparent 0%,
                #fb7d47 20%,
                #fb7d47 40%,
                #FF6B6B 60%,
                transparent 80%,
                transparent 100%
            );
            background-size: 200% 100%;
            -webkit-mask: 
                linear-gradient(#fff 0 0) content-box, 
                linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            animation: liquidFlow 4s ease-in-out infinite;
            pointer-events: none;
        }
        
        .ai-banner-icon svg {
            width: 24px;
            height: 24px;
            stroke: #fb7d47;
            fill: none;
            stroke-width: 2;
            position: relative;
            z-index: 2;
        }

        .ai-banner-content {
            flex: 1;
        }

        .ai-banner-title {
            font-size: 16px;
            font-weight: 700;
            color: #fb7d47;
            margin-bottom: 4px;
        }

        .ai-banner-description {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .ai-banner-loading {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: #fb7d47;
        }

        .ai-loading-spinner {
            width: 16px;
            height: 16px;
            border: 2px solid rgba(245, 158, 11, 0.3);
            border-top-color: #fb7d47;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* AI Badge */
        .ai-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(10, 10, 10, 0.95);
            border: none;
            border-radius: 50px;
            font-size: 11px;
            font-weight: 700;
            color: #ffffff;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-left: 12px;
            transition: all 0.3s ease;
            position: relative;
            cursor: default;
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.1),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 2px 8px rgba(0, 0, 0, 0.2);
            z-index: 1;
            overflow: hidden;
        }
        
        .ai-badge::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50px;
            padding: 2px;
            background: linear-gradient(
                90deg,
                transparent 0%,
                #fb7d47 20%,
                #fb7d47 40%,
                #FF6B6B 60%,
                transparent 80%,
                transparent 100%
            );
            background-size: 200% 100%;
            -webkit-mask: 
                linear-gradient(#fff 0 0) content-box, 
                linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            animation: liquidFlow 4s ease-in-out infinite;
            pointer-events: none;
        }
        
        .ai-badge:hover {
            transform: scale(1.05);
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.15),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 0 25px rgba(251, 125, 71, 0.4);
        }
        
        .ai-badge svg {
            width: 14px;
            height: 14px;
            stroke: #fb7d47;
            fill: none;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            flex-shrink: 0;
            position: relative;
            z-index: 2;
        }

        .ai-badge-icon {
            display: none;
        }

        /* Animation Grid */
        .animation-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 28px;
            align-items: start;
        }

        /* ============================================
           EXPANDING CARD - Inspired by Codepen
           ============================================ */
        .animation-card {
            position: relative;
            flex-shrink: 0;
            height: 400px;
            width: 250px;
            background-color: rgba(10, 10, 10, 0.95);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 7px 15px -5px rgba(0, 0, 0, 0.5);
            transition: all 0.55s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            border: 2px solid rgba(0, 212, 255, 0.2);
            cursor: pointer;
            margin: 0 auto;
            will-change: height, width, box-shadow;
        }
        
        /* Pause animations when off-screen */
        .animation-card.paused,
        .animation-card.paused * {
            transition: none !important;
            animation: none !important;
        }

        .animation-card:hover {
            height: 520px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6),
                        0 0 30px rgba(251, 125, 71, 0.15);
            border-color: #fb7d47;
        }

        /* Top Bar with badges */
        .card-top-bar {
            position: absolute;
            top: 3px;
            left: 10px;
            right: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 5;
            transition: transform 0.55s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            will-change: transform;
        }

        .animation-card:hover .card-top-bar {
            transform: translateY(2px);
        }

        .card-badges-row {
            display: flex;
            gap: 4px;
            transform: translateY(-3px);
        }

        .card-stock-badge {
            font-size: 10px;
            font-weight: 600;
            color: #10B981;
            background: rgba(16, 185, 129, 0.2);
            padding: 3px 8px;
            border-radius: 20px;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        /* Details Panel - Slides up on hover */
        .card-details {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 142px;
            width: 100%;
            background: rgba(10, 10, 10, 0.8);
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            padding: 10px 20px 20px 20px;
            transition: height 0.55s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            overflow: hidden;
            will-change: height;
        }

        .animation-card:hover .card-details {
            height: 260px;
            transition: height 0.6s cubic-bezier(0.34, 1.4, 0.64, 1);
        }

        /* Title Row - Title left, Heart right */
        .card-title-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 8px;
        }

        .card-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-white);
            font-family: 'Sora', sans-serif;
            line-height: 1.3;
            flex: 1;
            transition: all 0.3s ease;
        }

        .animation-card:hover .card-title {
            background: linear-gradient(135deg, #F59E0B, #FF6B6B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .card-fav-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.25);
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 2px;
            font-size: 16px;
            flex-shrink: 0;
        }

        .card-fav-btn:hover,
        .card-fav-btn.active {
            color: #EF4444;
            transform: scale(1.2);
        }

        /* Tags + Price Row - Tags left, Price right */
        .card-tags-price-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 8px;
            margin-top: 8px;
        }

        .card-tags-price-row .card-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            flex: 1;
        }

        .card-price-display {
            font-size: 32px;
            font-weight: 700;
            font-family: 'Sora', sans-serif;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            justify-content: flex-end;
            line-height: 1;
            height: 46px;
            transform: translateY(20px);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .card-price-dollar {
            background: linear-gradient(135deg, #F59E0B, #FF6B6B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .card-price-original {
            font-size: 12px;
            color: var(--text-muted);
            text-decoration: line-through;
            margin-bottom: 2px;
        }

        .card-price-main {
            display: flex;
            align-items: baseline;
        }

        /* Duration Row - Always visible */
        .card-duration-row {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 6px;
        }

        .card-duration-row svg {
            width: 12px;
            height: 12px;
            stroke: currentColor;
            fill: none;
        }

        .card-duration-row .separator {
            margin: 0 3px;
            opacity: 0.5;
        }

        /* Meta Row - Rating and Engine Icons */
        .card-meta-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 6px;
        }

        .card-rating {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .card-rating .star {
            color: #fb7d47;
            font-size: 11px;
        }

        .card-rating .rating-value {
            font-weight: 600;
            color: var(--text-secondary);
        }

        .card-engines {
            display: flex;
            align-items: center;
            gap: 6px;
            transform: translateY(-2px);
        }

        .card-engines .engine-icon {
            font-size: 9px;
            font-weight: 600;
            padding: 2px 5px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.08);
            color: var(--text-muted);
            letter-spacing: 0.3px;
        }

        /* Purchase Row - Buttons only */
        .card-purchase {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 10px;
        }
        
        /* Feature Card Styles */
        .feature-card {
            background: rgba(10, 10, 10, 0.8);
            padding: 32px;
            border-radius: 16px;
            border: 2px solid rgba(0, 212, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
        }
        
        .feature-card:hover {
            transform: translateY(-12px);
            border-color: #fb7d47;
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.6), 
                        0 0 40px rgba(251, 125, 71, 0.25),
                        0 0 20px rgba(251, 125, 71, 0.15);
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .filters-card {
                padding: 32px 24px;
            }

            .search-input {
                font-size: 15px;
                padding: 20px 24px 20px 60px;
            }

            .search-input:focus {
                transform: scale(1);
                padding-top: 24px;
                padding-bottom: 16px;
            }

            .filter-pills {
                flex-direction: column;
            }

            .filter-pill {
                width: 100%;
                text-align: center;
                justify-content: center;
            }

            .premium-banner {
                padding: 14px 24px;
            }

            .premium-banner-text {
                font-size: 0.9rem;
            }
        }
        
        /* FAQ Item Styles */
        .faq-item {
            background: rgba(10, 10, 10, 0.8);
            padding: 0;
            border-radius: 16px;
            border: 2px solid rgba(0, 212, 255, 0.2);
            transition: all 0.3s ease;
            overflow: hidden;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
        }
        
        .faq-item:hover {
            border-color: #fb7d47;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5), 
                        0 0 30px rgba(251, 125, 71, 0.15);
        }
        
        .faq-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px 28px;
            cursor: pointer;
            gap: 16px;
        }
        
        .faq-question h3 {
            font-size: 18px;
            font-weight: 700;
            font-family: 'Sora', sans-serif;
            color: #fb7d47;
            margin: 0;
            flex: 1;
        }
        
        .faq-arrow {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
            flex-shrink: 0;
        }
        
        .faq-arrow svg {
            width: 20px;
            height: 20px;
            stroke: #fb7d47;
            stroke-width: 2;
            fill: none;
        }
        
        .faq-item.open .faq-arrow {
            transform: rotate(180deg);
        }
        
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease, padding 0.3s ease;
        }
        
        .faq-answer p {
            padding: 0 28px 24px;
            color: var(--text-secondary);
            line-height: 1.8;
            margin: 0;
        }
        
        .faq-item.open .faq-answer {
            max-height: 500px;
        }
        
        .card-checkbox {
            position: absolute;
            top: 14px;
            right: 13px;
            z-index: 10;
        }
        
        .card-checkbox input[type="checkbox"] {
            display: none;
        }
        
        .card-checkbox label {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border: 2px solid rgba(251, 125, 71, 0.5);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .card-checkbox label svg {
            width: 18px;
            height: 18px;
            stroke: #FFFFFF;
            fill: none;
            stroke-width: 2;
            opacity: 0.7;
            transition: all 0.3s ease;
        }
        
        .card-checkbox label:hover {
            transform: scale(1.1);
            border-color: #fb7d47;
            background: rgba(251, 125, 71, 0.1);
        }
        
        .card-checkbox label:hover svg {
            opacity: 1;
        }
        
        .card-checkbox input[type="checkbox"]:checked + label {
            background: rgba(251, 125, 71, 0.2);
            border-color: #fb7d47;
        }
        
        .card-checkbox input[type="checkbox"]:checked + label svg {
            opacity: 1;
            stroke: #fb7d47;
        }
        
        .card-checkbox input[type="checkbox"]:checked + label::after {
            content: '';
            position: absolute;
            top: -4px;
            right: -4px;
            width: 16px;
            height: 16px;
            background: #fb7d47;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: black;
            font-size: 10px;
            font-weight: bold;
        }

        .card-thumbnail {
            position: absolute;
            width: calc(100% - 12px);
            aspect-ratio: 9 / 10;
            margin: 0 auto;
            left: 0;
            right: 0;
            top: 4px;
            border-radius: 12px;
            overflow: hidden;
            background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);
            transition: transform 0.55s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .animation-card:hover .card-thumbnail {
            transform: translateY(-1px);
        }
        
        /* Media fills container naturally */
        .card-thumbnail img,
        .card-thumbnail video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center center;
            transition: transform 0.55s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .animation-card:hover .card-thumbnail img,
        .animation-card:hover .card-thumbnail video {
            transform: scale(1.05);
        }
        
        /* Icon badges - positioned in top bar */
        .icon-badge {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            cursor: help;
        }
        
        .icon-badge svg {
            width: 12px;
            height: 12px;
        }
        
        .icon-badge:hover {
            transform: scale(1.15);
        }
        
        .icon-badge-popular {
            background: rgba(245, 158, 11, 0.25);
            color: var(--amber);
            border: 1px solid rgba(245, 158, 11, 0.5);
        }
        
        .icon-badge-sale {
            background: rgba(34, 197, 94, 0.25);
            color: #10B981;
            border: 1px solid rgba(34, 197, 94, 0.5);
        }
        
        .icon-badge-holiday {
            background: rgba(239, 68, 68, 0.25);
            color: #EF4444;
            border: 1px solid rgba(239, 68, 68, 0.5);
        };
            color: var(--amber);
            border: 1px solid rgba(245, 158, 11, 0.5);
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3);
        }
        
        .icon-badge-sale {
            background: rgba(34, 197, 94, 0.2);
            color: #10B981;
            border: 1px solid rgba(34, 197, 94, 0.5);
            box-shadow: 0 2px 8px rgba(34, 197, 94, 0.3);
        }
        
        .icon-badge-holiday {
            background: rgba(239, 68, 68, 0.2);
            color: #EF4444;
            border: 1px solid rgba(239, 68, 68, 0.5);
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
        }

        .card-overlay {
            display: none; /* Overlay removed - buttons moved to bottom */
        }

        /* Card Actions - Fade in on hover */
        .card-actions {
            display: flex;
            flex-direction: column;
            gap: 6px;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            will-change: opacity, transform;
        }
        
        .animation-card:hover .card-actions {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.4s ease 0.1s, transform 0.4s cubic-bezier(0.34, 1.2, 0.64, 1) 0.1s;
        }
        
        .card-actions-row {
            display: flex;
            gap: 6px;
        }
        
        /* Base button styles - pill shaped */
        .card-btn {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            padding: 7px 12px;
            border-radius: 50px;
            font-size: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            border: 1px solid;
        }
        
        .card-btn svg {
            width: 11px;
            height: 11px;
            flex-shrink: 0;
        }
        
        /* Top row buttons - smaller */
        .card-btn-details {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.2);
            color: var(--text-primary);
        }
        
        .card-btn-details:hover {
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 12px rgba(255, 255, 255, 0.2);
        }
        
        .card-btn-details svg {
            stroke: currentColor;
            fill: none;
        }
        
        .card-btn-3d {
            background: rgba(245, 158, 11, 0.1);
            border-color: rgba(245, 158, 11, 0.3);
            color: var(--amber);
        }
        
        .card-btn-3d:hover {
            background: rgba(245, 158, 11, 0.2);
            border-color: var(--amber);
            box-shadow: 0 0 12px rgba(245, 158, 11, 0.35);
        }
        
        .card-btn-3d svg {
            stroke: currentColor;
            fill: none;
        }
        
        /* Bottom row buttons - larger */
        .card-btn-buy {
            background: rgba(16, 185, 129, 0.12);
            border-color: rgba(16, 185, 129, 0.4);
            color: #10B981;
            font-weight: 700;
            padding: 14px 14px;
            font-size: 12px;
        }
        
        .card-btn-buy svg {
            width: 14px;
            height: 14px;
            stroke: currentColor;
            fill: none;
        }
        
        .card-btn-buy:hover {
            background: rgba(16, 185, 129, 0.25);
            border-color: #10B981;
            box-shadow: 0 0 12px rgba(16, 185, 129, 0.4);
        }
        
        .card-btn-cart {
            background: rgba(0, 212, 255, 0.1);
            border-color: rgba(0, 212, 255, 0.3);
            color: #fb7d47;
            font-weight: 700;
            padding: 14px 14px;
            font-size: 12px;
        }
        
        .card-btn-cart svg {
            width: 14px;
            height: 14px;
            stroke: currentColor;
            fill: none;
        }
        
        .card-btn-cart:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: #fb7d47;
            box-shadow: 0 0 12px rgba(251, 125, 71, 0.4);
        }

        /* Card Content - Legacy support */
        .card-content {
            display: none; /* Replaced by card-details */
        }
        
        .card-badges {
            min-height: 60px;
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            margin-bottom: 8px;
            align-content: flex-start;
        }

        .tag {
            padding: 3px 8px;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.25);
            border-radius: 5px;
            font-size: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .card-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-top: 12px;
            border-top: 1px solid rgba(0, 212, 255, 0.1);
        }

        .card-duration {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: var(--text-muted);
        }

        .card-price {
            /* Styling moved to inline - see renderAnimations() */
        }

        .add-to-cart-btn {
            width: 100%;
            margin-top: 20px;
            padding: 14px;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 50px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease, border-color 0.2s ease;
            font-family: 'Sora', sans-serif;
            font-size: 15px;
            position: relative;
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.1),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 2px 8px rgba(0, 0, 0, 0.2);
            isolation: isolate;
        }
        
        .add-to-cart-btn::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 50px;
            background: linear-gradient(
                90deg,
                transparent 0%,
                #fb7d47 20%,
                #fb7d47 40%,
                #FF6B6B 60%,
                transparent 80%,
                transparent 100%
            );
            background-size: 200% 100%;
            z-index: -2;
            opacity: 0;
            transition: opacity 0.3s ease;
            animation: liquidFlow 4s ease-in-out infinite paused;
        }
        
        .add-to-cart-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50px;
            background: rgba(10, 10, 10, 0.95);
            z-index: -1;
        }

        .add-to-cart-btn:hover {
            border-color: rgba(10, 10, 10, 0.95);
            transform: scale(1.03);
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.15),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 0 25px rgba(251, 125, 71, 0.4);
        }
        
        .add-to-cart-btn:hover::before {
            opacity: 1;
            animation-play-state: running;
        }

        .load-more {
            text-align: center;
            margin-top: 60px;
        }

        /* Footer */
        /* Custom Request Section */
        .custom-request-section {
            background: transparent;
            padding: 100px 32px;
            border-top: 2px solid rgba(0, 212, 255, 0.1);
            position: relative;
            z-index: 1;
        }

        .request-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .request-header {
            text-align: center;
            margin-bottom: 48px;
        }

        .request-subtitle {
            color: var(--text-secondary);
            font-size: 18px;
            margin-top: 16px;
            line-height: 1.6;
        }

        .request-form {
            position: relative;
            background: rgba(10, 10, 10, 0.8);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 20px;
            padding: 48px;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
        }

        .request-form.panel-glow > *:not(.panel-glow-blob) {
            position: relative;
            z-index: 1;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
            position: relative;
            z-index: 1;
        }

        .form-group {
            margin-bottom: 24px;
            position: relative;
            z-index: 1;
        }

        .form-group .filter-group {
            position: relative;
        }
        
        .form-group:has(.custom-dropdown-btn.active) {
            z-index: 10000;
        }

        .form-group .custom-dropdown-menu {
            z-index: 10001;
        }
        
        .form-group .custom-dropdown-menu.active {
            display: flex;
            flex-direction: column;
        }
        
        .form-group .dropdown-pill-option {
            width: 100%;
            text-align: left;
        }

        .form-group label {
            display: block;
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 12px;
            font-size: 14px;
            position: relative;
            z-index: 1;
        }

        .form-group input[type="text"],
        .form-group input[type="email"] {
            width: 100%;
            background: rgba(10, 10, 10, 0.85);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 50px !important;
            padding: 16px 24px;
            color: var(--text-primary);
            font-size: 15px;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
        }

        .form-group input[type="text"]:focus,
        .form-group input[type="email"]:focus {
            outline: none;
            border-color: rgba(0, 212, 255, 0.4);
            background: rgba(10, 10, 10, 0.85);
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 20px rgba(251, 125, 71, 0.2);
        }

        .form-group input[type="text"]:hover,
        .form-group input[type="email"]:hover {
            background: rgba(10, 10, 10, 0.85);
        }

        .form-group select {
            width: 100%;
            background: rgba(10, 10, 10, 0.85);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 50px !important;
            padding: 16px 24px;
            color: var(--text-primary);
            font-size: 15px;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
            cursor: pointer;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg width='12' height='12' viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M2 4L6 8L10 4' stroke='%2300D4FF' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 20px center;
            padding-right: 48px;
            font-weight: 600;
        }

        .form-group textarea {
            width: 100%;
            background: rgba(10, 10, 10, 0.85);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 16px !important;
            padding: 16px 24px;
            color: var(--text-primary);
            font-size: 15px;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
            resize: vertical;
            min-height: 120px;
        }

        .form-group select option {
            background: #0F0F0F;
            color: var(--text-primary);
            padding: 12px 20px;
            font-weight: 600;
        }
        
        .form-group select option:hover {
            background: rgba(245, 158, 11, 0.2);
            color: #fb7d47;
        }
        
        .form-group select option:checked {
            background: linear-gradient(135deg, #F59E0B, #FF6B6B);
            color: #000000;
            font-weight: 700;
        }

        .form-group select:focus {
            outline: none;
            border-color: rgba(0, 212, 255, 0.4);
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 20px rgba(251, 125, 71, 0.2);
        }
        
        .form-group textarea:focus {
            outline: none;
            border-color: rgba(0, 212, 255, 0.4);
            background: rgba(10, 10, 10, 0.85);
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 20px rgba(251, 125, 71, 0.2);
        }

        .form-group textarea:hover {
            background: rgba(10, 10, 10, 0.85);
        }

        .form-group select:hover {
            border-color: rgba(0, 212, 255, 0.4);
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 20px rgba(251, 125, 71, 0.2);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
            border-radius: 24px;
        }

        /* submit-btn uses btn-cta now - just keep width */
        .submit-btn.btn-cta {
            width: 100%;
            position: relative;
            z-index: 1;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }

            .request-form {
                padding: 32px 24px;
            }
        }

        .footer {
            background: #0a0a0a;
            border-top: 2px solid rgba(100, 116, 139, 0.15);
            padding: 60px 32px 32px;
            position: relative;
            z-index: 1;
        }

        /* ========================================== */
        /* CONVERSION BOOSTING CTAs & BANNERS        */
        /* ========================================== */
        
        /* Rewards Coming Soon Banner */
        .rewards-banner {
            background: rgba(10, 10, 10, 0.8);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 16px;
            padding: 24px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 24px;
            margin: 0 auto;
            width: 100%;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
        }
        
        .rewards-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(251, 125, 71, 0.1), transparent);
            animation: shine 4s infinite;
        }
        
        .rewards-banner-content {
            display: flex;
            align-items: center;
            gap: 16px;
            z-index: 1;
        }
        
        .rewards-banner-icon {
            font-size: 40px;
            filter: drop-shadow(0 0 10px rgba(251, 125, 71, 0.5));
        }
        
        .rewards-banner-text h3 {
            font-family: 'Sora', sans-serif;
            font-size: 20px;
            font-weight: 700;
            color: #FBBF24;
            margin-bottom: 4px;
        }
        
        .rewards-banner-text p {
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        .rewards-banner-badge {
            background: linear-gradient(135deg, #F59E0B, #FF6B6B);
            color: #000;
            padding: 8px 20px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 1px;
            white-space: nowrap;
            z-index: 1;
        }

        /* Promo Strip Banner */
        .promo-strip {
            background: linear-gradient(90deg, #F59E0B, #FF6B6B, #fb7d47);
            background-size: 200% 100%;
            animation: gradientMove 3s ease infinite;
            padding: 12px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        @keyframes gradientMove {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .promo-strip-text {
            color: #000;
            font-weight: 700;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 12px;
        }
        
        .promo-strip-text a {
            color: #000;
            text-decoration: underline;
            font-weight: 800;
        }

        /* Mid-Page CTA Banner */
        .cta-banner {
            background: rgba(10, 10, 10, 0.8);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 20px;
            padding: 48px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
        }
        
        .cta-banner::before {
            display: none;
        }
        
        .cta-banner-content {
            position: relative;
            z-index: 1;
        }
        
        .cta-banner h3 {
            font-family: 'Sora', sans-serif;
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 12px;
        }
        
        .cta-banner p {
            color: var(--text-secondary);
            font-size: 16px;
            margin-bottom: 24px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .cta-banner-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            align-items: center;
        }

        /* Social Proof Ticker */
        .social-proof-ticker {
            background: rgba(10, 10, 10, 0.5);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-top: 2px solid rgba(0, 212, 255, 0.15);
            border-bottom: 2px solid rgba(0, 212, 255, 0.15);
            padding: 14px 0;
            overflow: hidden;
            position: relative;
        }
        
        .social-proof-ticker:hover .ticker-track {
            animation-play-state: paused;
        }
        
        .ticker-track {
            display: flex;
            animation: ticker 30s linear infinite;
            width: max-content;
        }
        
        @keyframes ticker {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        
        .ticker-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 0 40px;
            color: var(--text-secondary);
            font-size: 14px;
            white-space: nowrap;
        }
        
        .ticker-item strong {
            color: #FBBF24;
        }
        
        .ticker-dot {
            width: 6px;
            height: 6px;
            background: #fb7d47;
            border-radius: 50%;
        }

        /* CTA Strip Banner */
        .cta-strip-banner {
            background: rgba(10, 10, 10, 0.5);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 2px solid rgba(0, 212, 255, 0.15);
            padding: 20px 0;
            position: relative;
            width: 100%;
        }
        
        .cta-strip-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            flex-wrap: wrap;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .cta-strip-icon {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .cta-animated-icon {
            width: 28px;
            height: 28px;
            stroke: #fb7d47;
            filter: drop-shadow(0 0 6px rgba(245, 158, 11, 0.4));
            stroke-dasharray: 100;
            stroke-dashoffset: 100;
            animation: drawIconLoop 3s ease-in-out infinite;
        }
        
        @keyframes drawIconLoop {
            0% {
                stroke-dashoffset: 100;
                filter: drop-shadow(0 0 6px rgba(245, 158, 11, 0.4));
            }
            40% {
                stroke-dashoffset: 0;
                filter: drop-shadow(0 0 10px rgba(245, 158, 11, 0.6));
            }
            60% {
                stroke-dashoffset: 0;
                filter: drop-shadow(0 0 14px rgba(245, 158, 11, 0.8));
            }
            100% {
                stroke-dashoffset: 100;
                filter: drop-shadow(0 0 6px rgba(245, 158, 11, 0.4));
            }
        }
        
        .cta-strip-content .cta-strip-icon:nth-child(4) .cta-animated-icon {
            animation-delay: 0.4s;
        }
        
        .cta-strip-content .cta-strip-icon:nth-child(7) .cta-animated-icon {
            animation-delay: 0.8s;
        }
        
        .cta-strip-content .cta-strip-icon:nth-child(10) .cta-animated-icon {
            animation-delay: 1.2s;
        }
        
        .cta-strip-content .cta-strip-icon:nth-child(13) .cta-animated-icon {
            animation-delay: 1.6s;
        }
        
        .cta-strip-text {
            color: var(--text-secondary);
            font-size: 15px;
            font-weight: 500;
        }
        
        .cta-strip-text strong {
            color: #FBBF24;
            font-weight: 700;
        }
        
        .cta-strip-divider {
            color: rgba(0, 212, 255, 0.4);
            font-size: 20px;
        }

        /* Stats Counter Section */
        .stats-section {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 32px;
            padding: 60px 40px;
            background: rgba(10, 10, 10, 0.5);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-radius: 20px;
            margin: 40px auto;
            max-width: 1200px;
            border: 2px solid rgba(0, 212, 255, 0.2);
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
        }
        
        .stat-box {
            text-align: center;
        }
        
        .stat-number {
            font-family: 'Sora', sans-serif;
            font-size: 48px;
            font-weight: 800;
            background: linear-gradient(135deg, #F59E0B, #FF6B6B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            margin-bottom: 8px;
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
        }

        /* Floating Side CTA */
        .floating-side-cta {
            position: fixed;
            right: -300px;
            top: 50%;
            transform: translateY(-50%);
            background: transparent;
            border: none;
            border-radius: 16px 0 0 16px;
            padding: 24px;
            width: 280px;
            z-index: 9999;
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .floating-side-cta::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-right: none;
            border-radius: 16px 0 0 16px;
            z-index: 1;
            box-shadow: 
                -4px 0 24px rgba(0, 0, 0, 0.4),
                inset 1px 0 1px rgba(0, 212, 255, 0.1),
                -20px 0 40px rgba(0, 212, 255, 0.05);
        }
        
        .floating-side-cta > *:not(.floating-side-cta-toggle):not(.floating-side-cta-close) {
            position: relative;
            z-index: 2;
        }
        
        .floating-side-cta.show {
            right: 0;
        }
        
        .floating-side-cta-toggle {
            position: absolute;
            left: -47px;
            top: 50%;
            transform: translateY(-50%);
            width: 49px;
            height: 120px;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-right: none;
            border-radius: 12px 0 0 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            color: #fb7d47;
            font-family: 'Sora', sans-serif;
            font-weight: 700;
            font-size: 14px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            box-shadow: -4px 0 20px rgba(251, 125, 71, 0.15);
            animation: offersPulse 2s ease-in-out infinite;
            padding-right: 25px;
            z-index: -1;
        }
        
        @keyframes offersPulse {
            0%, 100% {
                box-shadow: -4px 0 20px rgba(251, 125, 71, 0.15);
            }
            50% {
                box-shadow: -4px 0 30px rgba(251, 125, 71, 0.3);
            }
        }
        
        .floating-side-cta-toggle:hover {
            box-shadow: -4px 0 35px rgba(251, 125, 71, 0.4);
            background: rgba(10, 10, 10, 0.4);
            animation: none;
        }
        
        .floating-side-cta-close {
            position: absolute;
            top: 12px;
            right: 12px;
            left: auto;
            width: 24px;
            height: 24px;
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
            opacity: 0.6;
            z-index: 10;
        }
        
        .floating-side-cta-close:hover {
            opacity: 1;
            color: #fb7d47;
            background: rgba(245, 158, 11, 0.1);
        }
        
        .floating-side-cta h4 {
            font-family: 'Sora', sans-serif;
            font-size: 16px;
            font-weight: 700;
            color: #FBBF24;
            margin-bottom: 8px;
        }
        
        .floating-side-cta p {
            color: var(--text-secondary);
            font-family: 'DM Sans', sans-serif;
            font-size: 14px;
            margin-bottom: 16px;
            line-height: 1.5;
        }

        /* Trust Badges Row */
        .trust-badges-row {
            display: flex;
            justify-content: center;
            gap: 40px;
            padding: 30px 20px;
            flex-wrap: wrap;
        }
        
        .trust-badge-item {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-muted);
            font-size: 13px;
        }
        
        .trust-badge-item svg {
            width: 24px;
            height: 24px;
            color: #fb7d47;
        }

        /* Urgency Banner */
        .urgency-banner {
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin: 20px auto;
            max-width: 600px;
        }
        
        .urgency-banner-icon {
            font-size: 20px;
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        .urgency-banner-text {
            color: #FCA5A5;
            font-size: 14px;
            font-weight: 600;
        }
        
        .urgency-banner-text strong {
            color: #F87171;
        }

        @media (max-width: 768px) {
            .rewards-banner {
                flex-direction: column;
                text-align: center;
                padding: 20px;
            }
            
            .stats-section {
                grid-template-columns: repeat(2, 1fr);
                padding: 40px 20px;
            }
            
            .stat-number {
                font-size: 36px;
            }
            
            .floating-side-cta {
                display: none;
            }
            
            .cta-banner {
                padding: 32px 20px;
            }
            
            .cta-banner h3 {
                font-size: 24px;
            }
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 48px;
            max-width: 1400px;
            margin: 0 auto 48px;
        }

        .footer-brand {
            grid-column: span 2;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .footer-description {
            color: var(--text-primary);
            margin-bottom: 28px;
            max-width: 400px;
            line-height: 1.7;
        }

        .social-links {
            display: flex;
            gap: 12px;
        }

        .social-link {
            width: 44px;
            height: 44px;
            background: rgba(0, 212, 255, 0.05);
            border: 2px solid rgba(0, 212, 255, 0.15);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .social-link:hover {
            background: rgba(0, 212, 255, 0.15);
            border-color: #fb7d47;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(251, 125, 71, 0.3);
        }

        .footer-section h4 {
            color: var(--text-primary);
            margin-bottom: 20px;
            font-weight: 700;
            font-family: 'Sora', sans-serif;
            font-size: 16px;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 15px;
        }

        .footer-links a:hover {
            color: #fb7d47;
            padding-left: 4px;
        }

        .footer-bottom {
            max-width: 1400px;
            margin: 0 auto;
            padding-top: 32px;
            border-top: 2px solid rgba(0, 212, 255, 0.15);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .copyright {
            color: var(--text-muted);
            font-size: 14px;
        }

        .legal-links {
            display: flex;
            gap: 28px;
            font-size: 14px;
        }

        .legal-links a {
            color: var(--text-muted);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .legal-links a:hover {
            color: #fb7d47;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translate(0, 0);
            }
            33% {
                transform: translate(30px, -30px);
            }
            66% {
                transform: translate(-20px, 20px);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.7;
                transform: scale(0.95);
            }
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateX(-50%) translateY(0);
            }
            50% {
                transform: translateX(-50%) translateY(-12px);
            }
        }

        /* Sticky Browse Library Button */
        .sticky-browse-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            padding: 12px 24px !important;
            opacity: 0;
            visibility: hidden;
            transform: translateY(100px) !important;
            transition: all 0.3s ease, transform 0.3s ease !important;
        }

        .sticky-browse-btn.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0) !important;
        }

        .sticky-browse-btn:hover {
            transform: scale(1.05) !important;
        }
        
        @media (max-width: 768px) {
            .sticky-browse-btn {
                display: none !important;
            }
        }
        
        /* Mobile Sticky CTA */
        .mobile-sticky-cta {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.95) 0%, rgba(0, 0, 0, 0.98) 100%);
            backdrop-filter: blur(20px);
            padding: 12px 20px;
            border-top: 2px solid rgba(245, 158, 11, 0.3);
            display: none;
            opacity: 0;
            transform: translateY(100%);
            transition: all 0.4s ease;
            box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .mobile-sticky-cta.show {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        .mobile-sticky-cta-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .mobile-sticky-cta-text {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .mobile-sticky-cta-text small {
            display: block;
            font-size: 11px;
            color: var(--text-muted);
            font-weight: 400;
        }
        
        .mobile-sticky-cta-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            border: none;
            border-radius: 50px;
            color: #000;
            font-weight: 700;
            font-size: 13px;
            white-space: nowrap;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
        }

        /* Responsive */
        @media (max-width: 768px) {
            /* Hide desktop nav elements */
            .nav-center {
                display: none;
            }
            
            .nav-links-left {
                display: none;
            }
            
            .nav-links-right {
                display: none;
            }
            
            .nav-search {
                display: none;
            }
            
            .btn-login {
                display: none;
            }

            /* Keep cart and user menu visible on mobile */
            .nav-right {
                display: flex;
                gap: 8px;
            }

            /* Show mobile menu button */
            .hamburger-menu {
                display: block !important;
                border: none !important;
                background: linear-gradient(135deg, var(--teal), var(--amber)) !important;
                -webkit-background-clip: text !important;
                -webkit-text-fill-color: transparent !important;
                background-clip: text !important;
                font-size: 28px;
                cursor: pointer;
                padding: 8px;
                outline: none !important;
                box-shadow: none !important;
                z-index: 1000 !important;
                position: relative !important;
            }
            
            .hamburger-menu:focus {
                outline: none !important;
                box-shadow: none !important;
            }
            
            /* Tighter navbar on mobile */
            .navbar-container {
                gap: 12px;
            }
            
            /* Mobile menu overlay */
            .nav-links {
                display: flex; /* Show on mobile */
                position: fixed;
                top: 0;
                right: -100%;
                width: 280px;
                height: 100vh;
                background: rgba(10, 10, 10, 0.98);
                flex-direction: column;
                gap: 0;
                padding: 80px 0 20px;
                border-left: 2px solid rgba(0, 212, 255, 0.2);
                transition: right 0.3s ease;
                z-index: 9999;
                overflow-y: auto;
            }
            
            .mobile-menu-close {
                display: flex; /* Show on mobile */
            }
            
            .nav-links.active {
                right: 0;
            }
            
            /* Mobile menu items */
            .nav-links li {
                width: 100%;
                text-align: left;
                padding: 0;
                border-bottom: 2px solid rgba(0, 212, 255, 0.05);
            }
            
            .nav-links li a {
                display: block;
                padding: 20px 32px;
                font-size: 16px;
                font-weight: 600;
            }
            
            .nav-links li:last-child {
                border-bottom: none;
            }
            
            /* Mobile menu close button */
            .mobile-menu-close {
                position: absolute;
                top: 20px;
                right: 20px;
                width: 40px;
                height: 40px;
                background: rgba(0, 212, 255, 0.1);
                border: none;
                border-radius: 8px;
                color: var(--text-primary);
                font-size: 24px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            /* Keep cart icon and user menu visible on mobile */
            .nav-actions {
                display: flex;
                gap: 12px;
                align-items: center;
            }
            
            .cart-icon {
                display: flex !important;
            }
            
            #userMenu {
                display: none !important;
            }
            
            #userMenu.active {
                display: flex !important;
                flex-direction: column;
                position: fixed;
                top: 80px;
                right: 20px;
                background: var(--bg-secondary);
                border: 2px solid rgba(0, 212, 255, 0.2);
                border-radius: 12px;
                padding: 16px;
                gap: 12px;
                z-index: 9998;
            }
            
            #userMenu a {
                white-space: nowrap;
            }

            .footer-brand {
                grid-column: span 1;
            }

            .footer-bottom {
                flex-direction: column;
                text-align: center;
            }

            .animation-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }

            .navbar-container {
                padding: 0 20px;
            }

            .library-section {
                padding: 80px 20px;
            }

            .filters-card {
                padding: 24px;
            }
            
            .hero h1 {
                font-size: 40px;
            }
            
            .hero-description {
                font-size: 16px;
            }
            
            .hero-buttons {
                flex-direction: column;
                width: 100%;
                align-items: center;
            }
            
            .hero-buttons .btn {
                width: 100%;
            }
            
            /* Auth modal mobile optimization */
            .auth-modal-box {
                width: 95%;
                max-width: 100%;
            }
            
            .auth-close {
                display: flex; /* Show X button on mobile */
            }
            
            .auth-form {
                padding: 32px 24px;
            }
            
            .auth-modal-content {
                padding: 32px 24px;
            }
            
            /* Cart modal mobile */
            .cart-modal-content {
                width: 100%;
                max-width: 100%;
            }
        }

        @media (max-width: 480px) {
            .filters-grid {
                grid-template-columns: 1fr;
            }

            .animation-grid {
                flex-direction: column;
                align-items: center;
                gap: 20px;
            }
            
            /* Mobile: Cards start expanded since no hover */
            .animation-card {
                height: 540px;
                width: 310px;
            }
            
            .card-details {
                top: 300px;
            }
            
            .card-thumbnail {
                transform: translateY(0);
            }
        }

        /* SVG Icons */
        /* Cart Modal */
        /* Auth Required Modal */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(8px);
            z-index: 20000;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .auth-modal.active {
            display: flex;
        }
        
        .auth-modal-overlay {
            position: absolute;
            inset: 0;
        }
        
        .auth-modal-content {
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 20px;
            padding: 48px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            animation: modalSlideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
            z-index: 1;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
        }
        
        .auth-modal-box {
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 20px;
            padding: 0;
            max-width: 480px;
            width: 90%;
            animation: modalSlideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
            z-index: 1;
            overflow: hidden;
            box-shadow: 
                0 4px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(251, 125, 71, 0.1),
                0 0 40px rgba(251, 125, 71, 0.05);
        }
        
        .auth-modal-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(0, 212, 255, 0.3), transparent);
        }
        
        @keyframes modalSlideIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .auth-close {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 44px;
            height: 44px;
            border: 2px solid rgba(0, 212, 255, 0.15);
            background: rgba(0, 0, 0, 0.3);
            color: var(--text-secondary);
            font-size: 24px;
            font-weight: bold;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 2;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .auth-close:hover {
            background: rgba(239, 68, 68, 0.2);
            border-color: rgba(239, 68, 68, 0.4);
            color: #FCA5A5;
            transform: scale(1.1);
        }
        
        .auth-tabs {
            display: flex;
            border-bottom: 2px solid rgba(0, 212, 255, 0.1);
            background: rgba(0, 0, 0, 0.2);
        }
        
        .auth-tab {
            flex: 1;
            padding: 20px;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .auth-tab:hover {
            color: var(--text-primary);
            background: rgba(0, 212, 255, 0.03);
        }
        
        .auth-tab.active {
            color: var(--text-primary);
            background: rgba(0, 212, 255, 0.05);
        }
        
        .auth-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
        }
        
        .auth-form {
            padding: 40px;
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .auth-form h2 {
            font-size: 28px;
            font-weight: 800;
            font-family: 'Sora', sans-serif;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .auth-subtitle {
            color: var(--text-secondary);
            margin-bottom: 28px;
            font-size: 14px;
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .form-group label {
            display: block;
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .password-input-wrapper {
            position: relative;
        }
        
        .form-group input {
            width: 100%;
            padding: 16px 24px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(0, 212, 255, 0.15);
            border-radius: 50px;
            color: var(--text-primary);
            font-size: 15px;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
        }
        
        .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.35);
        }
        
        .password-input-wrapper input {
            padding-right: 50px; /* Make room for eye icon */
        }
        
        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            transition: color 0.3s ease;
        }
        
        .password-toggle:hover {
            color: #fb7d47;
        }
        
        .eye-icon {
            width: 20px;
            height: 20px;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: rgba(0, 212, 255, 0.4);
            background: rgba(0, 0, 0, 0.4);
            box-shadow: 0 0 0 3px rgba(251, 125, 71, 0.1),
                        0 0 20px rgba(251, 125, 71, 0.15);
        }
        
        .form-group input:hover {
            border-color: rgba(0, 212, 255, 0.25);
            background: rgba(0, 0, 0, 0.35);
        }
        
        /* Prevent autocomplete blue background */
        .form-group input:-webkit-autofill,
        .form-group input:-webkit-autofill:hover,
        .form-group input:-webkit-autofill:focus,
        .form-group input:-webkit-autofill:active {
            -webkit-box-shadow: 0 0 0 30px rgba(10, 10, 10, 0.8) inset !important;
            -webkit-text-fill-color: var(--text-primary) !important;
            border: 2px solid rgba(0, 212, 255, 0.15) !important;
            transition: background-color 5000s ease-in-out 0s;
        }
        
        .auth-form .btn {
            width: 100%;
            margin-top: 8px;
        }
        
        .auth-message {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .auth-message.error {
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid rgba(239, 68, 68, 0.3);
            color: #FCA5A5;
        }
        
        .auth-message.success {
            background: rgba(0, 212, 255, 0.1);
            border: 2px solid rgba(0, 212, 255, 0.3);
            color: #fb7d47;
        }
        
        .auth-modal-icon {
            font-size: 64px;
            margin-bottom: 24px;
        }
        
        .auth-modal h2 {
            font-size: 28px;
            font-weight: 800;
            font-family: 'Sora', sans-serif;
            margin-bottom: 16px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .auth-modal p {
            color: var(--text-secondary);
            margin-bottom: 32px;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .auth-modal-buttons {
            display: flex;
            gap: 16px;
            justify-content: center;
        }
        
        .auth-modal-buttons .btn {
            padding: 14px 32px;
            font-size: 15px;
            border-radius: 50px;
        }
        
        .auth-modal-buttons .btn-secondary {
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.3);
            color: #ffffff;
        }
        
        .auth-modal-buttons .btn-secondary:hover {
            border-color: rgba(10, 10, 10, 0.95);
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.15),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 0 25px rgba(251, 125, 71, 0.4);
        }

        .cart-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 20000;
            display: none;
            align-items: center;
            justify-content: flex-end;
        }
        
        .cart-modal.active {
            display: flex;
        }
        
        .cart-modal-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(8px);
        }
        
        .cart-modal-content {
            position: relative;
            width: 500px;
            max-width: 90vw;
            height: 100vh;
            background: rgba(10, 10, 10, 0.95);
            border-left: 2px solid rgba(0, 212, 255, 0.2);
            display: flex;
            flex-direction: column;
            animation: slideIn 0.3s ease;
            box-shadow: 
                -4px 0 24px rgba(0, 0, 0, 0.4),
                inset 1px 0 1px rgba(0, 212, 255, 0.1),
                -20px 0 40px rgba(0, 212, 255, 0.05);
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        .cart-header {
            padding: 24px;
            border-bottom: 2px solid rgba(0, 212, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .cart-header h2 {
            font-size: 24px;
            font-weight: 800;
            font-family: 'Sora', sans-serif;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .cart-close {
            width: 40px;
            height: 40px;
            border: none;
            background: rgba(0, 212, 255, 0.1);
            color: var(--text-primary);
            font-size: 24px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .cart-close:hover {
            background: rgba(0, 212, 255, 0.2);
            transform: rotate(90deg);
        }
        
        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }
        
        .cart-item {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(0, 212, 255, 0.15);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            gap: 16px;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .cart-item:hover {
            border-color: rgba(0, 212, 255, 0.3);
            background: rgba(0, 0, 0, 0.35);
        }
        
        .cart-item-checkbox {
            position: absolute;
            top: 12px;
            right: 12px;
        }
        
        .cart-item-checkbox input[type="checkbox"] {
            display: none;
        }
        
        .cart-item-checkbox label {
            display: block;
            width: 24px;
            height: 24px;
            border: 2px solid #fb7d47;
            border-radius: 4px;
            background: rgba(0, 0, 0, 0.4);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .cart-item-checkbox input[type="checkbox"]:checked + label {
            background: linear-gradient(135deg, var(--teal), var(--amber));
        }
        
        .cart-item-checkbox input[type="checkbox"]:checked + label::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 14px;
            font-weight: bold;
        }
        
        .cart-item-image {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .cart-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .cart-item-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .cart-item-title {
            font-weight: 700;
            color: var(--text-primary);
            font-size: 15px;
        }
        
        .cart-item-duration {
            font-size: 13px;
            color: var(--text-muted);
        }
        
        .cart-item-price {
            font-size: 18px;
            font-weight: 800;
            color: #FFFFFF;
        }
        
        .cart-item-price .price-dollar {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .cart-item-remove {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 32px;
            height: 32px;
            border-radius: 6px;
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid rgba(239, 68, 68, 0.3);
            color: #EF4444;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }
        
        .cart-item-remove:hover {
            background: rgba(239, 68, 68, 0.2);
            transform: scale(1.1);
        }
        
        .cart-empty {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-muted);
        }
        
        .cart-empty svg {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            opacity: 0.3;
        }
        
        .cart-footer {
            padding: 24px;
            border-top: 2px solid rgba(0, 212, 255, 0.1);
            display: flex;
            flex-direction: column;
            gap: 12px;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            font-size: 18px;
            font-weight: 700;
        }
        
        .cart-total-price {
            font-size: 28px;
            font-weight: 900;
            color: #FFFFFF;
            font-family: 'Sora', sans-serif;
        }
        
        .cart-total-price .price-dollar {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .icon {
            width: 20px;
            height: 20px;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        /* Pricing Banner */
        .pricing-banner {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            padding: 16px 24px;
            text-align: center;
            font-weight: 700;
            font-size: 18px;
            color: #000000;
            margin-bottom: 60px;
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(251, 125, 71, 0.3);
        }

        .pricing-banner span {
            font-size: 24px;
            margin: 0 8px;
            color: #000000;
        }

        /* Sale Badge */
        /* Buy Now Button */
        .buy-now-btn {
            width: 100%;
            margin-top: 20px;
            padding: 16px;
            background: rgba(16, 185, 129, 0.1);
            border: 2px solid rgba(16, 185, 129, 0.5);
            border-radius: 50px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            font-family: "Sora", sans-serif;
            font-size: 16px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .buy-now-btn:hover {
            background: rgba(16, 185, 129, 0.2);
            border-color: #10B981;
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.7),
                        0 0 60px rgba(16, 185, 129, 0.4);
        }

        .add-to-cart-btn {
            width: 100%;
            margin-top: 12px;
            padding: 14px;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 50px;
            color: #ffffff;
            font-weight: 600;
            cursor: pointer;
            font-family: "Sora", sans-serif;
            font-size: 14px;
            transition: all 0.3s ease, border-color 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            position: relative;
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.1),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 2px 8px rgba(0, 0, 0, 0.2);
            isolation: isolate;
        }

        .add-to-cart-btn:hover {
            border-color: rgba(10, 10, 10, 0.95);
            transform: scale(1.03);
            box-shadow: 
                inset 0 1px 1px rgba(255, 255, 255, 0.15),
                inset 0 -1px 1px rgba(0, 0, 0, 0.1),
                0 0 25px rgba(251, 125, 71, 0.4);
        }

        .card-price {
            font-size: 28px !important;
            font-weight: 800 !important;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: 24px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            border: 2px solid rgba(0, 212, 255, 0.2);
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 24px;
            cursor: pointer;
            z-index: 10;
        }

        .modal-thumbnail {
            width: 100%;
            aspect-ratio: 16/9;
            overflow: hidden;
            border-radius: 24px 24px 0 0;
        }

        .modal-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .modal-body {
            padding: 32px;
        }

        .modal-title {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 16px;
            font-family: "Sora", sans-serif;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .modal-description {
            color: var(--text-secondary);
            margin-bottom: 24px;
            font-size: 16px;
            line-height: 1.8;
        }

        .modal-price {
            font-size: 48px;
            font-weight: 900;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-family: "Sora", sans-serif;
            margin-bottom: 24px;
        }

        .hidden {
            display: none;
        }

        /* 3D Viewer Modal */
        .viewer-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 100000;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .viewer-modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        .viewer-modal {
            position: relative;
            width: 95vw;
            height: 95vh;
            max-width: 1800px;
            background: #000000;
            border-radius: 20px;
            border: 2px solid rgba(13, 76, 89, 0.5);
            overflow: hidden;
            box-shadow: 0 0 60px rgba(13, 76, 89, 0.3);
        }

        .viewer-modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 100001;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: rgba(15, 15, 15, 0.9);
            border: 2px solid rgba(13, 76, 89, 0.5);
            color: #FFFFFF;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .viewer-modal-close:hover {
            background: rgba(13, 76, 89, 0.3);
            border-color: #0d4c59;
            transform: scale(1.1);
        }

        .viewer-modal iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .viewer-3d-btn {
            padding: 12px 28px;
            background: rgba(0, 212, 255, 0.1);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 50px;
            color: #fb7d47;
            font-weight: 600;
            cursor: pointer;
            font-size: 15px;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .viewer-3d-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: #fb7d47;
            box-shadow: 0 0 20px rgba(251, 125, 71, 0.5);
            transform: translateY(-2px);
        }

        .viewer-3d-btn svg {
            width: 18px;
            height: 18px;
        }

        /* Panel Glow Effect - Simple & Performant */
        .panel-glow {
            position: relative;
            overflow: hidden;
        }

        .panel-glow-blob {
            position: absolute;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(251, 125, 71, 0.6) 0%, rgba(255, 107, 107, 0.3) 40%, transparent 70%);
            border-radius: 50%;
            filter: blur(40px);
            pointer-events: none;
            z-index: 0;
            opacity: 0;
            transition: opacity 0.3s ease;
            transform: translate(-50%, -50%);
        }

        .panel-glow:hover .panel-glow-blob {
            opacity: 1;
        }

        .panel-glow > *:not(.panel-glow-blob) {
            position: relative;
            z-index: 1;
        }

        /* Blog Section Styles */
        .blog-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 32px;
        }

        .blog-card {
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.15);
            border-radius: 20px;
            overflow: hidden;
            text-decoration: none;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            display: flex;
            flex-direction: column;
        }

        .blog-card:hover {
            border-color: #fb7d47;
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4),
                        0 0 30px rgba(251, 125, 71, 0.15);
        }

        .blog-card-image {
            position: relative;
            height: 200px;
            background: linear-gradient(135deg, rgba(15, 15, 15, 1) 0%, rgba(25, 25, 25, 1) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .blog-card-image-placeholder {
            opacity: 0.6;
            transition: all 0.4s ease;
        }

        .blog-card:hover .blog-card-image-placeholder {
            opacity: 1;
            transform: scale(1.1);
        }

        .blog-card-category {
            position: absolute;
            top: 16px;
            left: 16px;
            background: rgba(10, 10, 10, 0.95);
            color: #fb7d47;
            font-size: 11px;
            font-weight: 700;
            padding: 6px 14px;
            border-radius: 50px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-family: 'DM Sans', sans-serif;
            border: 1px solid rgba(251, 125, 71, 0.3);
        }

        .blog-card-content {
            padding: 24px;
            display: flex;
            flex-direction: column;
            flex: 1;
        }

        .blog-card-meta {
            display: flex;
            gap: 16px;
            margin-bottom: 12px;
            font-size: 13px;
            color: var(--text-muted);
            font-family: 'DM Sans', sans-serif;
        }

        .blog-card-meta span {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .blog-card-meta svg {
            opacity: 0.6;
        }

        .blog-card-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-white);
            font-family: 'Sora', sans-serif;
            line-height: 1.4;
            margin-bottom: 12px;
            transition: color 0.3s ease;
        }

        .blog-card:hover .blog-card-title {
            background: linear-gradient(135deg, #fb7d47, #FF6B6B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .blog-card-excerpt {
            font-size: 15px;
            color: var(--text-secondary);
            font-family: 'DM Sans', sans-serif;
            line-height: 1.6;
            margin-bottom: 20px;
            flex: 1;
        }

        .blog-card-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #fb7d47;
            font-size: 14px;
            font-weight: 600;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
        }

        .blog-card-link svg {
            transition: transform 0.3s ease;
        }

        .blog-card:hover .blog-card-link svg {
            transform: translateX(4px);
        }

        @media (max-width: 1024px) {
            .blog-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .blog-grid {
                grid-template-columns: 1fr;
                gap: 24px;
            }

            .blog-card-title {
                font-size: 18px;
            }

            .blog-card-image {
                height: 180px;
            }
        }
    </style>
    
    <!-- Structured Data (JSON-LD) for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "MocapWork",
      "url": "https://goldstargamingtv-droid.github.io/mocap/",
      "description": "Professional motion capture animation marketplace for game developers, filmmakers, and 3D artists",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://goldstargamingtv-droid.github.io/mocap/?search={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Store",
      "name": "MocapWork",
      "description": "Buy professional motion capture animations for Unreal Engine, Unity, Blender, and more",
      "url": "https://goldstargamingtv-droid.github.io/mocap/",
      "priceRange": "Starting at $1",
      "paymentAccepted": "Credit Card, Stripe",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "US"
      }
    }
    </script>
    
    <!-- GSAP Animation Library -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
</head>
<body>
    <!-- Loading Progress Bar -->
    <div id="loadingBar" style="position: fixed; top: 0; left: 0; width: 0; height: 3px; background: linear-gradient(90deg, var(--teal), var(--amber)); z-index: 99999; transition: width 0.3s ease;"></div>
    
    <!-- Loading Progress Bar for Auth -->
    <div id="authLoadingBar" style="position: fixed; top: 0; left: 0; width: 0; height: 3px; background: linear-gradient(90deg, #F59E0B, #FF6B6B); z-index: 99999; transition: width 0.3s ease; display: none;"></div>

    <!-- 3D Viewer Modal -->
    <div class="viewer-modal-overlay" id="viewer3dModal">
        <div class="viewer-modal">
            <button class="viewer-modal-close" onclick="close3DViewer()" aria-label="Close 3D Viewer"></button>
            <iframe id="viewer3dFrame" src="" allow="fullscreen"></iframe>
        </div>
    </div>
    
    <!-- Start loading bar immediately -->
    <script>
        // Start the loading bar as soon as this script runs (before page fully loads)
        const loadingBar = document.getElementById('loadingBar');
        
        // Immediately start at 10%
        loadingBar.style.width = '10%';
        
        // Progress to 30% over next 200ms
        setTimeout(() => {
            loadingBar.style.width = '30%';
        }, 200);
        
        // Slowly creep to 50% while waiting for page to load
        setTimeout(() => {
            loadingBar.style.width = '50%';
        }, 600);
    </script>
    
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Grain Overlay -->
    <div class="grain"></div>

    <!-- Navbar -->
    <nav class="navbar" id="navbar">
        <div class="navbar-container">
            <!-- Logo -->
            <a href="#" class="logo">
                <div class="logo-icon"></div>
                <span class="logo-text font-sora">
                    Mocap<span>Work</span>
                </span>
            </a>

            <!-- Animations Dropdown (left of search) -->
            <div class="nav-links-left">
                <div class="nav-dropdown-wrapper">
                    <a href="#library" class="nav-link">
                        Animations
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </a>
                    <div class="nav-dropdown">
                        <div class="nav-dropdown-title">Browse Categories</div>
                        <a href="#library" class="nav-dropdown-item" onclick="selectCategory('All')">
                            <div class="nav-dropdown-item-icon"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"/><line x1="7" y1="2" x2="7" y2="22"/><line x1="17" y1="2" x2="17" y2="22"/><line x1="2" y1="12" x2="22" y2="12"/><line x1="2" y1="7" x2="7" y2="7"/><line x1="2" y1="17" x2="7" y2="17"/><line x1="17" y1="17" x2="22" y2="17"/><line x1="17" y1="7" x2="22" y2="7"/></svg></div>
                            <div class="nav-dropdown-item-text">
                                All Animations
                                <div class="nav-dropdown-item-label">Browse everything</div>
                            </div>
                        </a>
                        <a href="#library" class="nav-dropdown-item" onclick="selectCategory('Combat')">
                            <div class="nav-dropdown-item-icon"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 17.5L3 6V3h3l11.5 11.5"/><path d="M13 19l6-6"/><path d="M16 16l4 4"/><path d="M19 21l2-2"/></svg></div>
                            <div class="nav-dropdown-item-text">
                                Combat
                                <div class="nav-dropdown-item-label">Fighting & action</div>
                            </div>
                        </a>
                        <a href="#library" class="nav-dropdown-item" onclick="selectCategory('Locomotion')">
                            <div class="nav-dropdown-item-icon"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="17" cy="4" r="2"/><path d="M15.5 21l-3-6.5-4 3V21"/><path d="M8 14l4-3 2.5 3.5"/><path d="M12 11l-3-2.5-3 3.5"/></svg></div>
                            <div class="nav-dropdown-item-text">
                                Locomotion
                                <div class="nav-dropdown-item-label">Walking, running & movement</div>
                            </div>
                        </a>
                        <a href="#library" class="nav-dropdown-item" onclick="selectCategory('Dance')">
                            <div class="nav-dropdown-item-icon"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="5.5" cy="17.5" r="2.5"/><circle cx="17.5" cy="15.5" r="2.5"/><path d="M8 17V5l12-2v12"/></svg></div>
                            <div class="nav-dropdown-item-text">
                                Dance
                                <div class="nav-dropdown-item-label">Dance moves & routines</div>
                            </div>
                        </a>
                        <a href="#library" class="nav-dropdown-item" onclick="selectCategory('Idle')">
                            <div class="nav-dropdown-item-icon"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg></div>
                            <div class="nav-dropdown-item-text">
                                Idle
                                <div class="nav-dropdown-item-label">Standing & breathing</div>
                            </div>
                        </a>
                        <a href="#library" class="nav-dropdown-item" onclick="selectCategory('Emotes')">
                            <div class="nav-dropdown-item-icon"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></svg></div>
                            <div class="nav-dropdown-item-text">
                                Emotes
                                <div class="nav-dropdown-item-label">Expressions & gestures</div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Search Bar -->
            <div class="nav-search">
                <span class="search-icon-nav"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg></span>
                <input 
                    type="text" 
                    class="search-input-nav" 
                    id="searchInputNav" 
                    placeholder="Search animations..."
                    autocomplete="off"
                >
                <button class="search-clear-nav" id="searchClearNav" onclick="clearSearchNav()"></button>
                
                <div class="search-dropdown-nav" id="searchDropdownNav">
                    <!-- Results populated here -->
                </div>
            </div>

            <!-- Nav Links (right of search) -->
            <div class="nav-links-right">
                <a href="dashboard.html" onclick="handleDashboardClick(event); return false;" class="nav-link">My Library</a>
                <a href="#contact" class="nav-link">Contact</a>
                <a href="#blog" class="nav-link">Blog</a>
                <a href="#faq" class="nav-link">FAQ</a>
            </div>

            <!-- Right Side Actions -->
            <div class="nav-right">
                <!-- Admin Dashboard Button (only for admins) -->
                <a href="admin-dashboard.html" id="adminDashboardBtn" class="btn-admin" style="display: none;" title="Admin Dashboard">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right: 6px;">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    Admin
                </a>
                
                <!-- Cart Icon -->
                <div class="cart-container">
                    <div class="cart-icon" id="cartIconNav" onclick="openCart()" title="View Cart" role="button" aria-label="Shopping cart with 0 items" tabindex="0">
                        <svg class="cart-svg" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <linearGradient id="cartGradientNav" x1="0%" y1="0%" x2="100%" y2="100%" class="cart__gradient">
                                    <stop offset="0%" />
                                    <stop offset="100%" />
                                </linearGradient>
                            </defs>
                            <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="8">
                                <g class="cart__track">
                                    <polyline points="4,4 21,4 26,22 124,22 112,64 35,64 39,80 106,80" />
                                    <circle cx="43" cy="111" r="13" />
                                    <circle cx="102" cy="111" r="13" />
                                </g>
                                <g class="cart__lines">
                                    <polyline class="cart__top" points="4,4 21,4 26,22 124,22 112,64 35,64 39,80 106,80" />
                                    <g class="cart__wheel1">
                                        <circle class="cart__wheel-stroke" cx="43" cy="111" r="13" />
                                    </g>
                                    <g class="cart__wheel2">
                                        <circle class="cart__wheel-stroke" cx="102" cy="111" r="13" />
                                    </g>
                                </g>
                            </g>
                        </svg>
                        <span class="cart-badge" data-count="0">0</span>
                    </div>
                </div>
                
                <!-- Auth Links (not logged in) -->
                <div id="authLinks">
                    <a href="#" onclick="showAuthModal('login'); return false;" class="btn-login">
                        <svg viewBox="0 0 24 24">
                            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
                            <polyline points="10 17 15 12 10 7"/>
                            <line x1="15" y1="12" x2="3" y2="12"/>
                        </svg>
                        Sign In
                    </a>
                </div>
                
                <!-- Profile Icon (logged in) -->
                <div id="profileIcon" style="display: none;">
                    <div class="profile-container">
                        <div class="profile-icon" title="My Account">
                            <svg viewBox="0 0 24 24">
                                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                            </svg>
                        </div>
                        <div class="profile-dropdown">
                            <div class="profile-dropdown-title">Account</div>
                            <a href="dashboard.html" class="profile-dropdown-item">
                                <div class="profile-dropdown-item-icon">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                                    </svg>
                                </div>
                                <span>My Library</span>
                            </a>
                            <a href="dashboard.html#favorites" class="profile-dropdown-item">
                                <div class="profile-dropdown-item-icon">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                    </svg>
                                </div>
                                <span>Wishlist</span>
                            </a>
                            <a href="dashboard.html#purchaseHistory" class="profile-dropdown-item">
                                <div class="profile-dropdown-item-icon">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                                    </svg>
                                </div>
                                <span>Purchases</span>
                            </a>
                            <a href="dashboard.html#downloads" class="profile-dropdown-item">
                                <div class="profile-dropdown-item-icon">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                                    </svg>
                                </div>
                                <span>Downloads</span>
                            </a>
                            <a href="dashboard.html#settings" class="profile-dropdown-item">
                                <div class="profile-dropdown-item-icon">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
                                    </svg>
                                </div>
                                <span>Settings</span>
                            </a>
                            <div class="profile-dropdown-divider"></div>
                            <a href="#" onclick="event.stopPropagation(); logout(); return false;" class="profile-dropdown-item signout-item">
                                <div class="profile-dropdown-item-icon">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                                    </svg>
                                </div>
                                <span>Sign Out</span>
                            </a>
                        </div>
                    </div>
                </div>
                
            </div>

            <!-- Mobile Menu -->
            <button class="hamburger-menu" aria-label="Toggle navigation menu" aria-expanded="false"><svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button>
            
            <ul class="nav-links">
                <button class="mobile-menu-close" onclick="toggleMobileMenu()"></button>
                
                <!-- Mobile Search -->
                <li style="padding: 20px; border-bottom: 2px solid rgba(0, 212, 255, 0.1);">
                    <div style="position: relative;" id="mobileSearchWrapper">
                        <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); opacity: 0.6;"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg></span>
                        <input 
                            type="text" 
                            id="mobileSearch"
                            placeholder="Search animations..."
                            style="width: 100%; padding: 10px 10px 10px 40px; background: rgba(10, 10, 10, 0.5); backdrop-filter: blur(20px) saturate(180%); -webkit-backdrop-filter: blur(20px) saturate(180%); border: 2px solid rgba(0, 212, 255, 0.2); border-radius: 20px; color: white; font-family: 'DM Sans', sans-serif; font-size: 14px;"
                        >
                        <div class="search-dropdown-mobile" id="searchDropdownMobile" style="display: none; position: absolute; top: calc(100% + 8px); left: 0; right: 0; background: rgba(10, 10, 10, 0.5); backdrop-filter: blur(20px) saturate(180%); -webkit-backdrop-filter: blur(20px) saturate(180%); border: 2px solid rgba(0, 212, 255, 0.2); border-radius: 12px; max-height: 300px; overflow-y: auto; box-shadow: 0 4px 24px rgba(0, 0, 0, 0.4); z-index: 10000;">
                            <!-- Results populated here -->
                        </div>
                    </div>
                </li>
                
                <li><a href="#library" onclick="toggleMobileMenu()">Animations</a></li>
                <li><a href="dashboard.html" onclick="handleDashboardClick(event); toggleMobileMenu()">My Library</a></li>
                <li><a href="#contact" onclick="toggleMobileMenu()">Contact</a></li>
                <li><a href="#blog" onclick="toggleMobileMenu()">Blog</a></li>
                <li><a href="#faq" onclick="toggleMobileMenu()">FAQ</a></li>
                <li id="mobileAuthLink"><a href="#" onclick="showAuthModal('login'); toggleMobileMenu(); return false;">Sign In</a></li>
            </ul>
        </div>
    </nav>

    <!-- Transparent Sticky Selection Bar -->
    <div class="selection-bar" id="selectionBar">
        <button class="selection-bar-btn selection-bar-btn-primary" onclick="addSelectedToCart()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            Add <span class="selection-count-badge" id="selectionCountBadge">0</span> to Cart
        </button>
        <button class="selection-bar-btn selection-bar-btn-secondary" onclick="clearSelection()">
            Clear Selection
        </button>
    </div>

    <!-- Sticky Browse Library Button -->
    <a href="#library" class="btn-cta sticky-browse-btn" id="stickyBrowseBtn">
        <svg viewBox="0 0 24 24">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
        </svg>
        Browse Library
    </a>

    <!-- Auth Modal (Login/Signup) -->
    <div id="authModal" class="auth-modal">
        <div class="auth-modal-overlay" onclick="closeAuthModal()"></div>
        <div class="auth-modal-box">
            
            <!-- Tabs -->
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchAuthTab('login')">Sign In</button>
                <button class="auth-tab" onclick="switchAuthTab('signup')">Create Account</button>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="auth-form active">
                <h2>Welcome Back</h2>
                <p class="auth-subtitle">Sign in to access your motion capture library</p>
                
                <div id="loginMessage"></div>
                
                <form onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" placeholder="you@example.com" required aria-required="true">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <div class="password-input-wrapper">
                            <input type="password" id="loginPassword" placeholder="" required aria-required="true">
                            <button type="button" class="password-toggle" onclick="togglePassword('loginPassword', this)" aria-label="Toggle password visibility">
                                <svg class="eye-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary" id="loginBtn">Sign In</button>
                </form>
                <div style="text-align: center; margin-top: 20px;">
                    <a href="#" onclick="closeAuthModal(); return false;" style="color: var(--text-muted); text-decoration: none; font-size: 14px;">Close</a>
                </div>
            </div>

            <!-- Signup Form -->
            <div id="signupForm" class="auth-form">
                <h2>Create Account</h2>
                <p class="auth-subtitle">Join MocapWork to access premium animations</p>
                
                <div id="signupMessage"></div>
                
                <form onsubmit="handleSignup(event)">
                    <div class="form-group">
                        <label for="signupEmail">Email</label>
                        <input type="email" id="signupEmail" placeholder="you@example.com" required aria-required="true">
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">Password</label>
                        <div class="password-input-wrapper">
                            <input type="password" id="signupPassword" placeholder="" minlength="6" required aria-required="true">
                            <button type="button" class="password-toggle" onclick="togglePassword('signupPassword', this)">
                                <svg class="eye-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="signupConfirmPassword">Confirm Password</label>
                        <div class="password-input-wrapper">
                            <input type="password" id="signupConfirmPassword" placeholder="" minlength="6" required aria-required="true">
                            <button type="button" class="password-toggle" onclick="togglePassword('signupConfirmPassword', this)">
                                <svg class="eye-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary" id="signupBtn">Create Account</button>
                </form>
                <div style="text-align: center; margin-top: 20px;">
                    <a href="#" onclick="closeAuthModal(); return false;" style="color: var(--text-muted); text-decoration: none; font-size: 14px;">Close</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Required Modal (Keep for My Library click) -->
    <div id="authRequiredModal" class="auth-modal">
        <div class="auth-modal-overlay" onclick="closeAuthRequiredModal()"></div>
        <div class="auth-modal-content">
            <div class="auth-modal-icon"><svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg></div>
            <h2>Sign In Required</h2>
            <p>Please sign in or create an account to start collecting animations and view your library.</p>
            <div class="auth-modal-buttons">
                <button onclick="showAuthModal('login')" class="btn btn-primary">Sign In</button>
                <button onclick="showAuthModal('signup')" class="btn btn-secondary">Create Account</button>
            </div>
            <br>
            <a href="#" onclick="closeAuthRequiredModal(event)" style="color: var(--text-muted); text-decoration: none; font-size: 14px;">Close</a>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cartModal" class="cart-modal">
        <div class="cart-modal-overlay" onclick="closeCart()"></div>
        <div class="cart-modal-content">
            <div class="cart-header">
                <h2>Shopping Cart</h2>
                <button class="cart-close" onclick="closeCart()"></button>
            </div>
            
            <div class="cart-items" id="cartItems">
                <!-- Cart items will be dynamically inserted -->
            </div>
            
            <div class="cart-footer">
                <div class="cart-total">
                    <span>Total:</span>
                    <span class="cart-total-price">$0.00</span>
                </div>
                <button class="btn btn-primary" onclick="proceedToCheckout()">
                    Proceed to Checkout
                </button>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <main id="main-content">
    <section class="hero">
        <div class="hero-background">
            <div class="hero-static-bg"></div>
            <div class="floating-shape shape-1"></div>
            <div class="floating-shape shape-2"></div>
        </div>

        <div class="hero-content">
            <!-- Hero Preview Carousel - 3D Rotating -->
            <div class="hero-preview-carousel">
                <div class="carousel-wrapper">
                    <!-- Left Arrow -->
                    <button class="carousel-arrow carousel-arrow-left" id="carouselPrev">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="15,18 9,12 15,6"></polyline>
                        </svg>
                    </button>

                    <div class="carousel-container">
                        <div class="carousel-track" id="carouselTrack">
                            <!-- Item 1 -->
                            <div class="carousel-item" data-index="0">
                                <div class="carousel-item-content">
                                    <div class="carousel-placeholder">
                                        <div class="carousel-placeholder-icon"><svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="17" cy="4" r="2"/><path d="M15.5 21l-3-6.5-4 3V21"/><path d="M8 14l4-3 2.5 3.5"/><path d="M12 11l-3-2.5-3 3.5"/></svg></div>
                                        <div class="carousel-placeholder-text">Running Pack</div>
                                        <div class="carousel-placeholder-subtext">12 animations</div>
                                    </div>
                                </div>
                                <div class="carousel-overlay">
                                    <div class="carousel-overlay-text">Motion Capture</div>
                                </div>
                            </div>

                            <!-- Item 2 -->
                            <div class="carousel-item" data-index="1">
                                <div class="carousel-item-content">
                                    <div class="carousel-placeholder">
                                        <div class="carousel-placeholder-icon"><svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 17.5L3 6V3h3l11.5 11.5"/><path d="M13 19l6-6"/><path d="M16 16l4 4"/><path d="M19 21l2-2"/></svg></div>
                                        <div class="carousel-placeholder-text">Combat Pack</div>
                                        <div class="carousel-placeholder-subtext">24 animations</div>
                                    </div>
                                </div>
                                <div class="carousel-overlay">
                                    <div class="carousel-overlay-text">Motion Capture</div>
                                </div>
                            </div>

                            <!-- Item 3 -->
                            <div class="carousel-item" data-index="2">
                                <div class="carousel-item-content">
                                    <div class="carousel-placeholder">
                                        <div class="carousel-placeholder-icon"><svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="5" r="2"/><path d="M4 17l4-4 4 4 4-4 4 4"/><path d="M12 11v4"/></svg></div>
                                        <div class="carousel-placeholder-text">Acrobatic Pack</div>
                                        <div class="carousel-placeholder-subtext">18 animations</div>
                                    </div>
                                </div>
                                <div class="carousel-overlay">
                                    <div class="carousel-overlay-text">Motion Capture</div>
                                </div>
                            </div>

                            <!-- Item 4 -->
                            <div class="carousel-item" data-index="3">
                                <div class="carousel-item-content">
                                    <div class="carousel-placeholder">
                                        <div class="carousel-placeholder-icon"><svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2v20"/><path d="M2 12h20"/><circle cx="12" cy="12" r="4"/><path d="M4.93 4.93l4.24 4.24"/><path d="M14.83 14.83l4.24 4.24"/></svg></div>
                                        <div class="carousel-placeholder-text">Climbing Pack</div>
                                        <div class="carousel-placeholder-subtext">16 animations</div>
                                    </div>
                                </div>
                                <div class="carousel-overlay">
                                    <div class="carousel-overlay-text">Motion Capture</div>
                                </div>
                            </div>

                            <!-- Item 5 -->
                            <div class="carousel-item" data-index="4">
                                <div class="carousel-item-content">
                                    <div class="carousel-placeholder">
                                        <div class="carousel-placeholder-icon"><svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg></div>
                                        <div class="carousel-placeholder-text">Sports Pack</div>
                                        <div class="carousel-placeholder-subtext">20 animations</div>
                                    </div>
                                </div>
                                <div class="carousel-overlay">
                                    <div class="carousel-overlay-text">Motion Capture</div>
                                </div>
                            </div>

                            <!-- Item 6 -->
                            <div class="carousel-item" data-index="5">
                                <div class="carousel-item-content">
                                    <div class="carousel-placeholder">
                                        <div class="carousel-placeholder-icon"><svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="5.5" cy="17.5" r="2.5"/><circle cx="17.5" cy="15.5" r="2.5"/><path d="M8 17V5l12-2v12"/></svg></div>
                                        <div class="carousel-placeholder-text">Dance Pack</div>
                                        <div class="carousel-placeholder-subtext">15 animations</div>
                                    </div>
                                </div>
                                <div class="carousel-overlay">
                                    <div class="carousel-overlay-text">Motion Capture</div>
                                </div>
                            </div>

                            <!-- Item 7 -->
                            <div class="carousel-item" data-index="6">
                                <div class="carousel-item-content">
                                    <div class="carousel-placeholder">
                                        <div class="carousel-placeholder-icon"><svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg></div>
                                        <div class="carousel-placeholder-text">Idle Pack</div>
                                        <div class="carousel-placeholder-subtext">10 animations</div>
                                    </div>
                                </div>
                                <div class="carousel-overlay">
                                    <div class="carousel-overlay-text">Motion Capture</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Arrow -->
                    <button class="carousel-arrow carousel-arrow-right" id="carouselNext">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9,18 15,12 9,6"></polyline>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="hero-badge">
                <div class="badge-dot"><svg viewBox="0 0 24 24"><path d="M12 0l2.5 7.5L22 10l-7.5 2.5L12 20l-2.5-7.5L2 10l7.5-2.5z"/></svg></div>
                Premium Motion Capture Library
            </div>
            
            <!-- Trust Badge (moved under hero badge) -->
            <h1 class="hero-title font-sora">
                <span style="color: var(--text-white);">Professional</span> <span class="gradient-text animated-gradient">Motion</span><br>
                <span class="gradient-text animated-gradient">Capture</span> <span style="color: var(--text-white);">Animations</span>
            </h1>
            
            <!-- Trust Badge -->
            <div class="trust-badge" style="pointer-events: none;">
                <svg viewBox="0 0 24 24" fill="none" style="width: 16px; height: 16px; margin-right: 6px;">
                    <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="currentColor"/>
                </svg>
                <span style="font-weight: 600;">100+ Professional Animations</span>
                <span style="margin: 0 8px; opacity: 0.5;"></span>
                <span>Instant download with <span style="color: var(--amber); font-weight: 600;">royalty-free</span> licenses</span>
            </div>
            
            <!-- 3-Step Process -->
            <div class="hero-steps">
                <div class="hero-step">
                    <div class="hero-step-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="M21 21l-4.35-4.35"/>
                        </svg>
                    </div>
                    <div class="hero-step-content">
                        <div class="hero-step-number">01</div>
                        <div class="hero-step-title">Browse</div>
                        <div class="hero-step-desc">Game dev, film & virtual production</div>
                    </div>
                </div>
                <div class="hero-step-connector">
                    <svg viewBox="0 0 24 24" fill="none" stroke="rgba(0, 212, 255, 0.3)" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </div>
                <div class="hero-step">
                    <div class="hero-step-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                            <line x1="1" y1="10" x2="23" y2="10"/>
                        </svg>
                    </div>
                    <div class="hero-step-content">
                        <div class="hero-step-number">02</div>
                        <div class="hero-step-title">Purchase</div>
                        <div class="hero-step-desc">Premium motion capture assets</div>
                    </div>
                </div>
                <div class="hero-step-connector">
                    <svg viewBox="0 0 24 24" fill="none" stroke="rgba(0, 212, 255, 0.3)" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </div>
                <div class="hero-step">
                    <div class="hero-step-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                    </div>
                    <div class="hero-step-content">
                        <div class="hero-step-number">03</div>
                        <div class="hero-step-title">Download</div>
                        <div class="hero-step-desc">Unreal, Unity, Blender & more</div>
                    </div>
                </div>
            </div>
            
            <!-- SEO Keywords (visually hidden) -->
            <p class="visually-hidden">Buy premium motion capture animations for game development, film, and virtual production. Professional mocap for Unreal Engine, Unity, Blender, and all major 3D software.</p>
            
            <!-- Platform Logos -->
            <div class="platform-logos">
                <img src="unreal-white.svg" alt="Unreal Engine" class="platform-logo">
                <img src="unity-white.svg" alt="Unity" class="platform-logo">
                <img src="blender-white.svg" alt="Blender" class="platform-logo">
            </div>
            
            <div class="hero-buttons">
                <a href="#library" class="btn-cta">
                    <svg viewBox="0 0 24 24">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                    </svg>
                    Browse Library
                </a>
                <a href="#" onclick="showAuthModal('signup'); return false;" class="btn-cta">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                    Get Started Free
                </a>
            </div>
            
            <!-- CTA Strip Banner -->
            <div class="cta-strip-banner panel-glow" style="margin: 24px auto 4px; border-radius: 16px; max-width: 1400px; width: calc(100% - 40px);">
                <div class="panel-glow-blob"></div>
                <div class="cta-strip-content">
                    <div class="cta-strip-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="cta-animated-icon">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                        </svg>
                    </div>
                    <div class="cta-strip-text">
                        <strong>Secure</strong> Checkout
                    </div>
                    <span class="cta-strip-divider"></span>
                    <div class="cta-strip-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="cta-animated-icon">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7,10 12,15 17,10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                    </div>
                    <div class="cta-strip-text">
                        <strong>Instant</strong> Download
                    </div>
                    <span class="cta-strip-divider"></span>
                    <div class="cta-strip-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="cta-animated-icon">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                            <line x1="9" y1="9" x2="9.01" y2="9"/>
                            <line x1="15" y1="9" x2="15.01" y2="9"/>
                        </svg>
                    </div>
                    <div class="cta-strip-text">
                        <strong>100%</strong> Satisfaction
                    </div>
                    <span class="cta-strip-divider"></span>
                    <div class="cta-strip-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="cta-animated-icon">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                    </div>
                    <div class="cta-strip-text">
                        <strong>Royalty-Free</strong> License
                    </div>
                    <span class="cta-strip-divider"></span>
                    <div class="cta-strip-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="cta-animated-icon">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                            <polyline points="22,4 12,14.01 9,11.01"/>
                        </svg>
                    </div>
                    <div class="cta-strip-text">
                        <strong>Professional</strong> Quality
                    </div>
                </div>
            </div>

        </div>
    </section>

    <!-- Library Section -->
    <section id="library" class="library-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title font-sora">
                    Explore Our <span class="gradient-text animated-gradient">Animation Library</span>
                </h2>
            </div>

            <!-- Premium Teaser Banner -->
            <div class="premium-banner panel-glow">
                <div class="panel-glow-blob"></div>
                <div style="margin-bottom: 4px; font-size: 14px; font-weight: 700; background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; position: relative; z-index: 1; display: inline-flex; align-items: center; gap: 6px;"><svg viewBox="0 0 24 24" width="16" height="16" fill="#fb7d47" stroke="none"><path d="M12 23c-3.866 0-7-3.134-7-7 0-2.526 1.394-4.727 3.453-5.882-.07.463-.107.943-.107 1.432 0 2.485 1.349 4.656 3.354 5.822-.696-.772-1.121-1.795-1.121-2.922 0-2.209 1.672-4.013 3.82-4.245.138-.015.277-.023.417-.023 1.115 0 2.133.44 2.884 1.16A6.968 6.968 0 0 1 19 16c0 3.866-3.134 7-7 7zM12 1c.552 0 1 .448 1 1v2c0 .552-.448 1-1 1s-1-.448-1-1V2c0-.552.448-1 1-1z"/></svg> Limited Time: New animations added weekly!</div>
                <div class="premium-banner-text"><svg viewBox="0 0 24 24" width="14" height="14" fill="#fb7d47" stroke="none" style="display: inline; vertical-align: middle; margin-right: 4px;"><path d="M12 0l2.5 7.5L22 10l-7.5 2.5L12 20l-2.5-7.5L2 10l7.5-2.5z"/></svg>Premium Animations from $1  Instant Download  Royalty-Free Forever<br><span style="color: #fb7d47; font-weight: 700; display: inline-flex; align-items: center; gap: 4px;"><svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline;"><polyline points="20 6 9 17 4 12"/></svg>No Subscription</span></div>
            </div>

            <!-- Ultra-Premium Filters Card -->
            <div class="filters-card panel-glow">
                <div class="panel-glow-blob"></div>
                <!-- Luxe Search Bar -->
                <div class="search-box">
                    <span class="search-icon"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg></span>
                    <input type="text" id="searchInput" class="search-input" placeholder="Search animations by name, style, or motion...">
                    <span class="search-floating-label">Search Library</span>
                    <div class="search-dropdown-library" id="searchDropdownLibrary" style="display: none;">
                        <!-- Results populated here -->
                    </div>
                </div>

                <!-- Premium Dropdown Filters -->
                <div class="filters-grid">
                    <!-- Category Custom Dropdown -->
                    <div class="filter-group">
                        <label>Category</label>
                        <button class="custom-dropdown-btn" data-dropdown="category">
                            <span class="dropdown-selected-text">All Categories</span>
                            <svg class="dropdown-arrow" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 9L1 4h10z" fill="#00D4FF"/>
                            </svg>
                        </button>
                        <div class="custom-dropdown-menu" data-dropdown-menu="category">
                            <button class="dropdown-pill-option selected" data-value="All">All Categories</button>
                            <button class="dropdown-pill-option" data-value="Combat">Combat</button>
                            <button class="dropdown-pill-option" data-value="Locomotion">Locomotion</button>
                            <button class="dropdown-pill-option" data-value="Dance">Dance</button>
                            <button class="dropdown-pill-option" data-value="Idle">Idle</button>
                            <button class="dropdown-pill-option" data-value="Emotes">Emotes</button>
                        </div>
                        <select id="categoryFilter" class="filter-select">
                            <option value="All">All Categories</option>
                            <option value="Combat">Combat</option>
                            <option value="Locomotion">Locomotion</option>
                            <option value="Dance">Dance</option>
                            <option value="Idle">Idle</option>
                            <option value="Emotes">Emotes</option>
                        </select>
                    </div>

                    <!-- Gender Custom Dropdown -->
                    <div class="filter-group">
                        <label>Gender</label>
                        <button class="custom-dropdown-btn" data-dropdown="gender">
                            <span class="dropdown-selected-text">All</span>
                            <svg class="dropdown-arrow" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 9L1 4h10z" fill="#00D4FF"/>
                            </svg>
                        </button>
                        <div class="custom-dropdown-menu" data-dropdown-menu="gender">
                            <button class="dropdown-pill-option selected" data-value="All">All</button>
                            <button class="dropdown-pill-option" data-value="Male">Male</button>
                            <button class="dropdown-pill-option" data-value="Female">Female</button>
                            <button class="dropdown-pill-option" data-value="Unisex">Unisex</button>
                        </div>
                        <select id="genderFilter" class="filter-select">
                            <option value="All">All</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Unisex">Unisex</option>
                        </select>
                    </div>

                    <!-- Style Custom Dropdown -->
                    <div class="filter-group">
                        <label>Style</label>
                        <button class="custom-dropdown-btn" data-dropdown="style">
                            <span class="dropdown-selected-text">All Styles</span>
                            <svg class="dropdown-arrow" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 9L1 4h10z" fill="#00D4FF"/>
                            </svg>
                        </button>
                        <div class="custom-dropdown-menu" data-dropdown-menu="style">
                            <button class="dropdown-pill-option selected" data-value="All">All Styles</button>
                            <button class="dropdown-pill-option" data-value="Realistic">Realistic</button>
                            <button class="dropdown-pill-option" data-value="Stylized">Stylized</button>
                        </div>
                        <select id="styleFilter" class="filter-select">
                            <option value="All">All Styles</option>
                            <option value="Realistic">Realistic</option>
                            <option value="Stylized">Stylized</option>
                        </select>
                    </div>

                    <!-- Sort Custom Dropdown -->
                    <div class="filter-group">
                        <label>Sort By</label>
                        <button class="custom-dropdown-btn" data-dropdown="sort">
                            <span class="dropdown-selected-text">Most Popular</span>
                            <svg class="dropdown-arrow" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 9L1 4h10z" fill="#00D4FF"/>
                            </svg>
                        </button>
                        <div class="custom-dropdown-menu" data-dropdown-menu="sort">
                            <button class="dropdown-pill-option selected" data-value="popular">Most Popular</button>
                            <button class="dropdown-pill-option" data-value="newest">Newest First</button>
                            <button class="dropdown-pill-option" data-value="price-low">Price: Low to High</button>
                            <button class="dropdown-pill-option" data-value="price-high">Price: High to Low</button>
                        </div>
                        <select id="sortFilter" class="filter-select">
                            <option value="popular">Most Popular</option>
                            <option value="newest">Newest First</option>
                            <option value="price-low">Price: Low to High</option>
                            <option value="price-high">Price: High to Low</option>
                        </select>
                    </div>
                </div>

                <!-- Results Count with Animation -->
                <div class="results-count" id="resultsCount">Showing <strong>12</strong> of <strong>12</strong> animations</div>
                
                <!-- AI Suggestions Toggle -->
                <div class="ai-suggestions-toggle-container">
                    <span class="ai-badge" style="margin-left: 0; margin-bottom: 4px;">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2z"/>
                            <circle cx="7.5" cy="14.5" r="1.5"/>
                            <circle cx="16.5" cy="14.5" r="1.5"/>
                        </svg>
                        AI Enhanced Search
                    </span>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <label class="ai-toggle-label">
                            <input type="checkbox" id="aiSuggestionsToggle" class="ai-toggle-input">
                            <span class="ai-toggle-slider"></span>
                            <span class="ai-toggle-text">
                                <span class="ai-icon"><svg viewBox="0 0 24 24" width="14" height="14" fill="#fb7d47" stroke="none"><path d="M12 0l2.5 7.5L22 10l-7.5 2.5L12 20l-2.5-7.5L2 10l7.5-2.5z"/></svg></span>
                                Show AI-Powered Recommendations
                            </span>
                        </label>
                        <div class="ai-suggestions-info">
                            <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                                <circle cx="7" cy="7" r="6" stroke="#A8A593" stroke-width="1.5"/>
                                <path d="M7 4V7M7 10H7.01" stroke="#A8A593" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                            <div class="ai-suggestions-tooltip">
                                AI analyzes your browsing history, searches, and purchases to suggest animations tailored to your projects
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Recommendations Banner -->
            <div class="ai-recommendations-banner panel-glow" id="aiRecommendationsBanner">
                <div class="panel-glow-blob"></div>
                <div class="ai-banner-icon"><svg viewBox="0 0 24 24"><path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2z"/><circle cx="7.5" cy="14.5" r="1.5"/><circle cx="16.5" cy="14.5" r="1.5"/></svg></div>
                <div class="ai-banner-content">
                    <div class="ai-banner-title">AI-Powered Recommendations</div>
                    <div class="ai-banner-description" id="aiRecommendationText">Analyzing your preferences...</div>
                    <div class="ai-banner-loading" id="aiLoadingIndicator">
                        <div class="ai-loading-spinner"></div>
                        <span>Generating personalized suggestions...</span>
                    </div>
                </div>
            </div>

            <!-- Animation Grid -->
            <div class="animation-grid" id="animationGrid">
                <!-- Cards will be dynamically inserted here -->
            </div>

            <div class="load-more">
                <button type="button" class="btn-cta" onclick="loadMore(); return false;" id="loadMoreBtn">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 5v14M5 12h14"/>
                    </svg>
                    Load More Animations
                </button>
                <button type="button" class="btn-cta" style="display: none;" onclick="scrollToTop(); return false;" id="backToTopBtn">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 19V5M5 12l7-7 7 7"/>
                    </svg>
                    Back to Top
                </button>
            </div>
        </div>
    </section>

    <!-- Rewards Coming Soon Banner -->
    <div class="rewards-banner panel-glow" style="margin: 20px auto 0; max-width: 1400px; width: calc(100% - 40px); transform: translateY(-30px);">
        <div class="panel-glow-blob"></div>
        <div class="rewards-banner-content">
            <div class="rewards-banner-icon"><svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 12 20 22 4 22 4 12"/><rect x="2" y="7" width="20" height="5"/><line x1="12" y1="22" x2="12" y2="7"/><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"/><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"/></svg></div>
            <div class="rewards-banner-text">
                <h3>MocapWork Rewards Program</h3>
                <p>Earn points on every purchase. Redeem for free animations, exclusive packs & more!</p>
            </div>
        </div>
        <div class="rewards-banner-badge">Coming Soon</div>
    </div>

    <!-- Social Proof Ticker - Full Width -->
    <div class="social-proof-ticker" style="margin-top: 20px;">
        <div class="ticker-track">
            <div class="ticker-item"><span class="ticker-dot"></span> <strong>Instant download</strong> after purchase</div>
            <div class="ticker-item"><span class="ticker-dot"></span> <strong>Royalty-free</strong> forever license</div>
            <div class="ticker-item"><span class="ticker-dot"></span> Works with <strong>Unreal Engine</strong></div>
            <div class="ticker-item"><span class="ticker-dot"></span> Works with <strong>Unity</strong></div>
            <div class="ticker-item"><span class="ticker-dot"></span> Works with <strong>Blender</strong></div>
            <div class="ticker-item"><span class="ticker-dot"></span> <strong>No subscription</strong> required</div>
            <div class="ticker-item"><span class="ticker-dot"></span> <strong>FBX format</strong> included</div>
            <div class="ticker-item"><span class="ticker-dot"></span> <strong>Lifetime access</strong> to purchases</div>
            <div class="ticker-item"><span class="ticker-dot"></span> <strong>Instant download</strong> after purchase</div>
            <div class="ticker-item"><span class="ticker-dot"></span> <strong>Royalty-free</strong> forever license</div>
            <div class="ticker-item"><span class="ticker-dot"></span> Works with <strong>Unreal Engine</strong></div>
            <div class="ticker-item"><span class="ticker-dot"></span> Works with <strong>Unity</strong></div>
            <div class="ticker-item"><span class="ticker-dot"></span> Works with <strong>Blender</strong></div>
            <div class="ticker-item"><span class="ticker-dot"></span> <strong>No subscription</strong> required</div>
            <div class="ticker-item"><span class="ticker-dot"></span> <strong>FBX format</strong> included</div>
            <div class="ticker-item"><span class="ticker-dot"></span> <strong>Lifetime access</strong> to purchases</div>
        </div>
    </div>

    <!-- Features Section -->

    <!-- Can't Find What You Need CTA -->
    <div class="cta-banner panel-glow" style="margin: 60px auto; max-width: 1400px; width: calc(100% - 40px);">
        <div class="panel-glow-blob"></div>
        <div class="cta-banner-content">
            <h3><span style="color: white;">Can't Find the </span><span class="gradient-text animated-gradient">Perfect Animation</span><span style="color: white;">?</span></h3>
            <p>Our professional mocap team can create custom animations tailored to your exact specifications. From unique character movements to specific action sequences.</p>
            <div class="cta-banner-buttons">
                <a href="#contact" class="btn-cta">
                    <svg viewBox="0 0 24 24">
                        <path d="M15.6 11.6L22 7v10l-6.4-4.5v-1zM4 5h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7c0-1.1.9-2 2-2z"/>
                    </svg>
                    Request Custom Animation
                </a>
                <a href="#library" class="btn-cta">
                    <svg viewBox="0 0 24 24">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                    </svg>
                    Browse Library
                </a>
            </div>
        </div>
    </div>

    <!-- Features Section -->
    <section style="background: transparent; padding: 80px 20px; border-top: 2px solid rgba(0, 212, 255, 0.1); position: relative; z-index: 1;">
        <div style="max-width: 1400px; margin: 0 auto;">
            <div style="text-align: center; margin-bottom: 60px;">
                <h2 style="font-size: 42px; font-weight: 900; font-family: 'Sora', sans-serif; margin-bottom: 16px;">
                    <span style="color: white;">Professional</span> <span class="gradient-text animated-gradient">Motion Capture</span> <span style="color: white;">for Every Project</span>
                </h2>
                <p style="color: var(--text-secondary); font-size: 18px; max-width: 700px; margin: 0 auto;">
                    Our motion capture animations are trusted by game developers, filmmakers, and 3D artists worldwide. 
                    Each mocap asset is studio-quality and ready for immediate use in your projects.
                </p>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 32px;">
                <div class="feature-card panel-glow">
                    <div class="panel-glow-blob"></div>
                    <div style="margin-bottom: 16px;"><svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="6" y1="12" x2="10" y2="12"/><line x1="8" y1="10" x2="8" y2="14"/><line x1="15" y1="13" x2="15.01" y2="13"/><line x1="18" y1="11" x2="18.01" y2="11"/><rect x="2" y="6" width="20" height="12" rx="2"/></svg></div>
                    <h3 style="font-size: 22px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px;">Game Development Ready</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Optimized motion capture animations for Unreal Engine and Unity. Perfect for AAA games, indie projects, and everything in between. 
                        All mocap files include standard FBX format for seamless integration.
                    </p>
                    <a href="#library" style="display: inline-block; margin-top: 16px; color: #fb7d47; font-weight: 600; font-size: 14px; text-decoration: none;">Browse Game Animations </a>
                </div>
                
                <div class="feature-card panel-glow">
                    <div class="panel-glow-blob"></div>
                    <div style="margin-bottom: 16px;"><svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"/><line x1="7" y1="2" x2="7" y2="22"/><line x1="17" y1="2" x2="17" y2="22"/><line x1="2" y1="12" x2="22" y2="12"/><line x1="2" y1="7" x2="7" y2="7"/><line x1="2" y1="17" x2="7" y2="17"/><line x1="17" y1="17" x2="22" y2="17"/><line x1="17" y1="7" x2="22" y2="7"/></svg></div>
                    <h3 style="font-size: 22px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px;">Film & Animation</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        High-quality mocap animations for film, TV, and animated content. Compatible with Blender, Maya, 3ds Max, and Cinema 4D. 
                        Professional motion capture data captured in our studio facility.
                    </p>
                    <a href="#library" style="display: inline-block; margin-top: 16px; color: #fb7d47; font-weight: 600; font-size: 14px; text-decoration: none;">Explore Film Assets </a>
                </div>
                
                <div class="feature-card panel-glow">
                    <div class="panel-glow-blob"></div>
                    <div style="margin-bottom: 16px;"><svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg></div>
                    <h3 style="font-size: 22px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px;">Instant Download</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Buy mocap animations and download immediately. No subscription required. 
                        Get lifetime access to your purchased motion capture files with unlimited re-downloads from your dashboard.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Custom Request Section -->
    <section class="custom-request-section" id="contact">
        <div class="request-container">
            <div class="request-content">
                <div class="request-header">
                    <h2 class="section-title font-sora"><span style="color: var(--text-white);">Need Custom</span> <span class="gradient-text animated-gradient">Motion Capture</span><span style="color: var(--text-white);">?</span></h2>
                    <p class="request-subtitle">Can't find what you're looking for? Our team can create bespoke animations tailored to your exact specifications.</p>
                </div>
                
                <form class="request-form panel-glow" id="customRequestForm">
                    <div class="panel-glow-blob"></div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Your Name</label>
                            <input type="text" name="name" placeholder="John Doe" required>
                        </div>
                        <div class="form-group">
                            <label>Email Address</label>
                            <input type="email" name="email" placeholder="john@company.com" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Project Type</label>
                        <div class="filter-group">
                            <button type="button" class="custom-dropdown-btn" data-dropdown="projectType">
                                <span class="dropdown-selected-text">Select a project type</span>
                                <svg class="dropdown-arrow" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M6 9L1 4h10z" fill="#00D4FF"/>
                                </svg>
                            </button>
                            <div class="custom-dropdown-menu" data-dropdown-menu="projectType">
                                <button type="button" class="dropdown-pill-option" data-value="">Select a project type</button>
                                <button type="button" class="dropdown-pill-option" data-value="game">Game Development</button>
                                <button type="button" class="dropdown-pill-option" data-value="film">Film/Animation</button>
                                <button type="button" class="dropdown-pill-option" data-value="vr">VR/AR Experience</button>
                                <button type="button" class="dropdown-pill-option" data-value="training">Training/Simulation</button>
                                <button type="button" class="dropdown-pill-option" data-value="other">Other</button>
                            </div>
                            <input type="hidden" name="projectType" id="projectTypeInput" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Budget Range (Optional)</label>
                        <div class="filter-group">
                            <button type="button" class="custom-dropdown-btn" data-dropdown="budget">
                                <span class="dropdown-selected-text">Select budget range</span>
                                <svg class="dropdown-arrow" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M6 9L1 4h10z" fill="#00D4FF"/>
                                </svg>
                            </button>
                            <div class="custom-dropdown-menu" data-dropdown-menu="budget">
                                <button type="button" class="dropdown-pill-option" data-value="">Select budget range</button>
                                <button type="button" class="dropdown-pill-option" data-value="under-1k">Under $1,000</button>
                                <button type="button" class="dropdown-pill-option" data-value="1k-5k">$1,000 - $5,000</button>
                                <button type="button" class="dropdown-pill-option" data-value="5k-10k">$5,000 - $10,000</button>
                                <button type="button" class="dropdown-pill-option" data-value="10k-25k">$10,000 - $25,000</button>
                                <button type="button" class="dropdown-pill-option" data-value="25k-plus">$25,000+</button>
                            </div>
                            <input type="hidden" name="budget" id="budgetInput">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Describe Your Custom Animation Needs</label>
                        <textarea name="description" rows="5" placeholder="Tell us about the animations you need, including number of animations, style, character details, and timeline..." required></textarea>
                    </div>
                    
                    <button type="submit" class="btn-cta submit-btn" style="width: 100%;">
                        <svg viewBox="0 0 24 24">
                            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                        </svg>
                        <span>Submit Request</span>
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- Blog Section -->
    <section id="blog" style="background: transparent; padding: 100px 20px; position: relative; z-index: 1; border-top: 2px solid rgba(0, 212, 255, 0.1);">
        <div style="max-width: 1200px; margin: 0 auto;">
            <div style="text-align: center; margin-bottom: 60px;">
                <span style="display: inline-block; background: linear-gradient(135deg, rgba(251, 125, 71, 0.2), rgba(255, 107, 107, 0.1)); border: 1px solid rgba(251, 125, 71, 0.3); padding: 8px 20px; border-radius: 50px; font-size: 13px; font-weight: 600; color: #fb7d47; text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 20px; font-family: 'DM Sans', sans-serif;">
                    <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" style="display: inline; vertical-align: middle; margin-right: 6px; margin-top: -2px;">
                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                    </svg>
                    Learn & Create
                </span>
                <h2 style="font-size: 42px; font-weight: 900; font-family: 'Sora', sans-serif; color: var(--text-white); margin-bottom: 16px;">
                    Motion Capture <span style="background: linear-gradient(135deg, #fb7d47, #FF6B6B); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Insights</span>
                </h2>
                <p style="color: var(--text-secondary); font-size: 18px; max-width: 600px; margin: 0 auto; font-family: 'DM Sans', sans-serif;">
                    Tutorials, guides, and industry insights to level up your animation workflow
                </p>
            </div>
            
            <div class="blog-grid">
                <!-- Blog Card 1 -->
                <a href="blog-import-mocap-unreal-engine.html" class="blog-card panel-glow">
                    <div class="panel-glow-blob"></div>
                    <div class="blog-card-image">
                        <div class="blog-card-image-placeholder">
                            <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="1.5">
                                <polygon points="5 3 19 12 5 21 5 3"/>
                            </svg>
                        </div>
                        <div class="blog-card-category">Tutorial</div>
                    </div>
                    <div class="blog-card-content">
                        <div class="blog-card-meta">
                            <span><svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg> 8 min read</span>
                            <span><svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg> Dec 2024</span>
                        </div>
                        <h3 class="blog-card-title">How to Import Motion Capture Animations into Unreal Engine 5</h3>
                        <p class="blog-card-excerpt">The complete step-by-step guide to importing FBX mocap files, setting up your skeleton, and getting animations playing in UE5 in under 10 minutes.</p>
                        <span class="blog-card-link">Read Article <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></span>
                    </div>
                </a>

                <!-- Blog Card 2 -->
                <a href="blog-mocap-vs-keyframe-animation.html" class="blog-card panel-glow">
                    <div class="panel-glow-blob"></div>
                    <div class="blog-card-image">
                        <div class="blog-card-image-placeholder">
                            <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="1.5">
                                <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                                <path d="M2 17l10 5 10-5"/>
                                <path d="M2 12l10 5 10-5"/>
                            </svg>
                        </div>
                        <div class="blog-card-category">Guide</div>
                    </div>
                    <div class="blog-card-content">
                        <div class="blog-card-meta">
                            <span><svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg> 12 min read</span>
                            <span><svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg> Dec 2024</span>
                        </div>
                        <h3 class="blog-card-title">Motion Capture vs Keyframe Animation: Which is Right for Your Game?</h3>
                        <p class="blog-card-excerpt">An honest comparison of both approaches covering cost, quality, time investment, and when each method makes sense for indie and AAA projects.</p>
                        <span class="blog-card-link">Read Article <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></span>
                    </div>
                </a>

                <!-- Blog Card 3 -->
                <a href="blog-retargeting-mocap-custom-rigs.html" class="blog-card panel-glow">
                    <div class="panel-glow-blob"></div>
                    <div class="blog-card-image">
                        <div class="blog-card-image-placeholder">
                            <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="1.5">
                                <circle cx="12" cy="12" r="3"/>
                                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                            </svg>
                        </div>
                        <div class="blog-card-category">Advanced</div>
                    </div>
                    <div class="blog-card-content">
                        <div class="blog-card-meta">
                            <span><svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg> 15 min read</span>
                            <span><svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg> Dec 2024</span>
                        </div>
                        <h3 class="blog-card-title">The Complete Guide to Retargeting Mocap to Custom Character Rigs</h3>
                        <p class="blog-card-excerpt">Master animation retargeting across Unreal, Unity, and Blender. Fix common issues like foot sliding, broken fingers, and skeleton mismatches.</p>
                        <span class="blog-card-link">Read Article <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></span>
                    </div>
                </a>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" style="background: transparent; padding: 100px 20px; position: relative; z-index: 1; border-top: 2px solid rgba(0, 212, 255, 0.1);">
        <div style="max-width: 900px; margin: 0 auto;">
            <div style="text-align: center; margin-bottom: 60px;">
                <h2 style="font-size: 42px; font-weight: 900; font-family: 'Sora', sans-serif; color: var(--text-white); margin-bottom: 16px;">
                    <span style="color: #fb7d47;">F</span>requently <span style="color: #fb7d47;">A</span>sked <span style="color: #fb7d47;">Q</span>uestions
                </h2>
                <p style="color: var(--text-primary); font-size: 18px;">
                    Everything you need to know about buying motion capture animations
                </p>
            </div>
            
            <div style="display: flex; flex-direction: column; gap: 16px;">
                <!-- FAQ Item 1 -->
                <div class="faq-item panel-glow" onclick="toggleFaq(this)">
                    <div class="panel-glow-blob"></div>
                    <div class="faq-question">
                        <h3>What is motion capture and how does it work?</h3>
                        <div class="faq-arrow">
                            <svg viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"></polyline></svg>
                        </div>
                    </div>
                    <div class="faq-answer">
                        <p>Motion capture (mocap) is the process of recording real human movement and translating it into digital 3D animation data. 
                        Our professional motion capture animations are recorded in a studio using advanced mocap technology, then cleaned and optimized for use in 
                        game engines like Unreal Engine and Unity, as well as 3D software like Blender, Maya, and 3ds Max.</p>
                    </div>
                </div>
                
                <!-- FAQ Item 2 -->
                <div class="faq-item panel-glow" onclick="toggleFaq(this)">
                    <div class="panel-glow-blob"></div>
                    <div class="faq-question">
                        <h3>What file formats do your mocap animations come in?</h3>
                        <div class="faq-arrow">
                            <svg viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"></polyline></svg>
                        </div>
                    </div>
                    <div class="faq-answer">
                        <p>All motion capture animations are provided in industry-standard FBX format, which is compatible with Unreal Engine, Unity, Blender, Maya, 
                        3ds Max, Cinema 4D, and virtually all major 3D software and game engines. Each mocap asset includes clean, optimized animation data 
                        ready for immediate use in your projects.</p>
                    </div>
                </div>
                
                <!-- FAQ Item 3 -->
                <div class="faq-item panel-glow" onclick="toggleFaq(this)">
                    <div class="panel-glow-blob"></div>
                    <div class="faq-question">
                        <h3>Can I use these motion capture animations in commercial projects?</h3>
                        <div class="faq-arrow">
                            <svg viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"></polyline></svg>
                        </div>
                    </div>
                    <div class="faq-answer">
                        <p>Yes! When you buy mocap animations from MocapWork, you receive a royalty-free license for commercial use. 
                        Use our professional motion capture in video games, films, commercials, virtual production, and any other commercial projects 
                        without additional fees or royalties. Perfect for game development studios, independent filmmakers, and 3D artists.</p>
                    </div>
                </div>
                
                <!-- FAQ Item 4 -->
                <div class="faq-item panel-glow" onclick="toggleFaq(this)">
                    <div class="panel-glow-blob"></div>
                    <div class="faq-question">
                        <h3>How do I use motion capture animations in Unreal Engine?</h3>
                        <div class="faq-arrow">
                            <svg viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"></polyline></svg>
                        </div>
                    </div>
                    <div class="faq-answer">
                        <p>Using our mocap animations in Unreal Engine is simple: 
                        1) Download your purchased motion capture files, 
                        2) Import the FBX file into your Unreal Engine project, 
                        3) Retarget the animation to your character skeleton, 
                        4) Start using the mocap in your game. 
                        Our animations are compatible with Unreal Engine 4 and Unreal Engine 5, including MetaHuman characters.</p>
                    </div>
                </div>
                
                <!-- FAQ Item 5 -->
                <div class="faq-item panel-glow" onclick="toggleFaq(this)">
                    <div class="panel-glow-blob"></div>
                    <div class="faq-question">
                        <h3>Are Unity mocap assets compatible with Unity?</h3>
                        <div class="faq-arrow">
                            <svg viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"></polyline></svg>
                        </div>
                    </div>
                    <div class="faq-answer">
                        <p>Absolutely! Our motion capture animations work perfectly with Unity. Simply import the FBX file into your Unity project, 
                        and the mocap will be ready to use with your humanoid characters. Our Unity mocap assets are compatible with Unity's Mecanim animation system 
                        and work with all Unity versions. Perfect for Unity game development, VR projects, and real-time applications.</p>
                    </div>
                </div>
                
                <!-- FAQ Item 6 -->
                <div class="faq-item panel-glow" onclick="toggleFaq(this)">
                    <div class="panel-glow-blob"></div>
                    <div class="faq-question">
                        <h3>Do I need a subscription to buy mocap animations?</h3>
                        <div class="faq-arrow">
                            <svg viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"></polyline></svg>
                        </div>
                    </div>
                    <div class="faq-answer">
                        <p>No subscription required! Buy motion capture animations individually as you need them. 
                        Each purchase gives you lifetime access to download and re-download your mocap files from your personal dashboard. 
                        No monthly fees, no hidden costsjust affordable, professional motion capture animations from $1.</p>
                    </div>
                </div>
                
                <!-- FAQ Item 7 -->
                <div class="faq-item panel-glow" onclick="toggleFaq(this)">
                    <div class="panel-glow-blob"></div>
                    <div class="faq-question">
                        <h3>What types of mocap animations do you offer?</h3>
                        <div class="faq-arrow">
                            <svg viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"></polyline></svg>
                        </div>
                    </div>
                    <div class="faq-answer">
                        <p>Our motion capture library includes fighting animations, walking cycles, running animations, idle poses, combat moves, 
                        dance mocap, sports movements, everyday actions, and character interactions. 
                        All professional motion capture for game development, film production, and 3D animation projects. 
                        New mocap animations added regularly to expand our library.</p>
                    </div>
                </div>
                
                <!-- FAQ Item 8 -->
                <div class="faq-item panel-glow" onclick="toggleFaq(this)">
                    <div class="panel-glow-blob"></div>
                    <div class="faq-question">
                        <h3>Can I request custom motion capture animations?</h3>
                        <div class="faq-arrow">
                            <svg viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"></polyline></svg>
                        </div>
                    </div>
                    <div class="faq-answer">
                        <p>Yes! We offer custom motion capture services for game developers and studios who need specific animations. 
                        Fill out our custom request form below with your requirements, and our motion capture team will provide a quote. 
                        Custom mocap is perfect for unique character movements, specialized actions, or project-specific animation needs.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <!-- Final CTA Banner -->
    <div style="background: transparent; padding: 60px 20px; text-align: center; border-top: 1px solid rgba(0, 212, 255, 0.1);">
        <h2 style="font-family: 'Sora', sans-serif; font-size: 36px; font-weight: 800; margin-bottom: 16px;">
            <span style="color: white;">Ready to </span><span class="gradient-text animated-gradient">Elevate Your Project</span><span style="color: white;">?</span>
        </h2>
        <p style="color: var(--text-secondary); font-size: 18px; max-width: 600px; margin: 0 auto 24px;">
            Join thousands of game developers, filmmakers, and 3D artists who trust MocapWork for professional motion capture animations.
        </p>
        <div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;">
            <a href="#library" class="btn-cta">
                <svg viewBox="0 0 24 24">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                    <path d="M22 4L12 14.01l-3-3"/>
                </svg>
                Start Browsing Now
            </a>
            <a href="#" onclick="showAuthModal('signup'); return false;" class="btn-cta">
                <svg viewBox="0 0 24 24">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                    <circle cx="8.5" cy="7" r="4"/>
                    <line x1="20" y1="8" x2="20" y2="14"/>
                    <line x1="23" y1="11" x2="17" y2="11"/>
                </svg>
                Create Free Account
            </a>
        </div>
        <p style="color: var(--text-muted); font-size: 13px; margin-top: 20px; display: flex; align-items: center; justify-content: center; gap: 6px;">
            <svg viewBox="0 0 24 24" width="14" height="14" fill="#fb7d47" stroke="none"><path d="M12 0l2.5 7.5L22 10l-7.5 2.5L12 20l-2.5-7.5L2 10l7.5-2.5z"/></svg> No subscription required  Pay only for what you need  Lifetime access to purchases
        </p>
    </div>

    </main>

    <!-- Why Choose MocapWork -->
    <section style="background: rgba(10, 10, 10, 0.8); padding: 80px 20px; border-top: 2px solid rgba(0, 212, 255, 0.1);">
        <div style="max-width: 1200px; margin: 0 auto; text-align: center;">
            <h2 style="font-size: 42px; font-weight: 900; font-family: 'Sora', sans-serif; margin-bottom: 20px;">
                <span style="color: white;">Why Choose Mocap</span><span class="gradient-text animated-gradient">Work</span> <span style="color: white;">for</span> <span class="gradient-text animated-gradient">Motion Capture</span><span style="color: white;">?</span>
            </h2>
            <p style="color: var(--text-secondary); font-size: 18px; max-width: 700px; margin: 0 auto 50px;">
                Trusted by game developers, filmmakers, and 3D artists worldwide
            </p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; margin-top: 50px;">
                <div>
                    <div style="margin-bottom: 16px;"><svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
                    <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 12px;">Studio Quality Mocap</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Professional motion capture recorded with industry-leading mocap technology
                    </p>
                </div>
                <div>
                    <div style="margin-bottom: 16px;"><svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
                    <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 12px;">Game Engine Ready</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Optimized for Unreal Engine, Unity, and all major game development platforms
                    </p>
                </div>
                <div>
                    <div style="margin-bottom: 16px;"><svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
                    <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 12px;">Royalty-Free License</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Use mocap animations in unlimited commercial projects with no extra fees
                    </p>
                </div>
                <div>
                    <div style="margin-bottom: 16px;"><svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
                    <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 12px;">Instant Download</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Buy and download motion capture files immediatelyno waiting
                    </p>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="footer-grid">
            <div class="footer-brand">
                <div class="footer-logo">
                    <img src="logo.png" alt="MocapWork Logo" style="width: 50px; height: 50px; border-radius: 10px;">
                    <span class="logo-text font-sora">
                        Mocap<span>Work</span>
                    </span>
                </div>
                <p class="footer-description">
                    The premier destination for professional motion capture animations. 
                    Elevate your projects with studio-quality mocap data.
                </p>
                <div class="social-links">
                    <a href="#" class="social-link"><svg viewBox="0 0 24 24" width="18" height="18" fill="#fb7d47"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>
                    <a href="#" class="social-link"><svg viewBox="0 0 24 24" width="20" height="20" fill="#fb7d47"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg></a>
                    <a href="#" class="social-link"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg></a>
                    <a href="#" class="social-link"><svg viewBox="0 0 24 24" width="20" height="20" fill="#fb7d47"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg></a>
                </div>
            </div>

            <div class="footer-section">
                <h4>Product</h4>
                <ul class="footer-links">
                    <li><a href="#library">Browse Library</a></li>
                    <li><a href="#blog">Blog</a></li>
                    <li><a href="#pricing">Pricing Plans</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Support</h4>
                <ul class="footer-links">
                    <li><a href="#faq">Documentation</a></li>
                    <li><a href="#blog">Tutorials</a></li>
                    <li><a href="#contact">Contact Us</a></li>
                    <li><a href="#faq">FAQ</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright"> 2025 MocapWork. All rights reserved.</p>
            <div class="legal-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
                <a href="#">License Agreement</a>
            </div>
        </div>
    </footer>

    <!-- Quick View Modal -->
    <div class="modal-overlay hidden" id="quickViewModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()"></button>
            <div id="modalBody"></div>
        </div>
    </div>


    <!-- Stripe.js for Payments -->
    <script src="https://js.stripe.com/v3/"></script>
    
    <!-- Supabase JavaScript Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        // 
        // MocapWork Logger - Professional Console Output
        // 
        const MocapWork = {
            version: '1.0.0',
            debug: false, // Set to true for verbose logging
            
            styles: {
                brand: 'background: linear-gradient(135deg, #fb7d47, #FF6B6B); color: white; padding: 8px 16px; border-radius: 4px; font-weight: bold; font-size: 14px;',
                info: 'color: #00d4ff; font-weight: 500;',
                success: 'color: #10B981; font-weight: 500;',
                warn: 'color: #FBBF24; font-weight: 500;',
                error: 'color: #FF6B6B; font-weight: bold;',
                muted: 'color: #6B7280;'
            },
            
            init() {
                console.log('%cMocapWork', this.styles.brand, `v${this.version}`);
                console.log('%c', this.styles.muted);
                if (this.debug) {
                    console.log('%c Debug mode enabled', this.styles.warn);
                }
            },
            
            log(message, data = null) {
                if (this.debug) {
                    data ? console.log(`%c${message}`, this.styles.info, data) : console.log(`%c${message}`, this.styles.info);
                }
            },
            
            success(message, data = null) {
                data ? console.log(`%c ${message}`, this.styles.success, data) : console.log(`%c ${message}`, this.styles.success);
            },
            
            warn(message, data = null) {
                data ? console.warn(`%c ${message}`, this.styles.warn, data) : console.warn(`%c ${message}`, this.styles.warn);
            },
            
            error(message, data = null) {
                data ? console.error(`%c ${message}`, this.styles.error, data) : console.error(`%c ${message}`, this.styles.error);
            },
            
            group(name) {
                if (this.debug) console.groupCollapsed(`%c${name}`, this.styles.muted);
            },
            
            groupEnd() {
                if (this.debug) console.groupEnd();
            },
            
            table(data) {
                if (this.debug) console.table(data);
            }
        };
        
        // Initialize logger
        MocapWork.init();
        
        // Force scroll to top immediately on page load
        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'manual';
        }
        window.scrollTo(0, 0);
        
        // Detect when user comes back from Stripe (browser back button)
        window.addEventListener('pageshow', function(event) {
            // If page is being restored from cache (user clicked back)
            if (event.persisted) {
                const overlay = document.getElementById('stripe-loading-overlay');
                if (overlay) {
                    overlay.remove();
                }
            }
        });
        
        (function() {
            // Supabase Configuration
            const SUPABASE_URL = 'https://ekzablbemeponkrcitco.supabase.co';
            const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVremFibGJlbWVwb25rcmNpdGNvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5NTkzNDQsImV4cCI6MjA4MTUzNTM0NH0.bhr5lIwDUA3prPuCN7mBj5Bn8lJhalPFu5MMS5I1g2I';
            
            // Initialize Supabase client - make it global so carousel can access it
            // Realtime disabled to prevent unnecessary WebSocket connections
            window.supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {
                realtime: {
                    enabled: false
                }
            });
            const supabaseClient = window.supabaseClient; // Keep local reference for this scope
            
            // Stripe Configuration
            const STRIPE_PUBLISHABLE_KEY = 'pk_test_51SfQ2BQBChX7okucx4uosVidKjSy2aeDtIAJz3G2DdkFcnKKZWp3byJ8ZbIbSMfvUL6mFpBinviFcjs6dQStaqTN000OZa3XQn';
            const stripe = window.Stripe ? window.Stripe(STRIPE_PUBLISHABLE_KEY) : null;
            
            // Stripe Modal Variables
            let stripeElements;
            let cardNumberElement;
            let cardExpiryElement;
            let cardCvcElement;
            let currentClientSecret;
            let currentProductInfo = {};
            
            // ==========================================
            // STRIPE CHECKOUT MODAL FUNCTIONS
            // ==========================================
            
            // Initialize Stripe Elements
            function initializeStripeElements() {
                if (stripeElements) return; // Already initialized
                
                const elementStyles = {
                    base: {
                        color: '#FFFFFF',
                        fontFamily: '"DM Sans", sans-serif',
                        fontSize: '16px',
                        fontWeight: '400',
                        '::placeholder': {
                            color: '#6B7280'
                        }
                    },
                    invalid: {
                        color: '#FCA5A5',
                        iconColor: '#FCA5A5'
                    },
                    complete: {
                        color: '#10B981',
                        iconColor: '#10B981'
                    }
                };
                
                // Create elements with appearance options
                stripeElements = stripe.elements({
                    appearance: {
                        theme: 'night',
                        variables: {
                            colorBackground: '#2A2A2A',
                            colorText: '#FFFFFF',
                            colorDanger: '#FCA5A5',
                            fontFamily: 'DM Sans, sans-serif',
                            borderRadius: '50px'
                        }
                    }
                });
                
                // Create separate elements
                cardNumberElement = stripeElements.create('cardNumber', {
                    style: elementStyles,
                    placeholder: '1234 5678 9012 3456'
                });
                
                cardExpiryElement = stripeElements.create('cardExpiry', {
                    style: elementStyles,
                    placeholder: 'MM / YY'
                });
                
                cardCvcElement = stripeElements.create('cardCvc', {
                    style: elementStyles,
                    placeholder: 'CVC'
                });
                
                // Mount elements
                cardNumberElement.mount('#stripe-card-number');
                cardExpiryElement.mount('#stripe-card-expiry');
                cardCvcElement.mount('#stripe-card-cvc');
                
                // Handle errors for all elements
                [cardNumberElement, cardExpiryElement, cardCvcElement].forEach(element => {
                    element.on('change', (event) => {
                        if (event.error) {
                            showStripeError(event.error.message);
                        } else {
                            hideStripeError();
                        }
                    });
                });
            }
            
            // Open Stripe Checkout Modal
            async function openStripeCheckout(productName, price, clientSecret, animationId = null, cartItems = null) {
                currentProductInfo = {
                    name: productName,
                    price: price,
                    clientSecret: clientSecret,
                    animationId: animationId,
                    cartItems: cartItems
                };
                currentClientSecret = clientSecret;
                
                // Update UI
                document.getElementById('stripe-product-name').textContent = productName;
                document.getElementById('stripe-product-price').textContent = `$${price.toFixed(2)}`;
                document.getElementById('stripe-total-price').textContent = `$${price.toFixed(2)}`;
                
                // Show animation preview for single items
                const previewDiv = document.getElementById('stripe-animation-preview');
                if (animationId && !cartItems) {
                    // Fetch animation data to get video_url
                    try {
                        const { data: animation } = await supabaseClient
                            .from('animations')
                            .select('video_url')
                            .eq('id', animationId)
                            .single();
                        
                        if (animation && animation.video_url) {
                            document.getElementById('stripe-animation-gif').src = animation.video_url;
                            previewDiv.style.display = 'block';
                        } else {
                            previewDiv.style.display = 'none';
                        }
                    } catch (error) {
                        previewDiv.style.display = 'none';
                    }
                } else {
                    previewDiv.style.display = 'none';
                }
                
                // Initialize Stripe Elements if not already done
                initializeStripeElements();
                
                // Show modal
                document.getElementById('stripeCheckoutModal').classList.add('active');
                
                
            }
            
            // Close Stripe Checkout Modal
            function closeStripeCheckout() {
                const modal = document.getElementById('stripeCheckoutModal');
                modal.classList.remove('active');
                
                // Clear all card elements
                if (cardNumberElement) cardNumberElement.clear();
                if (cardExpiryElement) cardExpiryElement.clear();
                if (cardCvcElement) cardCvcElement.clear();
                
                // Hide error
                hideStripeError();
                
                // Reset button
                setPayButtonLoading(false);
            }
            
            // Make globally accessible
            window.closeStripeCheckout = closeStripeCheckout;
            window.openStripeCheckout = openStripeCheckout;
            
            // Show Thank You Modal (simple version)
            async function showThankYouModal(paymentIntentId) {
                
                
                const thankYouModal = document.getElementById('thankYouModal');
                if (!thankYouModal) {
                    alert('Payment successful! Check your dashboard for downloads.');
                    return;
                }
                
                thankYouModal.classList.add('active');
                
                // Show loading state
                document.getElementById('thankYouLoading').style.display = 'block';
                document.getElementById('thankYouPreview').style.display = 'none';
                document.getElementById('thankYouDownload').style.display = 'none';
                if (document.getElementById('thankYouOrderDetails')) {
                    document.getElementById('thankYouOrderDetails').style.display = 'none';
                }
                if (document.getElementById('thankYouError')) {
                    document.getElementById('thankYouError').style.display = 'none';
                }
                
                try {
                    // Get user session
                    const { data: { session } } = await supabaseClient.auth.getSession();
                    
                    if (!session) {
                        throw new Error('Please sign in to view your purchase');
                    }
                    
                    // Retry logic - webhook might take a moment to process
                    let purchase = null;
                    let attempts = 0;
                    const maxAttempts = 5;
                    
                    
                    
                    while (!purchase && attempts < maxAttempts) {
                        attempts++;
                        
                        // Wait before querying (except first attempt)
                        if (attempts > 1) {
                            await new Promise(resolve => setTimeout(resolve, 2000));
                        }
                        
                        // Query purchase from database using payment intent ID
                        const { data, error } = await supabaseClient
                            .from('purchases')
                            .select('*, animations(*)')
                            .eq('stripe_session_id', paymentIntentId)
                            .eq('user_id', session.user.id)
                            .single();
                        
                        if (data) {
                            purchase = data;
                            break;
                        }
                        
                        if (error && error.code !== 'PGRST116') {
                            // PGRST116 is "not found" - other errors should be thrown
                            throw error;
                        }
                    }
                    
                    if (!purchase) {
                        throw new Error('Purchase not found. Please contact support if you were charged.');
                    }
                    
                    
                    // Hide loading
                    document.getElementById('thankYouLoading').style.display = 'none';
                    
                    // Show animation preview
                    if (purchase.animations.video_url) {
                        document.getElementById('thankYouPreview').style.display = 'block';
                        document.getElementById('thankYouGif').src = purchase.animations.video_url;
                        document.getElementById('thankYouAnimationName').textContent = purchase.animations.title;
                    }
                    
                    // Show download button
                    if (purchase.animations.file_url) {
                        document.getElementById('thankYouDownload').style.display = 'block';
                        document.getElementById('thankYouDownloadBtn').href = purchase.animations.file_url;
                    }
                    
                    // Show order details if element exists
                    if (document.getElementById('thankYouOrderDetails')) {
                        document.getElementById('thankYouOrderDetails').style.display = 'block';
                        document.getElementById('thankYouOrderId').textContent = paymentIntentId.substring(0, 20) + '...';
                        document.getElementById('thankYouOrderAnimation').textContent = purchase.animations.title;
                        document.getElementById('thankYouOrderAmount').textContent = '$' + purchase.amount_paid.toFixed(2);
                        document.getElementById('thankYouOrderDate').textContent = new Date(purchase.purchase_date).toLocaleDateString();
                    }
                    
                    
                } catch (error) {
                    console.error('Error loading purchase:', error);
                    document.getElementById('thankYouLoading').style.display = 'none';
                    if (document.getElementById('thankYouError')) {
                        document.getElementById('thankYouError').style.display = 'block';
                    }
                    if (document.getElementById('thankYouErrorMessage')) {
                        document.getElementById('thankYouErrorMessage').textContent = error.message || 'Unable to load purchase details. Please contact support.';
                    }
                }
            }
            
            // Make globally accessible
            window.showThankYouModal = showThankYouModal;
            
            // Show Error
            function showStripeError(message) {
                const errorDiv = document.getElementById('stripe-error-message');
                errorDiv.textContent = message;
                errorDiv.classList.add('show');
            }
            
            // Hide Error
            function hideStripeError() {
                const errorDiv = document.getElementById('stripe-error-message');
                errorDiv.classList.remove('show');
            }
            
            // Set Pay Button Loading State
            function setPayButtonLoading(loading) {
                const button = document.getElementById('stripe-pay-button');
                const buttonText = document.getElementById('stripe-button-text');
                const spinner = document.getElementById('stripe-button-spinner');
                
                if (loading) {
                    button.disabled = true;
                    buttonText.textContent = 'Processing...';
                    spinner.style.display = 'block';
                } else {
                    button.disabled = false;
                    buttonText.textContent = '<svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" style="display:inline;vertical-align:middle;margin-right:4px;"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>Pay Now';
                    spinner.style.display = 'none';
                }
            }
            
            // Handle Payment Submission
            document.addEventListener('DOMContentLoaded', () => {
                document.getElementById('stripe-pay-button')?.addEventListener('click', async (e) => {
                    e.preventDefault();
                    
                    setPayButtonLoading(true);
                    hideStripeError();
                    
                    try {
                        const { error, paymentIntent } = await stripe.confirmCardPayment(currentClientSecret, {
                            payment_method: {
                                card: cardNumberElement
                            }
                        });
                        
                        if (error) {
                            showStripeError(error.message);
                            setPayButtonLoading(false);
                        } else if (paymentIntent.status === 'succeeded') {
                            // Close checkout modal
                            closeStripeCheckout();
                            
                            // Save purchase directly (don't wait for webhook)
                            try {
                                const { data: { session } } = await supabaseClient.auth.getSession();
                                
                                if (session && currentProductInfo) {
                                    if (currentProductInfo.cartItems && currentProductInfo.cartItems.length > 0) {
                                        // Save multiple cart items
                                        const purchases = currentProductInfo.cartItems.map(item => ({
                                            user_id: session.user.id,
                                            animation_id: item.animationId,
                                            stripe_session_id: paymentIntent.id,
                                            amount_paid: item.price
                                        }));
                                        
                                        const { data, error } = await supabaseClient
                                            .from('purchases')
                                            .insert(purchases)
                                            .select();
                                        
                                        if (error) {
                                            MocapWork.error('Error saving cart purchases', error);
                                        } else {
                                            MocapWork.success('Purchase complete');
                                            // Clear cart
                                            localStorage.removeItem('cart');
                                            if (typeof updateCartBadge === 'function') updateCartBadge();
                                        }
                                    } else if (currentProductInfo.animationId) {
                                        // Save single item
                                        const { data, error } = await supabaseClient
                                            .from('purchases')
                                            .insert([{
                                                user_id: session.user.id,
                                                animation_id: currentProductInfo.animationId,
                                                stripe_session_id: paymentIntent.id,
                                                amount_paid: currentProductInfo.price
                                            }])
                                            .select();
                                        
                                        if (error) {
                                            MocapWork.error('Error saving purchase', error);
                                        } else {
                                            MocapWork.success('Purchase complete');
                                        }
                                    }
                                }
                            } catch (err) {
                                MocapWork.error('Error in purchase save', err);
                            }
                            
                            // Show thank you modal
                            if (typeof window.showThankYouModal === 'function') {
                                window.showThankYouModal(paymentIntent.id);
                            } else if (typeof showThankYouModal === 'function') {
                                showThankYouModal(paymentIntent.id);
                            } else {
                                console.error(' showThankYouModal not found!');
                                alert('Payment successful! Check your dashboard for downloads.');
                            }
                        }
                    } catch (err) {
                        console.error('Payment error:', err);
                        showStripeError('An unexpected error occurred. Please try again.');
                        setPayButtonLoading(false);
                    }
                });
                
                // Close modal on ESC key
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        const modal = document.getElementById('stripeCheckoutModal');
                        if (modal.classList.contains('active')) {
                            closeStripeCheckout();
                        }
                    }
                });
            });
        
        // API Helper Functions
        const API = {
            // Get all animations with optional filters
            async getAnimations(filters = {}) {
                let query = supabaseClient
                    .from('animations')
                    .select(`
                        *,
                        animation_tags(
                            tag_id,
                            tags(name)
                        )
                    `);

                // Apply filters
                if (filters.category && filters.category !== 'All') {
                    query = query.eq('category', filters.category);
                }
                if (filters.gender && filters.gender !== 'All') {
                    query = query.eq('gender', filters.gender);
                }
                if (filters.style && filters.style !== 'All') {
                    query = query.eq('style', filters.style);
                }
                if (filters.search) {
                    query = query.ilike('title', `%${filters.search}%`);
                }

                // Apply sorting - ALWAYS include ID as secondary sort for consistency
                if (filters.sort === 'popular') {
                    query = query.order('popular', { ascending: false }).order('id', { ascending: true });
                } else if (filters.sort === 'price-low') {
                    query = query.order('price', { ascending: true }).order('id', { ascending: true });
                } else if (filters.sort === 'price-high') {
                    query = query.order('price', { ascending: false }).order('id', { ascending: true });
                } else if (filters.sort === 'newest') {
                    query = query.order('created_at', { ascending: false }).order('id', { ascending: true });
                } else {
                    // DEFAULT: Order by ID for consistent results
                    query = query.order('id', { ascending: true });
                }

                const { data, error } = await query;
                
                if (error) {
                    console.error('Error fetching animations:', error);
                    return [];
                }

                // Transform data to match frontend format
                return data.map(anim => ({
                    id: anim.id,
                    title: anim.title,
                    slug: anim.slug,
                    description: anim.description,
                    price: parseFloat(anim.price),
                    duration: anim.duration,
                    category: anim.category,
                    gender: anim.gender,
                    style: anim.style,
                    popular: anim.popular,
                    onSale: anim.on_sale,
                    holidaySale: anim.holiday_sale,
                    salePercentage: anim.sale_percentage,
                    video: anim.video_url,
                    thumbnail: anim.thumbnail_url,
                    videoType: anim.video_type,
                    tags: anim.animation_tags && anim.animation_tags.length > 0 
                        ? anim.animation_tags.map(at => at.tags.name)
                        : [anim.category, anim.gender, anim.style].filter(Boolean),
                    frameRate: anim.frame_rate,
                    animationCount: anim.animation_count,
                    formats: anim.formats,
                    skeleton: anim.skeleton,
                    mocapProcess: anim.mocap_process
                }));
            },

            // Submit custom request
            async submitCustomRequest(formData) {
                const { data, error } = await supabaseClient
                    .from('custom_requests')
                    .insert([
                        {
                            name: formData.name,
                            email: formData.email,
                            project_type: formData.projectType,
                            description: formData.description,
                            budget: formData.budget || null
                        }
                    ]);

                if (error) {
                    console.error('Error submitting request:', error);
                    return { success: false, error: error.message };
                }

                return { success: true, data };
            },

            // Add to cart (localStorage for now)
            async addToCart(animationId) {
                const cart = JSON.parse(localStorage.getItem('cart') || '[]');
                if (!cart.includes(animationId)) {
                    cart.push(animationId);
                    localStorage.setItem('cart', JSON.stringify(cart));
                }
                return { success: true };
            },

            // Remove from cart
            async removeFromCart(animationId) {
                let cart = JSON.parse(localStorage.getItem('cart') || '[]');
                cart = cart.filter(id => id !== animationId && id !== String(animationId));
                localStorage.setItem('cart', JSON.stringify(cart));
                return { success: true };
            },

            // Get cart items
            async getCartItems() {
                const cartIds = JSON.parse(localStorage.getItem('cart') || '[]');
                if (cartIds.length === 0) return [];
                
                const { data, error } = await supabaseClient
                    .from('animations')
                    .select('id, title, slug, price, thumbnail_url, video_url, video_type, on_sale, holiday_sale, sale_percentage')
                    .in('id', cartIds);
                
                return data || [];
            }
        };
        
        // Animation data
        // Animations will load from Supabase database
        let animations = [];
        let filteredAnimations = []; // Store current filtered/sorted results
        let selectedAnimations = [];
        let currentDisplayCount = 8;
        const itemsPerPage = 12;

        // Render animations
        function renderAnimations(filteredAnimations) {
            const grid = document.getElementById('animationGrid');
            grid.innerHTML = '';
            
            const displayAnimations = filteredAnimations.slice(0, currentDisplayCount);
            const loadMoreBtn = document.getElementById('loadMoreBtn');
            
            // Show/hide load more button
            const backToTopBtn = document.getElementById('backToTopBtn');
            if (loadMoreBtn) {
                if (filteredAnimations.length > displayAnimations.length) {
                    loadMoreBtn.style.display = 'inline-block';
                    if (backToTopBtn) backToTopBtn.style.display = 'none';
                } else {
                    loadMoreBtn.style.display = 'none';
                    if (backToTopBtn) backToTopBtn.style.display = 'inline-block';
                }
            }

            displayAnimations.forEach(anim => {
                const card = document.createElement('div');
                card.className = 'animation-card';
                card.style.cursor = 'pointer';
                card.onclick = function(e) {
                    // Don't navigate if clicking on buttons, checkboxes, or interactive elements
                    if (e.target.closest('button, a, input, label, .card-checkbox, .card-fav-btn, .card-btn')) return;
                    window.location.href = `animation-detail.html?slug=${anim.slug}`;
                };
                
                let mediaElement = '';
                const hasThumbnail = anim.thumbnail && anim.thumbnail !== anim.video;
                
                if (anim.videoType === 'video/mp4') {
                    // MP4 video - autoplay directly
                    mediaElement = `<video src="${anim.video}" class="card-media-video" muted loop playsinline autoplay></video>`;
                } else if (anim.videoType === 'image/gif') {
                    // GIF - just show it directly
                    mediaElement = `<img src="${anim.video}" alt="${anim.title}" loading="lazy">`;
                } else {
                    // Static image
                    mediaElement = `<img src="${anim.thumbnail || anim.video}" alt="${anim.title}" loading="lazy">`;
                }
                
                card.innerHTML = `
                    <!-- Top Bar with Checkbox and Badges -->
                    <div class="card-top-bar">
                        <div class="card-badges-row">
                            ${anim.popular ? `
                                <div class="icon-badge icon-badge-popular" title="Popular">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                                        <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="currentColor"/>
                                    </svg>
                                </div>
                            ` : ''}
                            ${anim.onSale ? `
                                <div class="icon-badge icon-badge-sale" title="On Sale">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                                        <path d="M21.41 11.58L12.41 2.58C12.05 2.22 11.55 2 11 2H4C2.9 2 2 2.9 2 4V11C2 11.55 2.22 12.05 2.59 12.42L11.59 21.42C11.95 21.78 12.45 22 13 22C13.55 22 14.05 21.78 14.41 21.41L21.41 14.41C21.78 14.05 22 13.55 22 13C22 12.45 21.77 11.94 21.41 11.58ZM5.5 7C4.67 7 4 6.33 4 5.5C4 4.67 4.67 4 5.5 4C6.33 4 7 4.67 7 5.5C7 6.33 6.33 7 5.5 7Z" fill="currentColor"/>
                                    </svg>
                                </div>
                            ` : ''}
                            ${anim.holidaySale ? `
                                <div class="icon-badge icon-badge-holiday" title="Holiday Sale">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                                        <path d="M6 3L8 8H16L18 3M8 8L3 21H21L16 8M8 8H16M12 11V17M9 14H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                            ` : ''}
                        </div>
                        <div class="card-checkbox" onclick="event.stopPropagation(); toggleSelection('${anim.id}')" style="position: relative; top: auto; left: auto; margin-right: -15px; transform: translateY(0px);">
                            <input type="checkbox" id="check-${anim.id}" />
                            <label for="check-${anim.id}">
                                <svg viewBox="0 0 24 24">
                                    <circle cx="9" cy="21" r="1"></circle>
                                    <circle cx="20" cy="21" r="1"></circle>
                                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                                </svg>
                            </label>
                        </div>
                    </div>

                    <!-- Thumbnail/GIF/Video Container -->
                    <div class="card-thumbnail">
                        ${mediaElement}
                    </div>

                    <!-- Details Panel - Slides up on hover -->
                    <div class="card-details">
                        <!-- Title Row: Title left, Heart right -->
                        <div class="card-title-row">
                            <h3 class="card-title">${anim.title}</h3>
                            <button class="card-fav-btn" onclick="event.stopPropagation(); this.classList.toggle('active')">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                </svg>
                            </button>
                        </div>

                        <!-- Tags + Price Row: Tags left, Price right -->
                        <div class="card-tags-price-row">
                            <div class="card-tags">
                                ${anim.tags.slice(0, 3).map(tag => `<span class="tag">${tag}</span>`).join('')}
                            </div>
                            <div class="card-price-display">
                                ${(anim.onSale || anim.holidaySale) && anim.salePercentage ? `
                                    <span class="card-price-original">$${anim.price.toFixed(2)}</span>
                                    <span class="card-price-main"><span class="card-price-dollar">$</span><span style="color: #fff;">${(anim.price * (1 - anim.salePercentage / 100)).toFixed(2)}</span></span>
                                ` : `
                                    <span class="card-price-main"><span class="card-price-dollar">$</span><span style="color: #fff;">${anim.price.toFixed(2)}</span></span>
                                `}
                            </div>
                        </div>

                        <!-- Duration + Frames Row -->
                        <div class="card-duration-row">
                            <svg viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            <span>${anim.duration}</span>
                            <span class="separator"></span>
                            <span>${anim.frameRate || 30} fps</span>
                        </div>

                        <!-- Rating + Engine Icons Row -->
                        <div class="card-meta-row">
                            <div class="card-rating">
                                <span class="star"><svg viewBox="0 0 24 24" width="14" height="14" fill="#fb7d47" stroke="none"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg></span>
                                <span class="rating-value">${(4.5 + (anim.id.charCodeAt(0) % 5) / 10).toFixed(1)}</span>
                            </div>
                            <div class="card-engines">
                                <span class="engine-icon">FBX</span>
                                <span class="engine-icon">UE</span>
                                <span class="engine-icon">Unity</span>
                            </div>
                        </div>

                        <!-- Purchase Section - Buttons only -->
                        <div class="card-purchase">
                            
                            <!-- Action Buttons -->
                            <div class="card-actions">
                                <div class="card-actions-row">
                                    <a href="animation-detail.html?slug=${anim.slug}" class="card-btn card-btn-details" onclick="event.stopPropagation();">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <line x1="12" y1="16" x2="12" y2="12"></line>
                                            <line x1="12" y1="8" x2="12.01" y2="8"></line>
                                        </svg>
                                        Details
                                    </a>
                                    <button class="card-btn card-btn-3d" onclick="event.preventDefault(); event.stopPropagation(); open3DViewer('${anim.glbFile || ''}', '${anim.title}')">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                                            <path d="M2 17l10 5 10-5"></path>
                                            <path d="M2 12l10 5 10-5"></path>
                                        </svg>
                                        3D
                                    </button>
                                </div>
                                <div class="card-actions-row">
                                    <button class="card-btn card-btn-buy" onclick="event.stopPropagation(); handleBuyNow('${anim.id}', '${anim.title}', ${(anim.onSale || anim.holidaySale) && anim.salePercentage ? (anim.price * (1 - anim.salePercentage / 100)).toFixed(2) : anim.price})">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                                            <line x1="1" y1="10" x2="23" y2="10"></line>
                                        </svg>
                                        Buy Now
                                    </button>
                                    <button class="card-btn card-btn-cart" onclick="event.stopPropagation(); handleAddToCart('${anim.id}')">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="9" cy="21" r="1"></circle>
                                            <circle cx="20" cy="21" r="1"></circle>
                                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                                        </svg>
                                        Add to Cart
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
            
            document.getElementById('resultsCount').innerHTML = 
                `Showing <strong>${Math.min(displayAnimations.length, filteredAnimations.length)}</strong> of <strong>${filteredAnimations.length}</strong> animations`;
            
            // Initialize lazy GIF loading
            initLazyGifs();
            
            // Initialize off-screen pause observer
            initCardObserver();
        }
        
        // Autoplay videos - no hover needed
        function initLazyGifs() {
            // Videos autoplay via HTML attribute, just ensure they're playing
            const videos = document.querySelectorAll('.card-media-video');
            videos.forEach(video => {
                video.play().catch(() => {}); // Ignore autoplay errors
            });
        }

        // Pause/play animations when cards go off-screen for performance
        function initCardObserver() {
            const cards = document.querySelectorAll('.animation-card');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const video = entry.target.querySelector('.card-media-video');
                    if (video) {
                        if (entry.isIntersecting) {
                            video.play().catch(() => {});
                        } else {
                            video.pause();
                        }
                    }
                });
            }, {
                rootMargin: '100px',
                threshold: 0
            });
            
            cards.forEach(card => observer.observe(card));
        }

        // Select category from nav dropdown
        function selectCategory(category) {
            const categoryFilter = document.getElementById('categoryFilter');
            if (categoryFilter) {
                categoryFilter.value = category;
                filterAnimations();
            }
        }

        // Filter function
        function filterAnimations() {
            const searchQuery = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;
            const gender = document.getElementById('genderFilter').value;
            const style = document.getElementById('styleFilter').value;
            const sort = document.getElementById('sortFilter').value;

            let filtered = animations.filter(anim => {
                const matchesSearch = !searchQuery || 
                    anim.title.toLowerCase().includes(searchQuery) ||
                    anim.tags.some(tag => tag.toLowerCase().includes(searchQuery));
                const matchesCategory = category === 'All' || anim.category === category;
                const matchesGender = gender === 'All' || anim.tags.includes(gender);
                const matchesStyle = style === 'All' || anim.tags.includes(style);

                return matchesSearch && matchesCategory && matchesGender && matchesStyle;
            });

            // Sort (stable - maintains original database order when values are equal)
            filtered.sort((a, b) => {
                if (sort === 'popular') {
                    if (b.popular !== a.popular) return b.popular - a.popular;
                    return a._originalIndex - b._originalIndex; // Maintain original order
                }
                if (sort === 'price-low') {
                    if (a.price !== b.price) return a.price - b.price;
                    return a._originalIndex - b._originalIndex;
                }
                if (sort === 'price-high') {
                    if (b.price !== a.price) return b.price - a.price;
                    return a._originalIndex - b._originalIndex;
                }
                return a._originalIndex - b._originalIndex; // Default: maintain database order
            });

            // Save filtered results and reset display count
            filteredAnimations = filtered;
            currentDisplayCount = 8; // Reset to 8 when filters change
            renderAnimations(filteredAnimations);
        }

        // Event listeners
        // Library search with dropdown
        const searchInputLibrary = document.getElementById('searchInput');
        const searchDropdownLibrary = document.getElementById('searchDropdownLibrary');
        let librarySearchTimeout;

        // Show popular animations on focus
        searchInputLibrary.addEventListener('focus', function() {
            const query = this.value.trim();
            if (query.length === 0) {
                showPopularAnimationsLibrary();
            }
        });

        searchInputLibrary.addEventListener('input', function(e) {
            const query = e.target.value.trim();
            
            // Also filter animations
            filterAnimations();
            
            // Show dropdown with suggestions
            clearTimeout(librarySearchTimeout);
            
            if (query.length === 0) {
                showPopularAnimationsLibrary();
                return;
            }
            
            // Start searching from first character
            librarySearchTimeout = setTimeout(() => {
                performLibrarySearch(query);
            }, 150);
        });

        // Enter key for library search
        searchInputLibrary.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                searchDropdownLibrary.style.display = 'none';
                filterAnimations();
                // Scroll to above animation grid
                const animationGrid = document.getElementById('animationGrid');
                if (animationGrid) {
                    const yOffset = -100; // 100px above the grid
                    const y = animationGrid.getBoundingClientRect().top + window.pageYOffset + yOffset;
                    window.scrollTo({ top: y, behavior: 'smooth' });
                }
            }
        });

        function showPopularAnimationsLibrary() {
            // Get popular/featured animations (first 6 or random selection)
            const popularAnims = animations.slice(0, 6);
            
            let html = '';
            
            // Popular searches
            html += '<div class="search-section">';
            html += '<div class="search-section-title">SUGGESTED SEARCHES</div>';
            const popularSearches = ['sword', 'fantasy sword', 'sword pack', 'walking'];
            popularSearches.forEach(term => {
                html += `<div class="search-result-item" onclick="applyLibrarySearch('${term}')">`;
                html += '<div class="search-result-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="#fb7d47" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg></div>';
                html += `<div class="search-result-text"><strong>${term}</strong></div>`;
                html += '</div>';
            });
            html += '</div>';
            
            // Popular animations
            if (popularAnims.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">POPULAR ANIMATIONS</div>';
                popularAnims.forEach(anim => {
                    const thumbnailUrl = anim.thumbnail_url || anim.video_url;
                    const isOnSale = (anim.on_sale || anim.holiday_sale) && anim.sale_percentage;
                    const finalPrice = isOnSale ? anim.price * (1 - anim.sale_percentage / 100) : anim.price;
                    html += `<div class="search-result-item" onclick="window.location.href='animation-detail.html?slug=${anim.slug}'" style="display: flex; align-items: center; gap: 12px;">`;
                    html += `<img src="${thumbnailUrl}" alt="${anim.title}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 8px; border: 2px solid rgba(0, 212, 255, 0.2);">`;
                    html += `<div style="flex: 1;"><div class="search-result-text">${anim.title}</div><div style="font-size: 14px; color: #fb7d47; font-weight: 600;">$${finalPrice.toFixed(2)}</div></div>`;
                    html += '</div>';
                });
                html += '</div>';
            }
            
            searchDropdownLibrary.innerHTML = html;
            searchDropdownLibrary.style.display = 'block';
        }

        function performLibrarySearch(query) {
            const lowerQuery = query.toLowerCase();
            
            // Filter animations (handle null values)
            const results = animations.filter(anim => 
                (anim.title && anim.title.toLowerCase().includes(lowerQuery)) ||
                (anim.category && anim.category.toLowerCase().includes(lowerQuery)) ||
                (anim.style && anim.style.toLowerCase().includes(lowerQuery))
            ).slice(0, 6);
            
            // Suggested searches
            const suggestions = [
                query,
                'fantasy ' + query,
                query + ' pack'
            ].slice(0, 3);
            
            let html = '';
            
            // Suggested searches
            if (suggestions.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">SUGGESTED SEARCHES</div>';
                suggestions.forEach(sugg => {
                    const highlighted = sugg.replace(new RegExp(query, 'gi'), match => `<strong>${match}</strong>`);
                    html += `<div class="search-result-item" onclick="applyLibrarySearch('${sugg}')">`;
                    html += '<div class="search-result-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="#fb7d47" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg></div>';
                    html += `<div class="search-result-text">${highlighted}</div>`;
                    html += '</div>';
                });
                html += '</div>';
            }
            
            // Animation results
            if (results.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">ANIMATIONS</div>';
                results.forEach(anim => {
                    const highlighted = anim.title.replace(new RegExp(query, 'gi'), match => `<strong>${match}</strong>`);
                    const thumbnailUrl = anim.thumbnail_url || anim.video_url;
                    const isOnSale = (anim.on_sale || anim.holiday_sale) && anim.sale_percentage;
                    const finalPrice = isOnSale ? anim.price * (1 - anim.sale_percentage / 100) : anim.price;
                    html += `<div class="search-result-item" onclick="window.location.href='animation-detail.html?slug=${anim.slug}'" style="display: flex; align-items: center; gap: 12px;">`;
                    html += `<img src="${thumbnailUrl}" alt="${anim.title}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 8px; border: 2px solid rgba(0, 212, 255, 0.2);">`;
                    html += `<div style="flex: 1;"><div class="search-result-text">${highlighted}</div><div style="font-size: 14px; color: #fb7d47; font-weight: 600;">$${finalPrice.toFixed(2)}</div></div>`;
                    html += '</div>';
                });
                html += '</div>';
            }
            
            searchDropdownLibrary.innerHTML = html;
            searchDropdownLibrary.style.display = 'block';
        }

        window.applyLibrarySearch = function(searchTerm) {
            searchInputLibrary.value = searchTerm;
            filterAnimations();
            searchDropdownLibrary.style.display = 'none';
        }

        // Close library dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.search-box')) {
                if (searchDropdownLibrary) {
                    searchDropdownLibrary.style.display = 'none';
                }
            }
        });

        document.getElementById('searchInput').addEventListener('input', filterAnimations);
        document.getElementById('categoryFilter').addEventListener('change', filterAnimations);
        document.getElementById('genderFilter').addEventListener('change', filterAnimations);
        document.getElementById('styleFilter').addEventListener('change', filterAnimations);
        document.getElementById('sortFilter').addEventListener('change', filterAnimations);

        // Custom Dropdown System
        function setupCustomDropdowns() {
            const dropdownBtns = document.querySelectorAll('.custom-dropdown-btn');
            const dropdownMenus = document.querySelectorAll('.custom-dropdown-menu');
            
            // Mapping of dropdown names to select IDs
            const selectMapping = {
                'category': 'categoryFilter',
                'gender': 'genderFilter',
                'style': 'styleFilter',
                'sort': 'sortFilter'
            };

            // Toggle dropdown on button click
            dropdownBtns.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const dropdownName = this.dataset.dropdown;
                    const menu = document.querySelector(`[data-dropdown-menu="${dropdownName}"]`);
                    
                    // Close all other dropdowns
                    dropdownBtns.forEach(b => {
                        if (b !== this) b.classList.remove('active');
                    });
                    dropdownMenus.forEach(m => {
                        if (m !== menu) m.classList.remove('active');
                    });
                    
                    // Toggle current dropdown
                    this.classList.toggle('active');
                    menu.classList.toggle('active');
                });
            });

            // Handle pill option clicks
            document.querySelectorAll('.dropdown-pill-option').forEach(option => {
                option.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const menu = this.closest('.custom-dropdown-menu');
                    const dropdownName = menu.dataset.dropdownMenu;
                    const btn = document.querySelector(`[data-dropdown="${dropdownName}"]`);
                    const selectedText = btn.querySelector('.dropdown-selected-text');
                    const selectId = selectMapping[dropdownName];
                    const select = document.getElementById(selectId);
                    
                    // Remove selected class from siblings
                    menu.querySelectorAll('.dropdown-pill-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Add selected class to clicked option
                    this.classList.add('selected');
                    
                    // Update button text
                    selectedText.textContent = this.textContent;
                    
                    // Update hidden select and trigger change (for filter dropdowns)
                    if (select) {
                        select.value = this.dataset.value;
                        select.dispatchEvent(new Event('change'));
                    }
                    
                    // Update hidden input (for contact form dropdowns)
                    const hiddenInput = document.getElementById(dropdownName + 'Input');
                    if (hiddenInput) {
                        hiddenInput.value = this.dataset.value;
                    }
                    
                    // Close dropdown
                    btn.classList.remove('active');
                    menu.classList.remove('active');
                });
            });

            // Close dropdowns when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.filter-group')) {
                    dropdownBtns.forEach(btn => btn.classList.remove('active'));
                    dropdownMenus.forEach(menu => menu.classList.remove('active'));
                }
            });
        }

        // AI Recommendations System
        let aiRecommendationsEnabled = false;
        let userBehaviorData = {
            searches: [],
            viewedAnimations: [],
            purchases: [],
            categories: {},
            styles: {}
        };

        // Track user behavior
        function trackUserBehavior() {
            // Track search queries
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    if (this.value.length > 2) {
                        userBehaviorData.searches.push({
                            query: this.value,
                            timestamp: Date.now()
                        });
                        // Keep last 20 searches
                        if (userBehaviorData.searches.length > 20) {
                            userBehaviorData.searches.shift();
                        }
                        saveUserBehavior();
                    }
                });
            }

            // Track animation views (when clicking on cards)
            document.addEventListener('click', function(e) {
                const card = e.target.closest('.animation-card');
                if (card && card.dataset.animation) {
                    try {
                        const animation = JSON.parse(card.dataset.animation);
                        userBehaviorData.viewedAnimations.push({
                            id: animation.id,
                            title: animation.title,
                            category: animation.category,
                            style: animation.style,
                            timestamp: Date.now()
                        });
                        
                        // Track category frequency
                        userBehaviorData.categories[animation.category] = 
                            (userBehaviorData.categories[animation.category] || 0) + 1;
                        
                        // Track style frequency
                        if (animation.style) {
                            userBehaviorData.styles[animation.style] = 
                                (userBehaviorData.styles[animation.style] || 0) + 1;
                        }
                        
                        // Keep last 50 viewed animations
                        if (userBehaviorData.viewedAnimations.length > 50) {
                            userBehaviorData.viewedAnimations.shift();
                        }
                        
                        saveUserBehavior();
                    } catch (e) {
                        console.error('Error tracking animation view:', e);
                    }
                }
            });
        }

        // Save behavior to localStorage
        function saveUserBehavior() {
            try {
                localStorage.setItem('mocapwork_user_behavior', JSON.stringify(userBehaviorData));
            } catch (e) {
                console.error('Error saving user behavior:', e);
            }
        }

        // Load behavior from localStorage
        function loadUserBehavior() {
            try {
                const saved = localStorage.getItem('mocapwork_user_behavior');
                if (saved) {
                    userBehaviorData = JSON.parse(saved);
                }
            } catch (e) {
                console.error('Error loading user behavior:', e);
            }
        }

        // Generate AI recommendations using Claude API
        async function generateAIRecommendations() {
            const banner = document.getElementById('aiRecommendationsBanner');
            const loadingIndicator = document.getElementById('aiLoadingIndicator');
            const recommendationText = document.getElementById('aiRecommendationText');
            
            if (!banner) return;
            
            banner.classList.add('active');
            loadingIndicator.style.display = 'flex';
            recommendationText.style.display = 'none';
            
            try {
                // Prepare user context for AI
                const userContext = {
                    recentSearches: userBehaviorData.searches.slice(-10).map(s => s.query),
                    viewedAnimations: userBehaviorData.viewedAnimations.slice(-20),
                    topCategories: Object.entries(userBehaviorData.categories)
                        .sort((a, b) => b[1] - a[1])
                        .slice(0, 3)
                        .map(e => e[0]),
                    topStyles: Object.entries(userBehaviorData.styles)
                        .sort((a, b) => b[1] - a[1])
                        .slice(0, 2)
                        .map(e => e[0]),
                    availableAnimations: animations.map(a => ({
                        id: a.id,
                        title: a.title,
                        category: a.category,
                        style: a.style,
                        tags: a.tags
                    }))
                };

                // Call Claude API for recommendations
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1024,
                        messages: [{
                            role: 'user',
                            content: `You are an AI recommendation engine for a motion capture animation marketplace. Based on the user's behavior data, recommend 6-12 animation IDs that best match their interests and needs.

User Behavior Data:
- Recent searches: ${userContext.recentSearches.join(', ') || 'none yet'}
- Viewed animations: ${userContext.viewedAnimations.map(a => a.title).join(', ') || 'none yet'}
- Preferred categories: ${userContext.topCategories.join(', ') || 'none yet'}
- Preferred styles: ${userContext.topStyles.join(', ') || 'none yet'}

Available animations: ${JSON.stringify(userContext.availableAnimations, null, 2)}

Return ONLY a JSON object with this structure:
{
  "recommendedIds": [list of animation IDs],
  "reasoning": "brief explanation of why these animations were recommended"
}

Focus on diversity while matching user preferences. Prioritize animations the user hasn't viewed yet.`
                        }]
                    })
                });

                const data = await response.json();
                
                if (data.content && data.content[0] && data.content[0].text) {
                    const aiResponse = JSON.parse(data.content[0].text.replace(/```json|```/g, '').trim());
                    
                    // Filter and display recommendations
                    const recommendedAnimations = animations.filter(a => 
                        aiResponse.recommendedIds.includes(a.id)
                    );
                    
                    // Update UI
                    loadingIndicator.style.display = 'none';
                    recommendationText.style.display = 'block';
                    recommendationText.textContent = aiResponse.reasoning;
                    
                    // Apply recommendations to grid
                    if (recommendedAnimations.length > 0) {
                        renderAnimations(recommendedAnimations);
                        document.getElementById('resultsCount').innerHTML = 
                            `Showing <strong>${recommendedAnimations.length}</strong> AI-recommended animations`;
                    }
                } else {
                    throw new Error('Invalid AI response');
                }
                
            } catch (error) {
                console.error('AI recommendation error:', error);
                loadingIndicator.style.display = 'none';
                recommendationText.style.display = 'block';
                recommendationText.textContent = 'Showing animations based on your browsing history and preferences';
                
                // Fallback: Use simple behavior-based filtering
                const fallbackRecommendations = getFallbackRecommendations();
                if (fallbackRecommendations.length > 0) {
                    renderAnimations(fallbackRecommendations);
                    document.getElementById('resultsCount').innerHTML = 
                        `Showing <strong>${fallbackRecommendations.length}</strong> recommended animations`;
                }
            }
        }

        // Fallback recommendation logic (doesn't use AI)
        function getFallbackRecommendations() {
            if (!userBehaviorData.viewedAnimations.length && !Object.keys(userBehaviorData.categories).length) {
                // New user: show popular animations
                return animations.filter(a => a.popular).slice(0, 12);
            }
            
            // Score animations based on user behavior
            const scored = animations.map(animation => {
                let score = 0;
                
                // Prefer categories user has viewed
                if (userBehaviorData.categories[animation.category]) {
                    score += userBehaviorData.categories[animation.category] * 3;
                }
                
                // Prefer styles user likes
                if (animation.style && userBehaviorData.styles[animation.style]) {
                    score += userBehaviorData.styles[animation.style] * 2;
                }
                
                // Boost popular items
                if (animation.popular) {
                    score += 1;
                }
                
                // Penalize already viewed
                const alreadyViewed = userBehaviorData.viewedAnimations.find(v => v.id === animation.id);
                if (alreadyViewed) {
                    score -= 5;
                }
                
                return { ...animation, aiScore: score };
            });
            
            // Return top scored animations
            return scored
                .sort((a, b) => b.aiScore - a.aiScore)
                .slice(0, 12);
        }

        // Setup AI toggle
        function setupAIRecommendations() {
            const toggle = document.getElementById('aiSuggestionsToggle');
            const banner = document.getElementById('aiRecommendationsBanner');
            
            if (!toggle || !banner) return;
            
            toggle.addEventListener('change', function() {
                aiRecommendationsEnabled = this.checked;
                
                if (aiRecommendationsEnabled) {
                    generateAIRecommendations();
                } else {
                    banner.classList.remove('active');
                    // Reset to normal filtered view
                    filterAnimations();
                }
            });
        }

        // Initialize everything
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                setupCustomDropdowns();
                loadUserBehavior();
                trackUserBehavior();
                setupAIRecommendations();
            });
        } else {
            setupCustomDropdowns();
            loadUserBehavior();
            trackUserBehavior();
            setupAIRecommendations();
        }

        // Navbar scroll effect & Sticky Browse Button
        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            const stickyBtn = document.getElementById('stickyBrowseBtn');
            const librarySection = document.getElementById('library');
            
            if (window.scrollY > 20) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
            
            // Show sticky button when scrolling past library (into features section)
            if (librarySection) {
                const libraryRect = librarySection.getBoundingClientRect();
                // Show when library section scrolls above viewport
                if (libraryRect.bottom < window.innerHeight - 200) {
                    stickyBtn.classList.add('show');
                } else {
                    stickyBtn.classList.remove('show');
                }
            }
            
            // Track active section for nav links
            const sections = [
                { id: 'library', link: 'a[href="#library"]' },
                { id: 'contact', link: 'a[href="#contact"]' },
                { id: 'blog', link: 'a[href="#blog"]' },
                { id: 'faq', link: 'a[href="#faq"]' }
            ];
            
            let currentSection = '';
            const scrollPosition = window.scrollY + 150; // Offset for navbar
            
            sections.forEach(section => {
                const element = document.getElementById(section.id);
                if (element) {
                    const offsetTop = element.offsetTop;
                    const offsetBottom = offsetTop + element.offsetHeight;
                    
                    if (scrollPosition >= offsetTop && scrollPosition < offsetBottom) {
                        currentSection = section.id;
                    }
                }
            });
            
            // Update active states
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            if (currentSection) {
                const activeLink = document.querySelector(`.nav-link[href="#${currentSection}"]`);
                if (activeLink) {
                    activeLink.classList.add('active');
                }
            }
        });

        // Modal functions
        function openModal(animId) {
            const anim = animations.find(a => a.id === animId);
            if (!anim) return;
            
            const modalBody = `
                <div class="modal-thumbnail"><img src="${anim.video || anim.thumbnail}" alt="${anim.title} - Motion capture animation preview" loading="lazy"></div>
                <div class="modal-body">
                    <h2 class="modal-title">${anim.title}</h2>
                    <p class="modal-description">${anim.description || "Professional motion capture animation."}</p>
                    <div class="modal-price">$${anim.price}</div>
                    <button class="buy-now-btn"><svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" style="width:18px;height:18px;vertical-align:middle;margin-right:6px;"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line></svg>Buy Now - $${anim.price}</button>
                </div>
            `;
            
            document.getElementById("modalBody").innerHTML = modalBody;
            document.getElementById("quickViewModal").classList.remove("hidden");
        }
        
        function closeModal() {
            document.getElementById("quickViewModal").classList.add("hidden");
        }
        
        document.getElementById("quickViewModal").addEventListener("click", function(e) {
            if (e.target === this) closeModal();
        });
        
        document.addEventListener("keydown", (e) => {
            if (e.key === "Escape") closeModal();
        });


        // Load More functionality
        window.loadMore = function() {
            if (!filteredAnimations || filteredAnimations.length === 0) {
                MocapWork.error('No animations to display');
                return;
            }
            
            currentDisplayCount += itemsPerPage;
            renderAnimations(filteredAnimations);
        }
        
        window.scrollToTop = function() {
            document.getElementById('library').scrollIntoView({ behavior: 'smooth' });
        }

        // Stripe Payment Handlers
        window.handleBuyNow = async function(animationId, animationTitle, price) {
            // Check if user is logged in
            const { data: { user } } = await supabaseClient.auth.getUser();
            if (!user) {
                showAuthModal('login');
                return;
                return;
            }

            if (!stripe) {
                alert('Payment system is initializing. Please try again.');
                return;
            }

            // Show loading overlay
            const loading = document.createElement('div');
            loading.id = 'stripe-loading-overlay';
            loading.style.cssText = 'position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:9999;';
            loading.innerHTML = '<div style="background:#1a1a1a;padding:40px;border-radius:16px;text-align:center;border:2px solid rgba(100, 116, 139, 0.3);"><div style="font-size:24px;margin-bottom:16px;"><svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="#fb7d47" stroke-width="2"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg></div><div style="font-size:18px;font-weight:700;color:#fb7d47;">Processing Payment...</div><div style="color:#E7E5D3;margin-top:8px;">Please wait</div></div>';
            document.body.appendChild(loading);

            try {
                const response = await fetch(`${SUPABASE_URL}/functions/v1/create-checkout`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                    },
                    body: JSON.stringify({
                        userId: user.id,
                        animationId: animationId,
                        animationTitle: animationTitle,
                        price: price,
                        currentPage: window.location.pathname + window.location.search
                    })
                });

                const { clientSecret, error, price: returnedPrice, productName } = await response.json();

                if (error) {
                    document.body.removeChild(loading);
                    alert('Error creating checkout: ' + error);
                    return;
                }

                document.body.removeChild(loading);
                openStripeCheckout(productName || animationTitle, returnedPrice || price, clientSecret, animationId, null);
            } catch (error) {
                document.body.removeChild(loading);
                console.error('Payment error:', error);
                alert('Error processing payment. Please try again.');
            }
        }

        window.handleAddToCart = function(animationId) {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            if (!cart.includes(animationId)) {
                cart.push(animationId);
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartBadge();
                
                // Google Analytics: Add to Cart
                const animation = animations.find(a => a.id === animationId);
                if (animation && typeof gtag !== 'undefined') {
                    gtag('event', 'add_to_cart', {
                        currency: 'USD',
                        value: animation.price,
                        items: [{
                            item_id: animation.id,
                            item_name: animation.title,
                            price: animation.price,
                            quantity: 1
                        }]
                    });
                }
                
                // Show success notification
                showNotification('Added to cart!', 'success');
            } else {
                // Show already in cart notification
                showNotification('Already in cart!', 'warning');
            }
        }
        
        // Bulk selection functions
        window.toggleSelection = function(animationId) {
            const checkbox = document.getElementById(`check-${animationId}`);
            
            if (checkbox.checked) {
                if (!selectedAnimations.includes(animationId)) {
                    selectedAnimations.push(animationId);
                }
            } else {
                selectedAnimations = selectedAnimations.filter(id => id !== animationId);
            }
            
            updateBulkActions();
        }
        
        window.addSelectedToCart = function() {
            if (selectedAnimations.length === 0) {
                // Show warning notification
                showNotification('Please select animations first', 'warning');
                return;
            }
            
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            let addedCount = 0;
            let alreadyInCartCount = 0;
            
            selectedAnimations.forEach(id => {
                if (!cart.includes(id)) {
                    cart.push(id);
                    addedCount++;
                } else {
                    alreadyInCartCount++;
                }
            });
            
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartBadge();
            
            // Show success notification
            if (addedCount > 0) {
                let msg = `Added ${addedCount} animation${addedCount > 1 ? 's' : ''} to cart!`;
                if (alreadyInCartCount > 0) {
                    msg += `<br><span style="font-size:12px;opacity:0.7;">${alreadyInCartCount} already in cart</span>`;
                }
                showNotification(msg, 'success');
            } else if (alreadyInCartCount > 0) {
                showNotification('All selected items already in cart!', 'warning');
            }
            
            clearSelection();
        }
        
        window.clearSelection = function() {
            selectedAnimations = [];
            document.querySelectorAll('.card-checkbox input[type="checkbox"]').forEach(cb => {
                cb.checked = false;
            });
            updateBulkActions();
        }
        
        function updateBulkActions() {
            const selectionBar = document.getElementById('selectionBar');
            const selectionCountBadge = document.getElementById('selectionCountBadge');
            
            if (selectedAnimations.length > 0) {
                selectionBar.classList.add('active');
                selectionCountBadge.textContent = selectedAnimations.length;
            } else {
                selectionBar.classList.remove('active');
            }
        }
        
        // Cart Modal Functions
        let selectedCartItems = [];
        
        window.openCart = async function() {
            const modal = document.getElementById('cartModal');
            modal.classList.add('active');
            await renderCartItems();
        }
        
        window.closeCart = function() {
            const modal = document.getElementById('cartModal');
            modal.classList.remove('active');
            selectedCartItems = [];
            
            // Check if there's a return URL from animation-detail page
            const returnUrl = sessionStorage.getItem('returnUrl');
            if (returnUrl) {
                sessionStorage.removeItem('returnUrl');
                window.location.href = returnUrl;
            }
        }
        
        async function renderCartItems() {
            const cartIds = JSON.parse(localStorage.getItem('cart') || '[]');
            const cartItemsContainer = document.getElementById('cartItems');
            
            if (cartIds.length === 0) {
                cartItemsContainer.innerHTML = `
                    <div class="cart-empty">
                        <span style="font-size: 80px; margin-bottom: 20px; opacity: 0.3;"><svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="#fb7d47" stroke-width="2"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg></span>
                        <h3 style="margin-bottom: 12px; font-size: 16px;">Your cart is empty</h3>
                        <p style="font-size: 13px; opacity: 0.7; line-height: 1.4;">Any animations you add to your cart will be displayed here.</p>
                    </div>
                `;
                document.querySelector('.cart-total-price').innerHTML = '<span class="price-dollar">$</span>0.00';
                return;
            }
            
            try {
                const cartItems = await API.getCartItems();
                let total = 0;
                
                cartItemsContainer.innerHTML = cartItems.map(item => {
                    // Calculate sale price if applicable
                    const isOnSale = (item.on_sale || item.holiday_sale) && item.sale_percentage;
                    const finalPrice = isOnSale ? item.price * (1 - item.sale_percentage / 100) : item.price;
                    total += finalPrice;
                    
                    const imageUrl = item.video_type === 'image/gif' ? item.video_url : item.thumbnail_url;
                    return `
                        <div class="cart-item">
                            <div class="cart-item-image">
                                <img src="${imageUrl}" alt="${item.title} - Motion capture animation" loading="lazy" />
                            </div>
                            <div class="cart-item-info">
                                <div class="cart-item-title">${item.title}</div>
                                <div class="cart-item-price">
                                    ${isOnSale ? `
                                        <div style="display: flex; flex-direction: column; gap: 4px;">
                                            <span style="font-size: 12px; color: var(--text-muted); text-decoration: line-through; text-decoration-color: #EF4444;">$${item.price.toFixed(2)}</span>
                                            <span style="font-size: 18px; font-weight: 800; color: #FFFFFF;"><span class="price-dollar">$</span>${finalPrice.toFixed(2)}</span>
                                        </div>
                                    ` : `<span class="price-dollar">$</span>${item.price.toFixed(2)}`}
                                </div>
                            </div>
                            <button class="cart-item-remove" data-id="${item.id}" title="Remove from cart">
                                
                            </button>
                        </div>
                    `;
                }).join('');
                
                document.querySelector('.cart-total-price').innerHTML = '<span class="price-dollar">$</span>' + total.toFixed(2);
                
                // Add event listeners to remove buttons
                const removeButtons = cartItemsContainer.querySelectorAll('.cart-item-remove');
                removeButtons.forEach(btn => {
                    btn.addEventListener('click', async () => {
                        const animId = btn.getAttribute('data-id');
                        await removeFromCart(animId);
                    });
                });
            } catch (error) {
                console.error('Error loading cart:', error);
                cartItemsContainer.innerHTML = '<div class="cart-empty"><p>Error loading cart items</p></div>';
            }
        }
        
        // Remove single item from cart
        async function removeFromCart(animationId) {
            try {
                await API.removeFromCart(animationId);
                await renderCartItems();
                await updateCartBadge();
            } catch (error) {
                console.error('Error removing from cart:', error);
            }
        }
        
        window.toggleCartItemSelection = function(itemId) {
            const checkbox = document.getElementById(`cart-check-${itemId}`);
            
            if (checkbox.checked) {
                if (!selectedCartItems.includes(itemId)) {
                    selectedCartItems.push(itemId);
                }
            } else {
                selectedCartItems = selectedCartItems.filter(id => id !== itemId);
            }
            
            updateCartRemoveButton();
        }
        
        function updateCartRemoveButton() {
            const removeBtn = document.getElementById('removeSelectedBtn');
            if (selectedCartItems.length > 0) {
                removeBtn.style.display = 'block';
                removeBtn.textContent = `Remove Selected (${selectedCartItems.length})`;
            } else {
                removeBtn.style.display = 'none';
            }
        }
        
        window.removeSelectedFromCart = function() {
            if (selectedCartItems.length === 0) return;
            
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            cart = cart.filter(id => !selectedCartItems.includes(id));
            localStorage.setItem('cart', JSON.stringify(cart));
            
            selectedCartItems = [];
            updateCartBadge();
            renderCartItems();
        }
        
        window.proceedToCheckout = async function() {
            const cartIds = JSON.parse(localStorage.getItem('cart') || '[]');
            
            // Check if cart is empty first
            if (cartIds.length === 0) {
                // Show notification without closing cart
                showNotification('Your cart is empty!<br><span style="font-size:12px;opacity:0.7;">Add some animations to get started.</span>', 'error');
                return;
            }
            
            // Cart has items, proceed with checkout
            closeCart();
            checkoutCart();
        }

        window.checkoutCart = async function() {
            const cartIds = JSON.parse(localStorage.getItem('cart') || '[]');
            
            if (cartIds.length === 0) {
                return;
            }

            // Check if user is logged in
            const { data: { user } } = await supabaseClient.auth.getUser();
            if (!user) {
                showAuthModal('login');
                return;
                return;
            }

            if (!stripe) {
                alert('Payment system is initializing. Please try again.');
                return;
            }

            // Show loading
            const loading = document.createElement('div');
            loading.style.cssText = 'position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:9999;';
            loading.innerHTML = '<div style="background:#1a1a1a;padding:40px;border-radius:16px;text-align:center;border:2px solid rgba(100, 116, 139, 0.3);"><div style="font-size:24px;margin-bottom:16px;"><svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="#fb7d47" stroke-width="2"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg></div><div style="font-size:18px;font-weight:700;color:#fb7d47;">Processing Cart...</div><div style="color:#E7E5D3;margin-top:8px;">Please wait</div></div>';
            document.body.appendChild(loading);

            try {
                const cartItems = await API.getCartItems();
                
                const response = await fetch(`${SUPABASE_URL}/functions/v1/create-checkout`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                    },
                    body: JSON.stringify({
                        userId: user.id,
                        cartItems: cartItems.map(item => ({
                            animationId: item.id,
                            animationTitle: item.title,
                            price: item.price
                        })),
                        currentPage: window.location.pathname + window.location.search
                    })
                });

                const { clientSecret, error, price, productName } = await response.json();

                if (error) {
                    document.body.removeChild(loading);
                    alert('Error creating checkout: ' + error);
                    return;
                }

                document.body.removeChild(loading);
                openStripeCheckout(productName || `Cart (${cartItems.length} items)`, price, clientSecret, null, cartItems.map(item => ({ animationId: item.id, price: item.price })));
            } catch (error) {
                document.body.removeChild(loading);
                console.error('Cart checkout error:', error);
                alert('Error processing cart. Please try again.');
            }
        }
        
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            
            let colors = {
                success: {
                    bg: 'rgba(0, 212, 255, 0.15)',
                    border: 'rgba(251, 125, 71, 0.3)',
                    text: '#00D4FF',
                    icon: '<svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="#fb7d47" stroke-width="2"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>'
                },
                warning: {
                    bg: 'rgba(245, 158, 11, 0.15)',
                    border: 'rgba(245, 158, 11, 0.3)',
                    text: '#fb7d47',
                    icon: '<svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#fb7d47" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>'
                },
                error: {
                    bg: 'rgba(255, 107, 107, 0.15)',
                    border: 'rgba(255, 107, 107, 0.3)',
                    text: '#FF6B6B',
                    icon: '<svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#FF6B6B" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>'
                }
            };
            
            const style = colors[type] || colors.success;
            
            notification.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                background: ${style.bg};
                backdrop-filter: blur(20px);
                border: 2px solid ${style.border};
                border-radius: 50px;
                padding: 14px 24px;
                z-index: 99999;
                animation: slideInRight 0.3s ease;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
                display: flex;
                align-items: center;
                gap: 10px;
            `;
            
            notification.innerHTML = `
                <span style="font-size: 20px;">${style.icon}</span>
                <div style="color: ${style.text}; font-weight: 600; font-size: 14px;">${message}</div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => {
                    if (notification.parentNode) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Load animations from Supabase
        async function loadAnimations() {
            try {
                animations = await API.getAnimations();
                // Add original index to each animation for stable sorting
                animations = animations.map((anim, index) => ({ ...anim, _originalIndex: index }));
                window.animations = animations; // Make available in console for debugging
                
                MocapWork.success(`Loaded ${animations.length} animations`);
                
                // Check for URL parameters (from animation detail page tags/category)
                const urlParams = new URLSearchParams(window.location.hash.split('?')[1] || '');
                const categoryParam = urlParams.get('category');
                const searchParam = urlParams.get('search');
                
                if (categoryParam) {
                    // Set category filter
                    const categorySelect = document.getElementById('categoryFilter');
                    if (categorySelect) {
                        categorySelect.value = categoryParam;
                    }
                    // Scroll to library
                    setTimeout(() => {
                        document.getElementById('library')?.scrollIntoView({ behavior: 'smooth' });
                    }, 100);
                } else if (searchParam) {
                    // Set search query
                    const searchInput = document.getElementById('searchInput');
                    if (searchInput) {
                        searchInput.value = searchParam;
                    }
                    // Scroll to library
                    setTimeout(() => {
                        document.getElementById('library')?.scrollIntoView({ behavior: 'smooth' });
                    }, 100);
                }
                
                // Filter and render animations
                if (categoryParam || searchParam) {
                    filterAnimations();
                } else {
                    // Initial load - set filteredAnimations
                    filteredAnimations = animations;
                    renderAnimations(animations);
                }
            } catch (error) {
                console.error('Error loading animations:', error);
                alert('Error loading animations. Please make sure you have run the SQL schema in Supabase.');
            }
        }

        // Update filter function to work with database
        // Update cart badge
        async function updateCartBadge() {
            try {
                const cartItems = await API.getCartItems();
                const badge = document.querySelector('.cart-badge');
                const cartIcon = document.querySelector('.cart-icon');
                
                if (badge) {
                    badge.textContent = cartItems.length;
                    badge.setAttribute('data-count', cartItems.length);
                }
                
                // Add/remove has-items class for slow animation
                if (cartIcon) {
                    if (cartItems.length > 0) {
                        cartIcon.classList.add('has-items');
                    } else {
                        cartIcon.classList.remove('has-items');
                    }
                }
                
                // Update hover dropdown
                updateCartHoverDropdown(cartItems);
            } catch (error) {
                console.error('Error updating cart badge:', error);
            }
        }

        // Update cart hover dropdown
        function updateCartHoverDropdown(cartItems) {
            const cartHoverItems = document.getElementById('cartHoverItems');
            const cartHoverTotal = document.getElementById('cartHoverTotal');
            const checkoutBtn = document.getElementById('cartHoverCheckoutBtn');
            
            if (!cartHoverItems || !cartHoverTotal) return;
            
            if (cartItems.length === 0) {
                // Show empty state
                cartHoverItems.style.overflowY = 'hidden';
                cartHoverItems.innerHTML = `
                    <div class="cart-hover-empty">
                        <div class="cart-hover-empty-icon"><svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="#fb7d47" stroke-width="2"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg></div>
                        <div>Your cart is empty</div>
                        <div style="font-size: 12px; margin-top: 8px; opacity: 0.7;">Any animations you add to your cart will be displayed here.</div>
                    </div>
                `;
                cartHoverTotal.innerHTML = '<span class="price-dollar">$</span>0.00';
                if (checkoutBtn) checkoutBtn.style.display = 'none';
            } else {
                // Show cart items
                cartHoverItems.style.overflowY = 'auto';
                let total = 0;
                let html = '';
                
                cartItems.forEach(item => {
                    const isOnSale = (item.on_sale || item.holiday_sale) && item.sale_percentage;
                    const finalPrice = isOnSale ? item.price * (1 - item.sale_percentage / 100) : item.price;
                    total += finalPrice;
                    
                    html += `
                        <div class="cart-hover-item" data-slug="${item.slug}">
                            <img src="${item.video_url}" alt="${item.title}" class="cart-hover-item-img">
                            <div class="cart-hover-item-info">
                                <div class="cart-hover-item-title">${item.title}</div>
                                <div class="cart-hover-item-price"><span class="price-dollar">$</span>${finalPrice.toFixed(2)}</div>
                            </div>
                            <button class="cart-hover-item-remove" data-id="${item.id}" title="Remove from cart">
                                
                            </button>
                        </div>
                    `;
                });
                
                cartHoverItems.innerHTML = html;
                cartHoverTotal.innerHTML = '<span class="price-dollar">$</span>' + total.toFixed(2);
                if (checkoutBtn) checkoutBtn.style.display = 'block';
                
                // Add event listeners to items and remove buttons
                const items = cartHoverItems.querySelectorAll('.cart-hover-item');
                items.forEach(item => {
                    const slug = item.getAttribute('data-slug');
                    const removeBtn = item.querySelector('.cart-hover-item-remove');
                    
                    item.addEventListener('click', (e) => {
                        if (!e.target.closest('.cart-hover-item-remove')) {
                            window.location.href = `animation-detail.html?slug=${slug}`;
                        }
                    });
                    
                    if (removeBtn) {
                        removeBtn.addEventListener('click', async (e) => {
                            e.stopPropagation();
                            const animId = removeBtn.getAttribute('data-id');
                            await removeFromCartHover(animId);
                        });
                    }
                });
            }
        }

        // Remove item from cart (from hover dropdown)
        window.removeFromCartHover = async function(animationId) {
            try {
                await API.removeFromCart(animationId);
                await updateCartBadge();
                showNotification('Removed from cart', 'warning');
            } catch (error) {
                console.error('Error removing from cart:', error);
            }
        }

        // Handle checkout from cart hover dropdown
        window.handleCartHoverCheckout = async function() {
            const cartIds = JSON.parse(localStorage.getItem('cart') || '[]');
            
            if (cartIds.length === 0) {
                alert('Your cart is empty');
                return;
            }

            // Check if user is logged in
            const { data: { user } } = await supabaseClient.auth.getUser();
            if (!user) {
                document.getElementById('cartHoverDropdown').style.display = 'none';
                showAuthModal('login');
                return;
            }

            if (!stripe) {
                alert('Payment system is initializing. Please try again.');
                return;
            }

            // Show loading
            const loading = document.createElement('div');
            loading.style.cssText = 'position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:9999;';
            loading.innerHTML = '<div style="background:#1a1a1a;padding:40px;border-radius:16px;text-align:center;border:2px solid rgba(100, 116, 139, 0.3);"><div style="font-size:24px;margin-bottom:16px;"><svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="#fb7d47" stroke-width="2"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg></div><div style="font-size:18px;font-weight:700;color:#fb7d47;">Processing Cart...</div><div style="color:#E7E5D3;margin-top:8px;">Please wait</div></div>';
            document.body.appendChild(loading);

            try {
                const cartItems = await API.getCartItems();
                
                const response = await fetch(`${SUPABASE_URL}/functions/v1/create-checkout`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                    },
                    body: JSON.stringify({
                        userId: user.id,
                        cartItems: cartItems.map(item => {
                            const isOnSale = (item.on_sale || item.holiday_sale) && item.sale_percentage;
                            const finalPrice = isOnSale ? item.price * (1 - item.sale_percentage / 100) : item.price;
                            return {
                                animationId: item.id,
                                animationTitle: item.title,
                                price: finalPrice
                            };
                        }),
                        currentPage: window.location.pathname + window.location.search
                    })
                });

                const { clientSecret, error, price, productName } = await response.json();
                
                if (!clientSecret) {
                    document.body.removeChild(loading);
                    alert('Error creating checkout session. Please try again.');
                    return;
                }

                if (error) {
                    document.body.removeChild(loading);
                    alert('Error: ' + error);
                    return;
                }

                document.body.removeChild(loading);
                const mappedCartItems = cartItems.map(item => {
                    const isOnSale = (item.on_sale || item.holiday_sale) && item.sale_percentage;
                    const finalPrice = isOnSale ? item.price * (1 - item.sale_percentage / 100) : item.price;
                    return { animationId: item.id, price: finalPrice };
                });
                openStripeCheckout(productName || `Selected Cart Items (${cartItems.length})`, price, clientSecret, null, mappedCartItems);
            } catch (error) {
                document.body.removeChild(loading);
                console.error('Cart checkout error:', error);
                alert('Error processing cart. Please try again.');
            }
        }

        // Position and show/hide cart hover dropdown
        document.addEventListener('DOMContentLoaded', function() {
            const cartIcon = document.getElementById('cartIconNav');
            const cartHoverDropdown = document.getElementById('cartHoverDropdown');
            let hideTimeout;

            function positionCartDropdown() {
                if (!cartIcon || !cartHoverDropdown) return;
                
                const rect = cartIcon.getBoundingClientRect();
                cartHoverDropdown.style.top = (rect.bottom + 12) + 'px';
                cartHoverDropdown.style.right = (window.innerWidth - rect.right) + 'px';
            }

            function showCartDropdown() {
                clearTimeout(hideTimeout);
                positionCartDropdown();
                cartHoverDropdown.style.display = 'block';
            }

            function hideCartDropdown() {
                hideTimeout = setTimeout(() => {
                    cartHoverDropdown.style.display = 'none';
                }, 100);
            }

            if (cartIcon && cartHoverDropdown) {
                cartIcon.addEventListener('mouseenter', showCartDropdown);
                cartIcon.addEventListener('mouseleave', hideCartDropdown);
                cartHoverDropdown.addEventListener('mouseenter', () => clearTimeout(hideTimeout));
                cartHoverDropdown.addEventListener('mouseleave', hideCartDropdown);
                
                // Reposition on scroll/resize
                window.addEventListener('scroll', positionCartDropdown);
                window.addEventListener('resize', positionCartDropdown);
            }
        });

        // Initial render - Load from database with progressive loading bar
        const loadingBar = document.getElementById('loadingBar');
        
        // Jump to 60% when scripts are loaded
        if (loadingBar) loadingBar.style.width = '60%';
        
        // Load offer/banner visibility settings from database
        async function loadOfferSettings() {
            try {
                const { data: settings, error } = await supabaseClient
                    .from('site_settings')
                    .select('*');

                if (error || !settings) return;

                const settingsMap = {};
                settings.forEach(s => settingsMap[s.key] = s.value === 'true');

                // Premium Banner (above library)
                if (settingsMap['premium_banner'] === false) {
                    const premiumBanner = document.querySelector('.premium-banner');
                    if (premiumBanner) premiumBanner.style.display = 'none';
                }

                // Rewards Banner (below library)
                if (settingsMap['rewards_banner'] === false) {
                    const rewardsBanner = document.querySelector('.rewards-banner');
                    if (rewardsBanner) rewardsBanner.style.display = 'none';
                }

                // AI Recommendations toggle
                if (settingsMap['ai_recommendations'] === false) {
                    const aiToggle = document.querySelector('.ai-toggle-label');
                    if (aiToggle) aiToggle.parentElement.style.display = 'none';
                    const aiBanner = document.querySelector('.ai-recommendations-banner');
                    if (aiBanner) aiBanner.style.display = 'none';
                }

                // CTA Banner ("Can't Find the Perfect Animation?")
                if (settingsMap['cta_banner'] === false) {
                    const ctaBanner = document.querySelector('.cta-banner');
                    if (ctaBanner) ctaBanner.style.display = 'none';
                }

                // Special Offer Button (floating side CTA)
                if (settingsMap['special_offer_button'] === false) {
                    const floatingCta = document.querySelector('.floating-side-cta');
                    if (floatingCta) floatingCta.style.display = 'none';
                }
            } catch (e) {
                // Silently fail - show all banners by default
            }
        }
        
        Promise.all([
            loadAnimations().then(() => {
                // Jump to 85% when animations loaded
                if (loadingBar) loadingBar.style.width = '85%';
            }),
            checkAuth(),
            loadOfferSettings()
        ]).then(() => {
            // Page fully loaded - complete to 100%
            if (loadingBar) {
                loadingBar.style.width = '100%';
                
                // Fade out and remove
                setTimeout(() => {
                    loadingBar.style.opacity = '0';
                    loadingBar.style.transition = 'width 0.3s ease, opacity 0.3s ease';
                    setTimeout(() => {
                        loadingBar.style.display = 'none';
                    }, 300);
                }, 200);
            }
            
            // Update cart badge and dropdown
            updateCartBadge();
        }).catch(error => {
            console.error('Error loading page:', error);
            // On error, complete in red
            if (loadingBar) {
                loadingBar.style.width = '100%';
                loadingBar.style.background = 'linear-gradient(90deg, #ef4444, #F59E0B)';
                setTimeout(() => {
                    loadingBar.style.opacity = '0';
                    setTimeout(() => loadingBar.style.display = 'none', 300);
                }, 500);
            }
        });

        // Check authentication status
        async function checkAuth() {
            const { data: { session } } = await supabaseClient.auth.getSession();
            if (session) {
                document.getElementById('authLinks').style.display = 'none';
                document.getElementById('profileIcon').style.display = 'block';
                // Hide mobile auth link when logged in
                const mobileAuthLink = document.getElementById('mobileAuthLink');
                if (mobileAuthLink) mobileAuthLink.style.display = 'none';
                // Hide hero Sign Up button when logged in
                const heroSignUpBtn = document.getElementById('heroSignUpBtn');
                if (heroSignUpBtn) heroSignUpBtn.style.display = 'none';
                
                // Check if user is admin
                checkAdminStatus(session.user.id);
            }
            return session?.user || null;
        }

        // Check if user has admin role and show admin button
        async function checkAdminStatus(userId) {
            const { data: userRole, error } = await supabaseClient
                .from('user_roles')
                .select('role')
                .eq('user_id', userId)
                .single();
            
            if (userRole && userRole.role === 'admin') {
                const adminBtn = document.getElementById('adminDashboardBtn');
                if (adminBtn) {
                    adminBtn.style.display = 'inline-flex';
                }
            }
        }

        window.logout = async function() {
            await supabaseClient.auth.signOut();
            location.reload();
        }

        // Unified notification system
        window.showNotification = function(message, type = 'success') {
            const colors = {
                success: {
                    bg: 'rgba(15, 15, 15, 0.98)',
                    border: 'rgba(251, 125, 71, 0.5)',
                    text: '#fb7d47',
                    shadow: 'rgba(251, 125, 71, 0.3)'
                },
                warning: {
                    bg: 'rgba(15, 15, 15, 0.98)',
                    border: 'rgba(251, 125, 71, 0.5)',
                    text: '#fb7d47',
                    shadow: 'rgba(251, 125, 71, 0.3)'
                },
                error: {
                    bg: 'rgba(15, 15, 15, 0.98)',
                    border: 'rgba(255, 107, 107, 0.5)',
                    text: '#FF6B6B',
                    shadow: 'rgba(255, 107, 107, 0.3)'
                }
            };
            
            const style = colors[type] || colors.success;
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                background: ${style.bg};
                border: 2px solid ${style.border};
                border-radius: 12px;
                padding: 16px 24px;
                z-index: 99999;
                animation: slideInRight 0.3s ease;
                box-shadow: 0 8px 24px ${style.shadow};
                backdrop-filter: blur(20px);
                font-family: 'DM Sans', sans-serif;
            `;
            notification.innerHTML = `<div style="color: ${style.text}; font-weight: 600; font-size: 14px;">${message}</div>`;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 2500);
        }

        // Check URL hash for modal triggers (from animation-detail page)
        window.addEventListener('load', function() {
            const hash = window.location.hash;
            
            // Handle auth and cart modals
            if (hash.startsWith('#auth=')) {
                // Force scroll to top for auth modal
                window.scrollTo(0, 0);
                const authType = hash.split('=')[1];
                showAuthModal(authType);
            } else if (hash === '#cart') {
                // Force scroll to top for cart modal
                window.scrollTo(0, 0);
                openCart();
            } else if (hash === '#checkout') {
                // Handle checkout from other pages
                window.scrollTo(0, 0);
                handleCartHoverCheckout();
            } else if (hash === '#library' || hash === '#contact' || hash === '#faq') {
                // Scroll to the section after a brief delay to ensure page is loaded
                setTimeout(() => {
                    const section = document.querySelector(hash);
                    if (section) {
                        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }, 100);
            } else {
                // No hash or unknown hash - scroll to top
                window.scrollTo(0, 0);
            }
        });

        // Auth Modal Functions
        window.showAuthModal = function(tab = 'login') {
            // Close auth required modal first
            document.getElementById('authRequiredModal').classList.remove('active');
            // Show auth modal
            document.getElementById('authModal').classList.add('active');
            switchAuthTab(tab);
        }

        window.closeAuthModal = function() {
            document.getElementById('authModal').classList.remove('active');
            
            // Check if there's a return URL from animation-detail page
            const returnUrl = sessionStorage.getItem('returnUrl');
            if (returnUrl) {
                sessionStorage.removeItem('returnUrl');
                window.location.href = returnUrl;
                return;
            }
            
            // Clear forms
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
            document.getElementById('signupEmail').value = '';
            document.getElementById('signupPassword').value = '';
            document.getElementById('signupConfirmPassword').value = '';
            document.getElementById('loginMessage').innerHTML = '';
            document.getElementById('signupMessage').innerHTML = '';
        }

        window.switchAuthTab = function(tab) {
            // Update tabs
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            if (tab === 'login') {
                document.querySelectorAll('.auth-tab')[0].classList.add('active');
                document.getElementById('loginForm').classList.add('active');
            } else {
                document.querySelectorAll('.auth-tab')[1].classList.add('active');
                document.getElementById('signupForm').classList.add('active');
            }
        }

        window.togglePassword = function(inputId, button) {
            const input = document.getElementById(inputId);
            const icon = button.querySelector('.eye-icon');
            
            if (input.type === 'password') {
                input.type = 'text';
                // Change to eye-slash icon
                icon.innerHTML = '<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>';
            } else {
                input.type = 'password';
                // Change back to eye icon
                icon.innerHTML = '<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>';
            }
        }

        window.handleLogin = async function(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const loginBtn = document.getElementById('loginBtn');
            const messageDiv = document.getElementById('loginMessage');
            const loadingBar = document.getElementById('authLoadingBar');
            
            // Show and animate loading bar
            loadingBar.style.display = 'block';
            loadingBar.style.width = '30%';
            
            loginBtn.disabled = true;
            loginBtn.textContent = 'Signing in...';
            messageDiv.innerHTML = '';
            
            try {
                // Progress to 60%
                setTimeout(() => { loadingBar.style.width = '60%'; }, 200);
                
                const { data, error } = await supabaseClient.auth.signInWithPassword({
                    email,
                    password
                });
                
                if (error) throw error;
                
                // Complete to 100%
                loadingBar.style.width = '100%';
                
                messageDiv.innerHTML = '<div class="auth-message success">Login successful! Redirecting...</div>';
                setTimeout(() => {
                    closeAuthModal();
                    location.reload();
                }, 1000);
                
            } catch (error) {
                // Hide loading bar on error
                loadingBar.style.width = '0';
                setTimeout(() => { loadingBar.style.display = 'none'; }, 300);
                
                messageDiv.innerHTML = `<div class="auth-message error">${error.message}</div>`;
                loginBtn.disabled = false;
                loginBtn.textContent = 'Sign In';
            }
        }

        window.handleSignup = async function(event) {
            event.preventDefault();
            
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupConfirmPassword').value;
            const signupBtn = document.getElementById('signupBtn');
            const messageDiv = document.getElementById('signupMessage');
            const loadingBar = document.getElementById('authLoadingBar');
            
            if (password !== confirmPassword) {
                messageDiv.innerHTML = '<div class="auth-message error">Passwords do not match</div>';
                return;
            }
            
            if (password.length < 6) {
                messageDiv.innerHTML = '<div class="auth-message error">Password must be at least 6 characters</div>';
                return;
            }
            
            // Show and animate loading bar
            loadingBar.style.display = 'block';
            loadingBar.style.width = '30%';
            
            signupBtn.disabled = true;
            signupBtn.textContent = 'Creating account...';
            messageDiv.innerHTML = '';
            
            try {
                // Progress to 60%
                setTimeout(() => { loadingBar.style.width = '60%'; }, 200);
                
                const { data, error } = await supabaseClient.auth.signUp({
                    email,
                    password
                });
                
                if (error) throw error;
                
                // Complete to 100%
                loadingBar.style.width = '100%';
                
                // Google Analytics: Sign Up Event
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'sign_up', {
                        method: 'Email'
                    });
                }
                
                messageDiv.innerHTML = '<div class="auth-message success">Account created! Logging you in...</div>';
                setTimeout(() => {
                    closeAuthModal();
                    location.reload();
                }, 1500);
                
            } catch (error) {
                // Hide loading bar on error
                loadingBar.style.width = '0';
                setTimeout(() => { loadingBar.style.display = 'none'; }, 300);
                
                messageDiv.innerHTML = `<div class="auth-message error">${error.message}</div>`;
                signupBtn.disabled = false;
                signupBtn.textContent = 'Create Account';
            }
        }

        // Handle My Library click - show modal if not logged in
        window.handleDashboardClick = async function(event) {
            event.preventDefault();
            
            const { data: { user } } = await supabaseClient.auth.getUser();
            
            if (user) {
                // User is logged in, go to dashboard
                window.location.href = 'dashboard.html';
            } else {
                // User not logged in, show login modal
                showAuthModal('login');
            }
        }

        window.closeAuthRequiredModal = function(event) {
            if (event) event.preventDefault();
            document.getElementById('authRequiredModal').classList.remove('active');
        }

        // Mobile menu toggle
        // Mobile menu toggle
        window.toggleMobileMenu = function() {
            const navLinks = document.querySelector('.nav-links');
            navLinks.classList.toggle('active');
        }
        
        document.querySelector('.hamburger-menu').addEventListener('click', toggleMobileMenu);
        
        // Close mobile menu when clicking outside
        document.addEventListener('click', function(e) {
            const navLinks = document.querySelector('.nav-links');
            const mobileMenuBtn = document.querySelector('.hamburger-menu');
            
            if (navLinks.classList.contains('active') && 
                !navLinks.contains(e.target) && 
                !mobileMenuBtn.contains(e.target)) {
                navLinks.classList.remove('active');
            }
        });

        // Custom request form handler
        document.getElementById('customRequestForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = {
                name: this.name.value,
                email: this.email.value,
                projectType: this.projectType.value,
                description: this.description.value,
                budget: this.budget.value || null
            };
            
            const submitBtn = this.querySelector('.submit-btn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" fill="none" stroke-width="2"><animate attributeName="stroke-dasharray" values="0 63;63 63" dur="1s" repeatCount="indefinite"/></circle></svg><span>Submitting...</span>';
            
            try {
                const result = await API.submitCustomRequest(formData);
                
                if (result.success) {
                    alert('Thank you for your request! We\'ll get back to you within 24 hours.');
                    this.reset();
                } else {
                    alert('Error submitting request. Please try again.');
                }
            } catch (error) {
                console.error('Form error:', error);
                alert('Error submitting request. Please try again.');
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/></svg><span>Submit Request</span>';
            }
        });
        
        // Advanced Search Functionality (in navbar)
        const searchInputNav = document.getElementById('searchInputNav');
        const searchClearNav = document.getElementById('searchClearNav');
        const searchDropdownNav = document.getElementById('searchDropdownNav');
        
        let searchTimeout;
        
        if (searchInputNav) {
            // Show popular animations on focus
            searchInputNav.addEventListener('focus', function() {
                const query = this.value.trim();
                if (query.length === 0) {
                    showPopularAnimationsNav();
                }
            });

            searchInputNav.addEventListener('input', function(e) {
                const query = e.target.value.trim();
                
                // Show/hide clear button
                searchClearNav.style.display = query ? 'block' : 'none';
                
                // Debounce search
                clearTimeout(searchTimeout);
                
                if (query.length === 0) {
                    showPopularAnimationsNav();
                    return;
                }
                
                // Start searching from first character
                searchTimeout = setTimeout(() => {
                    performSearchNav(query);
                }, 150);
            });

            // Enter key for navbar search
            searchInputNav.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const query = e.target.value.trim();
                    if (query) {
                        applySearchNav(query);
                    }
                }
            });
        }
        
        function showPopularAnimationsNav() {
            // Get popular/featured animations
            const popularAnims = animations.slice(0, 5);
            
            let html = '';
            
            // Popular searches
            html += '<div class="search-section">';
            html += '<div class="search-section-title">SUGGESTED SEARCHES</div>';
            const popularSearches = ['sword', 'fantasy sword', 'sword pack', 'walking'];
            popularSearches.forEach(term => {
                html += `<div class="search-result-item" onclick="applySearchNav('${term}')">`;
                html += '<div class="search-result-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="#fb7d47" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg></div>';
                html += `<div class="search-result-text"><strong>${term}</strong></div>`;
                html += '</div>';
            });
            html += '</div>';
            
            // Popular animations
            if (popularAnims.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">POPULAR ANIMATIONS</div>';
                popularAnims.forEach(anim => {
                    const imageUrl = anim.video_type === 'image/gif' ? anim.video_url : anim.thumbnail_url;
                    const isOnSale = (anim.on_sale || anim.holiday_sale) && anim.sale_percentage;
                    const finalPrice = isOnSale ? anim.price * (1 - anim.sale_percentage / 100) : anim.price;
                    
                    html += `
                        <div class="search-result-item" onclick="window.location.href='animation-detail.html?slug=${anim.slug}'" style="display: flex; align-items: center; gap: 12px; padding: 12px 16px; cursor: pointer; border-bottom: 2px solid rgba(0, 212, 255, 0.1); transition: all 0.2s;">
                            <img src="${imageUrl}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 6px;">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 4px;">${anim.title}</div>
                                <div style="font-size: 14px; color: #fb7d47; font-weight: 600;">$${finalPrice.toFixed(2)}</div>
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
            }
            
            searchDropdownNav.innerHTML = html;
            searchDropdownNav.classList.add('active');
        }
        
        function performSearchNav(query) {
            const lowerQuery = query.toLowerCase();
            
            // Filter animations (handle null values)
            const results = animations.filter(anim => 
                (anim.title && anim.title.toLowerCase().includes(lowerQuery)) ||
                (anim.category && anim.category.toLowerCase().includes(lowerQuery)) ||
                (anim.style && anim.style.toLowerCase().includes(lowerQuery))
            ).slice(0, 5);
            
            // Build dropdown
            let html = '';
            
            // Suggested searches first
            const suggestions = [
                query,
                'fantasy ' + query,
                query + ' pack',
                'walking'
            ].slice(0, 4);
            
            if (suggestions.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">SUGGESTED SEARCHES</div>';
                suggestions.forEach(sugg => {
                    const highlighted = sugg.replace(new RegExp(query, 'gi'), match => `<strong>${match}</strong>`);
                    html += `<div class="search-result-item" onclick="applySearchNav('${sugg}')">`;
                    html += '<div class="search-result-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="#fb7d47" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg></div>';
                    html += `<div class="search-result-text">${highlighted}</div>`;
                    html += '</div>';
                });
                html += '</div>';
            }
            
            // Animation results with thumbnails
            if (results.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">ANIMATIONS</div>';
                results.forEach(anim => {
                    const imageUrl = anim.video_type === 'image/gif' ? anim.video_url : anim.thumbnail_url;
                    const isOnSale = (anim.on_sale || anim.holiday_sale) && anim.sale_percentage;
                    const finalPrice = isOnSale ? anim.price * (1 - anim.sale_percentage / 100) : anim.price;
                    
                    html += `
                        <div class="search-result-item" onclick="window.location.href='animation-detail.html?slug=${anim.slug}'" style="display: flex; align-items: center; gap: 12px; padding: 12px 16px; cursor: pointer; border-bottom: 2px solid rgba(0, 212, 255, 0.1); transition: all 0.2s;">
                            <img src="${imageUrl}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 6px;">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 4px;">${anim.title}</div>
                                <div style="font-size: 14px; color: #fb7d47; font-weight: 600;">$${finalPrice.toFixed(2)}</div>
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
            }
            
            searchDropdownNav.innerHTML = html;
            searchDropdownNav.classList.add('active');
        }
        
        window.applySearchNav = function(searchTerm) {
            searchInputNav.value = searchTerm;
            const librarySearchInput = document.getElementById('searchInput');
            if (librarySearchInput) {
                librarySearchInput.value = searchTerm;
            }
            filterAnimations();
            searchDropdownNav.classList.remove('active');
            // Scroll to above animation grid
            const animationGrid = document.getElementById('animationGrid');
            if (animationGrid) {
                const yOffset = -100; // 100px above the grid
                const y = animationGrid.getBoundingClientRect().top + window.pageYOffset + yOffset;
                window.scrollTo({ top: y, behavior: 'smooth' });
            }
        }
        
        window.clearSearchNav = function() {
            searchInputNav.value = '';
            searchClearNav.style.display = 'none';
            searchDropdownNav.classList.remove('active');
        }
        
        // Mobile search handler with dropdown
        const mobileSearchInput = document.getElementById('mobileSearch');
        const searchDropdownMobile = document.getElementById('searchDropdownMobile');
        let mobileSearchTimeout;

        if (mobileSearchInput) {
            mobileSearchInput.addEventListener('input', function(e) {
                const query = e.target.value.trim();
                
                clearTimeout(mobileSearchTimeout);
                
                if (query.length === 0) {
                    searchDropdownMobile.style.display = 'none';
                    return;
                }
                
                if (query.length < 2) return;
                
                mobileSearchTimeout = setTimeout(() => {
                    performMobileSearch(query);
                }, 300);
            });

            // Enter key for mobile search
            mobileSearchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const query = e.target.value.trim();
                    if (query) {
                        applyMobileSearch(query);
                    }
                }
            });
        }

        function performMobileSearch(query) {
            const lowerQuery = query.toLowerCase();
            
            const results = animations.filter(anim => 
                anim.title.toLowerCase().includes(lowerQuery) ||
                anim.category.toLowerCase().includes(lowerQuery) ||
                anim.style.toLowerCase().includes(lowerQuery)
            ).slice(0, 5);
            
            let html = '';
            
            // Animation results with thumbnails first
            if (results.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">Animations</div>';
                results.forEach(anim => {
                    const imageUrl = anim.video_type === 'image/gif' ? anim.video_url : anim.thumbnail_url;
                    const isOnSale = (anim.on_sale || anim.holiday_sale) && anim.sale_percentage;
                    const finalPrice = isOnSale ? anim.price * (1 - anim.sale_percentage / 100) : anim.price;
                    
                    html += `
                        <div class="search-result-item" onclick="window.location.href='animation-detail.html?slug=${anim.slug}'" style="display: flex; align-items: center; gap: 12px; padding: 12px 16px; cursor: pointer; border-bottom: 2px solid rgba(0, 212, 255, 0.1); transition: all 0.2s;">
                            <img src="${imageUrl}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 6px;">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 4px;">${anim.title}</div>
                                <div style="font-size: 14px; color: #fb7d47; font-weight: 600;">$${finalPrice.toFixed(2)}</div>
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
            }
            
            // Suggested searches below
            const suggestions = [
                query,
                'fantasy ' + query,
                query + ' pack',
                'walking',
                'running',
                'combat'
            ].slice(0, 4);
            
            if (suggestions.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">Suggested Searches</div>';
                suggestions.forEach(sugg => {
                    const highlighted = sugg.replace(new RegExp(query, 'gi'), match => `<strong>${match}</strong>`);
                    html += `<div class="search-result-item" onclick="applyMobileSearch('${sugg}')">`;
                    html += '<div class="search-result-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="#fb7d47" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg></div>';
                    html += `<div class="search-result-text">${highlighted}</div>`;
                    html += '</div>';
                });
                html += '</div>';
            }
            
            searchDropdownMobile.innerHTML = html;
            searchDropdownMobile.style.display = 'block';
        }

        window.applyMobileSearch = function(searchTerm) {
            const librarySearchInput = document.getElementById('searchInput');
            if (librarySearchInput) {
                librarySearchInput.value = searchTerm;
            }
            filterAnimations();
            searchDropdownMobile.style.display = 'none';
            toggleMobileMenu();
            
            // Scroll to animation grid
            setTimeout(() => {
                const animationGrid = document.getElementById('animationGrid');
                if (animationGrid) {
                    const yOffset = -100;
                    const y = animationGrid.getBoundingClientRect().top + window.pageYOffset + yOffset;
                    window.scrollTo({ top: y, behavior: 'smooth' });
                }
            }, 300);
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (searchInputNav && !e.target.closest('.nav-search')) {
                searchDropdownNav.classList.remove('active');
            }
        });
        
        updateCartBadge();
        })(); // End of IIFE

        // ==========================================
        // 3D VIEWER MODAL FUNCTIONS
        // ==========================================
        function open3DViewer(glbFile, title) {
            const modal = document.getElementById('viewer3dModal');
            const iframe = document.getElementById('viewer3dFrame');
            
            // Use the viewer page with optional glb parameter
            let viewerUrl = 'viewer.html';
            if (glbFile && glbFile !== 'undefined' && glbFile !== '') {
                viewerUrl += '?model=' + encodeURIComponent(glbFile);
            }
            
            iframe.src = viewerUrl;
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function close3DViewer() {
            const modal = document.getElementById('viewer3dModal');
            const iframe = document.getElementById('viewer3dFrame');
            
            modal.classList.remove('active');
            iframe.src = '';
            document.body.style.overflow = '';
        }

        // Close modal on escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const modal = document.getElementById('viewer3dModal');
                if (modal && modal.classList.contains('active')) {
                    close3DViewer();
                }
            }
        });

        // Close modal when clicking overlay
        document.getElementById('viewer3dModal').addEventListener('click', function(e) {
            if (e.target === this) {
                close3DViewer();
            }
        });
    </script>
    <!-- Thank You Modal -->
    <div id="thankYouModal" class="auth-modal">
        <div class="auth-modal-overlay" onclick="closeThankYouModal()"></div>
        <div class="auth-modal-box" style="max-width: 500px;">
            <button class="auth-close" onclick="closeThankYouModal()"></button>
            
            <div style="padding: 32px;">
                <!-- Success Icon -->
                <div style="width: 60px; height: 60px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.05)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
                    <svg width="30" height="30" fill="none" stroke="#10B981" stroke-width="3" viewBox="0 0 24 24">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                </div>

                <h2 style="font-size: 28px; font-weight: 800; font-family: 'Sora', sans-serif; margin-bottom: 6px; text-align: center; background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    Payment Successful!
                </h2>
                <p style="color: var(--text-secondary); margin-bottom: 24px; font-size: 14px; text-align: center;">
                    Thank you for your purchase. Your download is ready!
                </p>

                <!-- Loading State -->
                <div id="thankYouLoading" style="text-align: center; padding: 20px;">
                    <div class="spinner" style="margin: 0 auto 12px;"></div>
                    <span style="color: var(--text-muted); font-size: 14px;">Preparing your download...</span>
                </div>

                <!-- Animation Preview -->
                <div id="thankYouPreview" style="display: none; margin-bottom: 20px;">
                    <div style="background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 12px; border: 2px solid rgba(0, 212, 255, 0.15);">
                        <img id="thankYouGif" src="" alt="Animation Preview" style="width: 100%; max-width: 200px; border-radius: 8px; display: block; margin: 0 auto;">
                        <p id="thankYouAnimationName" style="text-align: center; margin-top: 8px; font-weight: 600; color: var(--text-primary); font-size: 14px;"></p>
                    </div>
                </div>

                <!-- Download Button -->
                <div id="thankYouDownload" style="display: none; text-align: center; margin-bottom: 20px;">
                    <a href="#" id="thankYouDownloadBtn" class="btn btn-primary" style="display: inline-flex; align-items: center; justify-content: center; gap: 8px; text-decoration: none; padding: 14px 28px; font-size: 15px;">
                        <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        Download Your Files
                    </a>
                    <p style="color: var(--text-muted); font-size: 12px; margin-top: 10px;">
                        You can re-download anytime from your <a href="#" onclick="handleDashboardClick(event); closeThankYouModal(); return false;" style="color: #fb7d47; text-decoration: none;">Dashboard</a>
                    </p>
                </div>

                <!-- Order Details -->
                <div id="thankYouOrderDetails" style="display: none; background: rgba(0, 0, 0, 0.3); border-radius: 10px; padding: 16px; border: 2px solid rgba(0, 212, 255, 0.15);">
                    <h3 style="font-size: 14px; font-weight: 700; margin-bottom: 12px; color: var(--text-primary);">Order Details</h3>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-muted); font-size: 13px;">Order ID</span>
                            <span id="thankYouOrderId" style="color: var(--text-primary); font-size: 12px; font-family: monospace;">-</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-muted); font-size: 13px;">Animation</span>
                            <span id="thankYouOrderAnimation" style="color: var(--text-primary); font-size: 13px;">-</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-muted); font-size: 13px;">Amount Paid</span>
                            <span id="thankYouOrderAmount" style="color: var(--text-primary); font-size: 13px; font-weight: 600;">-</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-muted); font-size: 13px;">Date</span>
                            <span id="thankYouOrderDate" style="color: var(--text-primary); font-size: 13px;">-</span>
                        </div>
                    </div>
                </div>

                <!-- Error State -->
                <div id="thankYouError" style="display: none; background: rgba(239, 68, 68, 0.1); border: 2px solid rgba(239, 68, 68, 0.3); border-radius: 12px; padding: 14px; text-align: center;">
                    <p id="thankYouErrorMessage" style="color: #EF4444; font-size: 13px; margin: 0;"></p>
                </div>
            </div>
        </div>
    </div>

    <style>
    /* Thank You Modal Spinner */
    #thankYouModal .spinner {
        width: 40px;
        height: 40px;
        border: 4px solid rgba(0, 212, 255, 0.1);
        border-top-color: #fb7d47;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    /* ==========================================
       STRIPE CHECKOUT MODAL STYLES
       ========================================== */
    .stripe-checkout-modal {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(8px);
        z-index: 20000;
        display: none;
        align-items: center;
        justify-content: center;
    }

    .stripe-checkout-modal.active {
        display: flex;
    }

    .stripe-checkout-modal-overlay {
        position: absolute;
        inset: 0;
    }

    .stripe-checkout-modal-content {
        background: rgba(10, 10, 10, 0.95);
        border: 2px solid rgba(0, 212, 255, 0.2);
        border-radius: 20px;
        padding: 0;
        max-width: 500px;
        width: 90%;
        animation: modalSlideIn 0.3s ease;
        position: relative;
        z-index: 1;
        overflow: hidden;
        box-shadow: 
            0 4px 24px rgba(0, 0, 0, 0.4),
            inset 0 1px 1px rgba(251, 125, 71, 0.1),
            0 0 40px rgba(251, 125, 71, 0.05);
    }

    .stripe-checkout-modal-header {
        background: rgba(0, 0, 0, 0.2);
        padding: 24px;
        border-bottom: 2px solid rgba(0, 212, 255, 0.1);
        position: relative;
    }

    .stripe-checkout-modal-title {
        font-size: 20px;
        font-weight: 700;
        background: linear-gradient(135deg, #F59E0B, #FF6B6B);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin: 0;
        font-family: 'Sora', sans-serif;
    }

    .stripe-checkout-modal-close {
        position: absolute;
        top: 16px;
        right: 16px;
        width: 36px;
        height: 36px;
        border: 2px solid rgba(0, 212, 255, 0.15);
        background: rgba(0, 0, 0, 0.3);
        color: var(--text-secondary);
        font-size: 20px;
        font-weight: bold;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 2;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .stripe-checkout-modal-close:hover {
        background: rgba(239, 68, 68, 0.2);
        border-color: rgba(239, 68, 68, 0.4);
        color: #FCA5A5;
        transform: scale(1.1);
    }

    .stripe-checkout-modal-body {
        padding: 32px 24px;
    }

    .stripe-payment-form {
        margin-bottom: 20px;
    }

    .stripe-form-group {
        margin-bottom: 16px;
    }

    .stripe-form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
    }

    .stripe-label {
        display: block;
        font-size: 14px;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 8px;
        font-family: 'DM Sans', sans-serif;
    }

    .stripe-input {
        background: #2A2A2A;
        border: 2px solid rgba(0, 212, 255, 0.2);
        border-radius: 50px;
        padding: 16px 24px;
        transition: all 0.3s ease;
    }

    .stripe-input:focus-within,
    .stripe-input.StripeElement--focus {
        border-color: #fb7d47;
        box-shadow: 0 0 0 3px rgba(251, 125, 71, 0.1),
                    0 0 20px rgba(251, 125, 71, 0.3);
        background: #2A2A2A;
    }

    .stripe-input.StripeElement--invalid {
        border-color: rgba(239, 68, 68, 0.5);
    }

    .stripe-input.StripeElement--complete {
        border-color: rgba(16, 185, 129, 0.5);
    }

    .stripe-order-summary {
        background: #1A1A1A;
        border: 2px solid rgba(0, 212, 255, 0.2);
        border-radius: 20px;
        padding: 20px;
        margin-bottom: 24px;
    }

    .stripe-order-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
        padding-bottom: 12px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .stripe-order-item:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
    }

    .stripe-order-label {
        color: var(--text-secondary);
        font-size: 14px;
    }

    .stripe-order-value {
        color: var(--text-primary);
        font-weight: 600;
        font-size: 16px;
    }

    .stripe-order-total {
        margin-top: 12px;
        padding-top: 12px;
        border-top: 2px solid rgba(0, 212, 255, 0.3);
    }

    .stripe-order-total .stripe-order-label {
        font-weight: 700;
        font-size: 16px;
        color: var(--text-primary);
    }

    .stripe-order-total .stripe-order-value {
        font-size: 24px;
        background: linear-gradient(135deg, #F59E0B, #FF6B6B);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 800;
    }

    .stripe-pay-button {
        width: 100%;
        padding: 14px 24px;
        background: rgba(10, 10, 10, 0.95);
        border: 2px solid rgba(0, 212, 255, 0.3);
        border-radius: 50px;
        color: #ffffff;
        font-weight: 700;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s ease, border-color 0.2s ease;
        font-family: 'Sora', sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        position: relative;
        box-shadow: 
            inset 0 1px 1px rgba(255, 255, 255, 0.1),
            inset 0 -1px 1px rgba(0, 0, 0, 0.1),
            0 2px 8px rgba(0, 0, 0, 0.2);
        isolation: isolate;
    }
    
    .stripe-pay-button::before {
        content: '';
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        border-radius: 50px;
        background: linear-gradient(
            90deg,
            transparent 0%,
            #fb7d47 20%,
            #fb7d47 40%,
            #FF6B6B 60%,
            transparent 80%,
            transparent 100%
        );
        background-size: 200% 100%;
        z-index: -2;
        opacity: 0;
        transition: opacity 0.3s ease;
        animation: liquidFlow 4s ease-in-out infinite paused;
    }
    
    .stripe-pay-button::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 50px;
        background: rgba(10, 10, 10, 0.95);
        z-index: -1;
    }

    .stripe-pay-button:hover:not(:disabled) {
        transform: scale(1.03);
        border-color: rgba(10, 10, 10, 0.95);
        box-shadow: 
            inset 0 1px 1px rgba(255, 255, 255, 0.15),
            inset 0 -1px 1px rgba(0, 0, 0, 0.1),
            0 0 25px rgba(251, 125, 71, 0.4);
    }
    
    .stripe-pay-button:hover:not(:disabled)::before {
        opacity: 1;
        animation-play-state: running;
    }

    .stripe-pay-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .stripe-pay-button-spinner {
        width: 20px;
        height: 20px;
        border: 3px solid rgba(251, 125, 71, 0.3);
        border-top-color: #fb7d47;
        border-radius: 50%;
        animation: spinButton 0.8s linear infinite;
    }

    @keyframes spinButton {
        to { transform: rotate(360deg); }
    }

    .stripe-error-message {
        background: rgba(239, 68, 68, 0.1);
        border: 2px solid rgba(239, 68, 68, 0.3);
        border-radius: 50px;
        padding: 12px 24px;
        margin-top: 16px;
        color: #FCA5A5;
        font-size: 14px;
        display: none;
    }

    .stripe-error-message.show {
        display: block;
    }

    .stripe-secure-badge {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        margin-top: 16px;
        color: var(--text-muted);
        font-size: 12px;
    }

    .stripe-secure-icon {
        width: 16px;
        height: 16px;
        fill: #10B981;
    }

    @media (max-width: 768px) {
        .stripe-checkout-modal-content {
            max-width: 95%;
            margin: 16px;
        }
        
        .stripe-checkout-modal-body {
            padding: 24px 16px;
        }
    }
    </style>

    <script>
    // Thank You Modal Functions
    let thankYouModalOpen = false;

    function closeThankYouModal() {
        document.getElementById('thankYouModal').classList.remove('active');
        thankYouModalOpen = false;
        
        // Clear the success parameter from URL without reloading
        const url = new URL(window.location);
        url.searchParams.delete('session_id');
        url.searchParams.delete('payment_success');
        window.history.replaceState({}, '', url);
        
        // Clear cart since purchase was successful
        localStorage.removeItem('cart');
        if (typeof updateCartBadge === 'function') updateCartBadge();
    }
    
    // Make globally accessible
    window.closeThankYouModal = closeThankYouModal;

    // Check URL for payment success on page load
    window.addEventListener('load', function() {
        const urlParams = new URLSearchParams(window.location.search);
        const sessionId = urlParams.get('session_id');
        const paymentSuccess = urlParams.get('payment_success');
        
        if (sessionId && paymentSuccess === 'true') {
            // Small delay to ensure page is loaded
            setTimeout(() => {
                showThankYouModal(sessionId);
            }, 500);
        }
    });
    </script>

    <!-- Cart Hover Dropdown (Outside Navbar) -->
    <div class="cart-hover-dropdown" id="cartHoverDropdown">
        <div class="cart-hover-header">Shopping Cart</div>
        <div class="cart-hover-items" id="cartHoverItems">
            <!-- Items populated by JavaScript -->
        </div>
        <div class="cart-hover-footer">
            <div class="cart-hover-total">
                <span>Total:</span>
                <span id="cartHoverTotal">$0.00</span>
            </div>
            <button id="cartHoverCheckoutBtn" class="btn btn-primary" onclick="handleCartHoverCheckout()" style="width: 100%; margin-top: 12px; display: none;">
                Proceed to Checkout
            </button>
            <button class="btn btn-secondary" onclick="openCart(); event.stopPropagation();" style="width: 100%; margin-top: 12px;">
                View Full Cart
            </button>
        </div>
    </div>

    <!-- Floating Particles Script - REMOVED for liquid metal effect -->

    <!-- Carousel Script - 3D Rotating -->
    <script>
        // Carousel state
        let currentIndex = 0;
        let carouselInterval = null;
        const TOTAL_ITEMS = 7;
        const ROTATION_PER_ITEM = 360 / TOTAL_ITEMS; // 51.43 degrees
        const AUTO_ROTATE_DELAY = 3000; // 3 seconds between rotations
        
        // Carousel data (7 items) - will be loaded from database or use defaults
        let carouselData = [
            { icon: '<svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="17" cy="4" r="2"/><path d="M15.5 21l-3-6.5-4 3V21"/><path d="M8 14l4-3 2.5 3.5"/><path d="M12 11l-3-2.5-3 3.5"/></svg>', title: 'Running Pack', subtitle: '12 animations', label: 'Motion Capture', image_url: null, link_url: '' },
            { icon: '<svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 17.5L3 6V3h3l11.5 11.5"/><path d="M13 19l6-6"/><path d="M16 16l4 4"/><path d="M19 21l2-2"/></svg>', title: 'Combat Pack', subtitle: '24 animations', label: 'Motion Capture', image_url: null, link_url: '' },
            { icon: '<svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="5" r="2"/><path d="M4 17l4-4 4 4 4-4 4 4"/><path d="M12 11v4"/></svg>', title: 'Acrobatic Pack', subtitle: '18 animations', label: 'Motion Capture', image_url: null, link_url: '' },
            { icon: '<svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2v20"/><path d="M2 12h20"/><circle cx="12" cy="12" r="4"/><path d="M4.93 4.93l4.24 4.24"/><path d="M14.83 14.83l4.24 4.24"/></svg>', title: 'Climbing Pack', subtitle: '16 animations', label: 'Motion Capture', image_url: null, link_url: '' },
            { icon: '<svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>', title: 'Sports Pack', subtitle: '20 animations', label: 'Motion Capture', image_url: null, link_url: '' },
            { icon: '<svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="5.5" cy="17.5" r="2.5"/><circle cx="17.5" cy="15.5" r="2.5"/><path d="M8 17V5l12-2v12"/></svg>', title: 'Dance Pack', subtitle: '15 animations', label: 'Motion Capture', image_url: null, link_url: '' },
            { icon: '<svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="#fb7d47" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>', title: 'Idle Pack', subtitle: '10 animations', label: 'Motion Capture', image_url: null, link_url: '' }
        ];

        // Load carousel data from database
        async function loadCarouselData() {
            if (!window.supabaseClient) {
                return;
            }
            
            try {
                const { data, error } = await window.supabaseClient
                    .from('carousel_items')
                    .select('*')
                    .order('position', { ascending: true });

                if (!error && data && data.length > 0) {
                    carouselData = data.map(item => ({
                        icon: item.icon,
                        title: item.title,
                        subtitle: item.subtitle,
                        label: 'Motion Capture',
                        image_url: item.image_url,
                        link_url: item.link_url
                    }));
                    
                    updateCarouselContent();
                }
            } catch (error) {
                console.error('[Carousel] Error loading:', error);
            }
        }

        // Update carousel content in DOM
        function updateCarouselContent() {
            const items = document.querySelectorAll('.carousel-item');
            
            items.forEach((item, index) => {
                if (carouselData[index]) {
                    const data = carouselData[index];
                    const placeholder = item.querySelector('.carousel-placeholder');
                    
                    if (placeholder) {
                        if (data.image_url) {
                            placeholder.innerHTML = `
                                <div class="carousel-gif-placeholder" data-gif="${data.image_url}">
                                    <div class="carousel-play-icon"><svg viewBox="0 0 24 24" width="24" height="24" fill="#fb7d47" stroke="none"><polygon points="5 3 19 12 5 21 5 3"/></svg></div>
                                    <div class="carousel-placeholder-text">${data.title}</div>
                                    <div class="carousel-placeholder-subtext">Hover to preview</div>
                                </div>
                            `;
                        } else {
                            placeholder.innerHTML = `
                                <div class="carousel-placeholder-icon">${data.icon}</div>
                                <div class="carousel-placeholder-text">${data.title}</div>
                                <div class="carousel-placeholder-subtext">${data.subtitle}</div>
                            `;
                        }
                    }
                    
                    // GIF hover handlers
                    item.addEventListener('mouseenter', () => {
                        const gifPlaceholder = item.querySelector('.carousel-gif-placeholder');
                        if (gifPlaceholder && data.image_url) {
                            gifPlaceholder.innerHTML = `
                                <img src="${data.image_url}" 
                                     alt="${data.title}" 
                                     style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px;">
                            `;
                        }
                    });
                    
                    item.addEventListener('mouseleave', () => {
                        const gifPlaceholder = item.querySelector('.carousel-gif-placeholder');
                        if (gifPlaceholder && gifPlaceholder.querySelector('img')) {
                            gifPlaceholder.innerHTML = `
                                <div class="carousel-play-icon"><svg viewBox="0 0 24 24" width="24" height="24" fill="#fb7d47" stroke="none"><polygon points="5 3 19 12 5 21 5 3"/></svg></div>
                                <div class="carousel-placeholder-text">${data.title}</div>
                                <div class="carousel-placeholder-subtext">Hover to preview</div>
                            `;
                        }
                    });
                    
                    const overlayText = item.querySelector('.carousel-overlay-text');
                    if (overlayText) {
                        overlayText.textContent = data.label || 'Motion Capture';
                    }
                }
            });
        }

        // Rotate to specific item
        function rotateToItem(index) {
            const track = document.getElementById('carouselTrack');
            if (!track) {
                console.error('[Carousel] Track not found!');
                return;
            }
            
            // Stop CSS animation - we're taking manual control
            track.style.animation = 'none';
            
            const rotation = -index * ROTATION_PER_ITEM;
            track.style.transition = 'transform 0.6s cubic-bezier(0.77, 0, 0.175, 1)';
            track.style.transform = `translateZ(-280px) rotateY(${rotation}deg)`;
            
            currentIndex = index;
        }

        // Start auto-rotation using setInterval
        function startAutoRotation() {
            
            // Clear any existing interval
            if (carouselInterval) {
                clearInterval(carouselInterval);
            }
            
            carouselInterval = setInterval(() => {
                const nextIndex = (currentIndex + 1) % TOTAL_ITEMS;
                rotateToItem(nextIndex);
            }, AUTO_ROTATE_DELAY);
            
        }

        // Stop auto-rotation
        function stopAutoRotation() {
            if (carouselInterval) {
                clearInterval(carouselInterval);
                carouselInterval = null;
            }
        }

        // Rotate to next item
        function rotateNext() {
            stopAutoRotation();
            const nextIndex = (currentIndex + 1) % TOTAL_ITEMS;
            rotateToItem(nextIndex);
            startAutoRotation();
        }

        // Rotate to previous item
        function rotatePrev() {
            stopAutoRotation();
            const prevIndex = (currentIndex - 1 + TOTAL_ITEMS) % TOTAL_ITEMS;
            rotateToItem(prevIndex);
            startAutoRotation();
        }

        // Initialize carousel
        async function initCarousel() {
            
            await loadCarouselData();
            
            const track = document.getElementById('carouselTrack');
            const carousel = document.querySelector('.hero-preview-carousel');
            const prevBtn = document.getElementById('carouselPrev');
            const nextBtn = document.getElementById('carouselNext');
            const items = document.querySelectorAll('.carousel-item');

            // Disable CSS animation - we'll use JS interval instead
            if (track) {
                track.style.animation = 'none';
                rotateToItem(0); // Start at first item
            }

            // Arrow click handlers
            if (prevBtn) {
                prevBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    rotatePrev();
                });
            }

            if (nextBtn) {
                nextBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    rotateNext();
                });
            }

            // Item click handlers
            items.forEach((item, index) => {
                item.addEventListener('click', () => {
                    const data = carouselData[index];
                    if (data && data.link_url) {
                        window.location.href = data.link_url;
                    }
                });
            });

            // Pause on hover
            if (carousel) {
                carousel.addEventListener('mouseenter', () => {
                    stopAutoRotation();
                });
                carousel.addEventListener('mouseleave', () => {
                    startAutoRotation();
                });
            }

            // Pause when tab inactive
            document.addEventListener('visibilitychange', () => {
                if (document.hidden) {
                    stopAutoRotation();
                } else {
                    startAutoRotation();
                }
            });

            // Fade in carousel
            setTimeout(() => {
                if (carousel) {
                    carousel.classList.add('loaded');
                }
            }, 100);
            
            // Start auto-rotation
            startAutoRotation();
            
        }

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initCarousel);
        } else {
            initCarousel();
        }
    </script>

    <!-- Mobile Sticky CTA Bar (only on mobile) -->
    <div class="mobile-sticky-cta" id="mobileStickyCta">
        <div class="mobile-sticky-cta-content">
            <div class="mobile-sticky-cta-text">
                <span>Ready to elevate your project?</span>
                <small>100+ professional animations available</small>
            </div>
            <button class="mobile-sticky-cta-btn" onclick="document.getElementById('library').scrollIntoView({behavior: 'smooth'})">
                Browse Now
            </button>
        </div>
    </div>

    <!-- Mobile Sticky CTA Trigger Script -->
    <script>
        // Show mobile sticky CTA after scrolling past hero on mobile
        let mobileStickyCta = document.getElementById('mobileStickyCta');
        
        function handleMobileStickyCta() {
            if (window.innerWidth <= 768) {
                if (window.scrollY > window.innerHeight * 0.7) {
                    mobileStickyCta.classList.add('show');
                } else {
                    mobileStickyCta.classList.remove('show');
                }
            } else {
                mobileStickyCta.classList.remove('show');
            }
        }
        
        window.addEventListener('scroll', handleMobileStickyCta);
        window.addEventListener('resize', handleMobileStickyCta);
    </script>

    <!-- ========================================== -->
    <!-- SIMPLE ANIMATIONS - Hero Text -->
    <!-- ========================================== -->
    <script>

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', () => {
            if (typeof gsap === 'undefined') {
                MocapWork.error('GSAP not loaded');
                return;
            }

            // ==========================================
            // SLOW HERO TEXT ANIMATION
            // ==========================================
            const heroTitle = document.querySelector('.hero-title');
            
            if (heroTitle) {
                const titleSpans = heroTitle.querySelectorAll('span');
                
                // Set initial state - hidden
                gsap.set(titleSpans, { 
                    opacity: 0, 
                    y: 40, 
                    filter: 'blur(10px)' 
                });
                
                // Create slow timeline
                const heroTl = gsap.timeline({ 
                    defaults: { ease: 'power3.out' },
                    delay: 0.3 
                });
                
                // Animate each word slowly
                titleSpans.forEach((span, index) => {
                    heroTl.to(span, {
                        opacity: 1,
                        y: 0,
                        filter: 'blur(0px)',
                        duration: 1, // Slower - was 0.6
                        ease: 'power2.out'
                    }, index * 0.25); // More delay between words - was 0.15
                });
            }
            
            });
    </script>

    <!-- ==========================================
         STRIPE CHECKOUT MODAL HTML
         ========================================== -->
    <div id="stripeCheckoutModal" class="stripe-checkout-modal">
        <div class="stripe-checkout-modal-overlay" onclick="closeStripeCheckout()"></div>
        <div class="stripe-checkout-modal-content">
            <div class="stripe-checkout-modal-header">
                <h3 class="stripe-checkout-modal-title">Complete Your Purchase</h3>
                <button class="stripe-checkout-modal-close" onclick="closeStripeCheckout()"></button>
            </div>
            <div class="stripe-checkout-modal-body">
                <!-- Animation Preview -->
                <div id="stripe-animation-preview" style="display: none; text-align: center; margin-bottom: 20px;">
                    <img id="stripe-animation-gif" src="" alt="Animation Preview" style="width: 100%; max-width: 200px; border-radius: 12px; border: 2px solid rgba(0, 212, 255, 0.2);">
                </div>
                
                <div class="stripe-order-summary">
                    <div class="stripe-order-item">
                        <span class="stripe-order-label" id="stripe-product-name">Loading...</span>
                        <span class="stripe-order-value" id="stripe-product-price">$0.00</span>
                    </div>
                    <div class="stripe-order-item stripe-order-total">
                        <span class="stripe-order-label">Total</span>
                        <span class="stripe-order-value" id="stripe-total-price">$0.00</span>
                    </div>
                </div>
                
                <!-- Payment Form -->
                <div class="stripe-payment-form">
                    <div class="stripe-form-group">
                        <label class="stripe-label">Card Number</label>
                        <div id="stripe-card-number" class="stripe-input"></div>
                    </div>
                    
                    <div class="stripe-form-row">
                        <div class="stripe-form-group">
                            <label class="stripe-label">Expiry Date</label>
                            <div id="stripe-card-expiry" class="stripe-input"></div>
                        </div>
                        <div class="stripe-form-group">
                            <label class="stripe-label">CVC</label>
                            <div id="stripe-card-cvc" class="stripe-input"></div>
                        </div>
                    </div>
                </div>
                
                <div id="stripe-error-message" class="stripe-error-message"></div>
                <button id="stripe-pay-button" class="stripe-pay-button">
                    <span id="stripe-button-text"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" style="display:inline;vertical-align:middle;margin-right:4px;"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>Pay Now</span>
                    <div id="stripe-button-spinner" class="stripe-pay-button-spinner" style="display: none;"></div>
                </button>
                <div class="stripe-secure-badge">
                    <svg class="stripe-secure-icon" viewBox="0 0 24 24">
                        <path d="M12 2L4 6v6c0 5.5 3.8 10.7 8 12 4.2-1.3 8-6.5 8-12V6l-8-4z" fill="currentColor"/>
                        <path d="M10 12l2 2 4-4" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Secured by Stripe
                </div>
            </div>
        </div>
    </div>

<!-- Floating Side CTA -->
    <div class="floating-side-cta" id="floatingSideCta">
        <button class="floating-side-cta-close" onclick="toggleFloatingCta()" aria-label="Close"></button>
        <button class="floating-side-cta-toggle" onclick="toggleFloatingCta()">
            <svg viewBox="0 0 24 24" width="14" height="14" fill="#fb7d47" stroke="none" style="margin-right: 4px;"><path d="M12 0l2.5 7.5L22 10l-7.5 2.5L12 20l-2.5-7.5L2 10l7.5-2.5z"/></svg> OFFERS
        </button>
        <h4 style="display: flex; align-items: center; gap: 8px;"><svg viewBox="0 0 24 24" width="20" height="20" fill="#fb7d47" stroke="none"><path d="M12 23c-3.866 0-7-3.134-7-7 0-2.526 1.394-4.727 3.453-5.882-.07.463-.107.943-.107 1.432 0 2.485 1.349 4.656 3.354 5.822-.696-.772-1.121-1.795-1.121-2.922 0-2.209 1.672-4.013 3.82-4.245.138-.015.277-.023.417-.023 1.115 0 2.133.44 2.884 1.16A6.968 6.968 0 0 1 19 16c0 3.866-3.134 7-7 7zM12 1c.552 0 1 .448 1 1v2c0 .552-.448 1-1 1s-1-.448-1-1V2c0-.552.448-1 1-1z"/></svg> Special Offer</h4>
        <p>Get started with premium mocap animations from just <strong style="color: #fb7d47;">$1</strong>. Perfect for indie developers!</p>
        <a href="#library" class="btn-cta" style="width: 100%; padding: 12px 20px;" onclick="toggleFloatingCta()">
            <svg viewBox="0 0 24 24">
                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
            </svg>
            Browse Animations
        </a>
        <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid rgba(245, 158, 11, 0.2);">
            <p style="font-size: 13px; margin-bottom: 8px; font-family: 'DM Sans', sans-serif;">Need something custom?</p>
            <a href="#contact" style="color: #fb7d47; font-size: 14px; font-weight: 600; text-decoration: none; font-family: 'DM Sans', sans-serif;" onclick="toggleFloatingCta()">
                Request Custom Animation 
            </a>
        </div>
    </div>

    <script>
        // Floating Side CTA
        let floatingCtaVisible = false;
        
// FAQ Accordion Toggle
        function toggleFaq(element) {
            // Close all other FAQs
            const allFaqs = document.querySelectorAll('.faq-item');
            allFaqs.forEach(faq => {
                if (faq !== element) {
                    faq.classList.remove('open');
                }
            });
            // Toggle clicked FAQ
            element.classList.toggle('open');
        }

        function toggleFloatingCta() {
            const cta = document.getElementById('floatingSideCta');
            floatingCtaVisible = !floatingCtaVisible;
            cta.classList.toggle('show', floatingCtaVisible);
        }
        
        // Show floating CTA after scrolling past hero
        let floatingCtaShown = false;
        window.addEventListener('scroll', function() {
            if (!floatingCtaShown && window.scrollY > window.innerHeight * 0.5) {
                floatingCtaShown = true;
                // Auto-show after 3 seconds of scrolling past hero
                setTimeout(() => {
                    if (!floatingCtaVisible) {
                        toggleFloatingCta();
                        // Auto-hide after 5 seconds
                        setTimeout(() => {
                            if (floatingCtaVisible) toggleFloatingCta();
                        }, 5000);
                    }
                }, 3000);
            }
        }, { passive: true });

        // Panel Glow - Direct mouse tracking (simple & smooth)
        document.querySelectorAll('.panel-glow').forEach(panel => {
            const blob = panel.querySelector('.panel-glow-blob');
            if (!blob) return;
            
            panel.addEventListener('mousemove', (e) => {
                const rect = panel.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                blob.style.left = x + 'px';
                blob.style.top = y + 'px';
            }, { passive: true });
        });
    </script>

</body>
</html>
