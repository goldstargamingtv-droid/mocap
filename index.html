<!DOCTYPE html>
<html lang="en">
<head>
    <!-- VERSION: 2024-12-23-v12 - NAVBAR UPDATES & NOTIFICATIONS -->
    <!-- ============================================ -->
    <!-- PALETTE 2: WARM LUXE AMBER -->
    <!-- Rich black (#000000) with muted gold (#F59E0B) and warm coral (#FF6B6B) -->
    <!-- Luxurious, inviting, premium warmth -->
    <!-- ============================================ -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="version" content="2024-12-23-v12">
    
    <!-- SEO Meta Tags -->
    <title>MocapWork - Premium Motion Capture Animations for Unreal, Unity & Blender</title>
    
    <!-- Primary Meta Tags -->
    <meta name="title" content="MocapWork - Premium Motion Capture Animations for Games & Film">
    <meta name="description" content="Buy professional motion capture animations for Unreal Engine, Unity & Blender. 100+ studio-quality mocap animations with royalty-free licenses. Instant download for game development, film & virtual production.">
    <meta name="keywords" content="motion capture animations, buy mocap, unreal engine mocap, unity animations, blender mocap, professional mocap, game animations, character animations, fbx animations, royalty free mocap, instant download mocap, 3d animation assets">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="author" content="MocapWork">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mocapwork.com/">
    <meta property="og:site_name" content="MocapWork">
    <meta property="og:title" content="MocapWork - 100+ Premium Motion Capture Animations">
    <meta property="og:description" content="Studio-quality motion capture animations for Unreal Engine, Unity & Blender. Royalty-free licenses, instant downloads. Perfect for games, films & virtual production.">
    <meta property="og:image" content="https://mocapwork.com/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="MocapWork - Premium Motion Capture Animation Marketplace">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://mocapwork.com/">
    <meta property="twitter:title" content="MocapWork - Premium Motion Capture Animations">
    <meta property="twitter:description" content="100+ professional mocap animations for Unreal, Unity & Blender. Studio-quality, royalty-free, instant download. Elevate your game dev & film projects.">
    <meta property="twitter:image" content="https://mocapwork.com/og-image.jpg">
    <meta property="twitter:image:alt" content="MocapWork Motion Capture Animation Library">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://mocapwork.com/">
    
    <!-- Favicon - Add custom MW favicon files here -->
    <!-- <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"> -->
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3MFZSKB0V4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-3MFZSKB0V4');
    </script>
    <meta name="description" content="Buy professional motion capture animations for games, film, and virtual production. High-quality mocap library ready for Unreal Engine, Unity, Blender, and more. From $1 with instant download.">
    <meta name="keywords" content="buy motion capture, mocap animations, purchase animations, game development, Unreal Engine, Unity, Blender, 3D animation, motion capture library, professional mocap">
    <meta name="author" content="MocapWork">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://goldstargamingtv-droid.github.io/mocap/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://goldstargamingtv-droid.github.io/mocap/">
    <meta property="og:title" content="MocapWork - Premium Motion Capture Animation Library">
    <meta property="og:description" content="Professional motion capture animations from $1. Instant download for Unreal Engine, Unity, Blender, and more. Browse our library of high-quality mocap animations.">
    <meta property="og:image" content="https://goldstargamingtv-droid.github.io/mocap/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="MocapWork">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://goldstargamingtv-droid.github.io/mocap/">
    <meta name="twitter:title" content="MocapWork - Premium Motion Capture Animations">
    <meta name="twitter:description" content="Professional motion capture animations from $1. Instant download for Unreal Engine, Unity, Blender, and more.">
    <meta name="twitter:image" content="https://goldstargamingtv-droid.github.io/mocap/og-image.jpg">
    
    <!-- Additional SEO -->
    <meta name="theme-color" content="#0F0F1A">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Performance: Resource Hints -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://js.stripe.com">
    <link rel="dns-prefetch" href="https://api.stripe.com">
    <link rel="preconnect" href="https://ekzablbemepokrcitvco.supabase.co">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        :root {
            --bg-primary: #000000;
            --bg-secondary: #0F0F0F;
            --bg-card: #1A1A1A;
            --teal: #F59E0B;
            --teal-dark: #D97706;
            --amber: #FF6B6B;
            --amber-light: #FF8E8E;
            --coral: #FFA07A;
            --coral-light: #FFB894;
            --text-white: #FFFFFF;          /* Pure white for max readability */
            --text-primary: #FEFCE8;        /* Cream - warm accent text */
            --text-secondary: #E7E5D3;      /* Light cream - muted text */
            --text-muted: #A8A593;          /* Very muted - subtle text */
        }

        /* Accessibility: Skip to main content link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--teal);
            color: var(--bg-primary);
            padding: 8px 16px;
            text-decoration: none;
            font-weight: 600;
            z-index: 100000;
            border-radius: 0 0 8px 0;
        }
        
        .skip-link:focus {
            top: 0;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg-primary);
            background-image: radial-gradient(circle at 30% 20%, rgba(0, 212, 255, 0.12), transparent 50%),
                              radial-gradient(circle at 70% 80%, rgba(245, 158, 11, 0.12), transparent 50%);
            background-attachment: fixed;
            color: var(--text-primary);
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* Custom Scrollbar - Grey with Orange Accent */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #F59E0B 0%, #FF6B6B 100%);
            border-radius: 6px;
            border: 2px solid #1a1a1a;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #FBBF24 0%, #FF8E8E 100%);
        }

        /* Firefox Scrollbar */
        * {
            scrollbar-width: thin;
            scrollbar-color: #F59E0B #1a1a1a;
        }

        .font-sora {
            font-family: 'Sora', sans-serif;
        }

        /* Smooth grain overlay */
        .grain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.025;
            z-index: 100;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='2.5' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        /* Gradient Text */
        .gradient-text {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .animated-gradient {
            background: linear-gradient(90deg, var(--teal), var(--amber), var(--teal));
            background-size: 200% auto;
            animation: gradientShift 3s ease infinite;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .glow-coral {
            text-shadow: 0 0 30px rgba(0, 212, 255, 0.4);
        }

        /* Button Styles */
        .btn {
            padding: 14px 28px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            font-size: 16px;
            text-decoration: none;
            display: inline-block;
            font-family: 'Sora', sans-serif;
        }

        .btn-primary {
            background: rgba(0, 212, 255, 0.1);
            border: 2px solid rgba(0, 212, 255, 0.3);
            color: var(--teal);
            border-radius: 50px;
            font-weight: 600;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--teal);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        .btn-secondary {
            background: rgba(0, 212, 255, 0.1);
            border: 2px solid rgba(0, 212, 255, 0.3);
            color: var(--teal);
            font-weight: 600;
            padding: 12px 24px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'DM Sans', sans-serif;
            text-decoration: none;
        }

        .btn-secondary:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--teal);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        /* Navbar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 10002;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: transparent;
        }

        .navbar.scrolled {
            background: rgba(15, 15, 15, 0.92);
            backdrop-filter: blur(20px);
            border-bottom: 2px solid rgba(100, 116, 139, 0.15);
        }

        /* Transparent Sticky Selection Bar */
        .selection-bar {
            position: fixed;
            top: -200px;
            right: 20px;
            z-index: 10001;
            display: flex;
            flex-direction: column;
            gap: 12px;
            transition: top 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none;
        }

        .selection-bar.active {
            top: 80px;
            pointer-events: auto;
        }

        .selection-bar-btn {
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(20px);
            min-width: 200px;
            justify-content: center;
        }

        .selection-bar-btn-primary {
            background: rgba(0, 212, 255, 0.15);
            border: 2px solid rgba(0, 212, 255, 0.3);
            color: var(--teal);
        }

        .selection-bar-btn-primary:hover {
            background: rgba(0, 212, 255, 0.25);
            border-color: var(--teal);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5), 0 4px 20px rgba(0, 0, 0, 0.4);
            transform: translateY(-2px);
        }

        .selection-bar-btn-secondary {
            background: rgba(255, 107, 107, 0.15);
            border: 2px solid rgba(255, 107, 107, 0.3);
            color: #FF6B6B;
        }

        .selection-bar-btn-secondary:hover {
            background: rgba(255, 107, 107, 0.25);
            border-color: #FF6B6B;
            transform: translateY(-2px);
        }

        .selection-count-badge {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            color: black;
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 12px;
        }

        .navbar-container {
            max-width: 100%;
            margin: 0;
            padding: 0 40px;
            display: flex;
            align-items: center;
            gap: 24px;
            height: 70px;
            justify-content: space-between;
        }

        .nav-center {
            display: flex;
            gap: 24px;
            align-items: center;
            margin-left: 0;
        }

        .nav-link {
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 500;
            font-size: 15px;
            transition: color 0.3s ease;
            position: relative;
            white-space: nowrap;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            transition: width 0.3s ease;
        }

        .nav-link:hover {
            color: var(--text-white);
        }

        .nav-link:hover::after,
        .nav-link.active::after {
            width: 100%;
        }

        /* Navbar Search */
        .nav-search {
            flex: 1;
            position: relative;
            margin-left: 24px;
            margin-right: 24px;
        }

        .search-input-nav {
            width: 100%;
            padding: 10px 40px 10px 40px;
            background: rgba(26, 26, 26, 0.6);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 25px;
            color: var(--text-primary);
            font-size: 14px;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
        }

        .search-input-nav:focus {
            outline: none;
            border-color: var(--teal);
            background: rgba(26, 26, 26, 0.8);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        .search-input-nav::placeholder {
            color: var(--text-muted);
        }

        .search-icon-nav {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 16px;
            opacity: 0.6;
        }

        .search-clear-nav {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 16px;
            cursor: pointer;
            display: none;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .search-clear-nav:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.1);
        }

        .search-dropdown-nav {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            border: 2px solid rgba(100, 116, 139, 0.3);
            border-radius: 12px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .search-dropdown-nav.active {
            display: block;
        }

        .search-dropdown-library {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            border: 2px solid rgba(100, 116, 139, 0.3);
            border-radius: 12px;
            max-height: 400px;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            z-index: 10000;
        }

        .nav-right {
            display: flex;
            gap: 16px;
            align-items: center;
            margin-left: auto;
        }
        
        /* Profile Icon */
        /* Profile Icon & Dropdown */
        .profile-container {
            position: relative;
            display: inline-block;
        }
        
        .profile-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(0, 212, 255, 0.15);
            border: 2px solid #F59E0B;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #F59E0B;
        }
        
        .profile-icon svg {
            width: 20px;
            height: 20px;
            fill: #F59E0B;
        }
        
        .profile-icon:hover {
            background: rgba(0, 212, 255, 0.25);
            border-color: #FBBF24;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.4);
        }
        
        .profile-dropdown {
            position: absolute;
            top: calc(100% + 12px);
            right: 0;
            width: 220px;
            background: rgba(15, 15, 15, 0.98);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 12px;
            padding: 8px;
            display: none;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 212, 255, 0.1);
            z-index: 10003;
            backdrop-filter: blur(20px);
        }
        
        /* Invisible bridge to keep dropdown open */
        .profile-dropdown::before {
            content: '';
            position: absolute;
            top: -12px;
            left: 0;
            right: 0;
            height: 12px;
            background: transparent;
        }
        
        .profile-container:hover .profile-dropdown,
        .profile-dropdown:hover {
            display: block;
        }
        
        .profile-dropdown-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 8px;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .profile-dropdown-item:hover {
            background: rgba(245, 158, 11, 0.1);
            color: var(--text-primary);
            transform: translateX(4px);
        }
        
        .profile-dropdown-item svg {
            width: 18px;
            height: 18px;
            opacity: 0.7;
        }
        
        .profile-dropdown-divider {
            height: 1px;
            background: rgba(100, 116, 139, 0.2);
            margin: 4px 0;
        }

        .cart-container {
            position: relative;
            display: inline-block;
        }

        .cart-icon {
            position: relative !important;
            cursor: pointer;
            padding: 8px;
            display: inline-flex !important;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            isolation: isolate;
        }

        .cart-icon:hover {
            transform: scale(1.05);
        }
        
        .cart-icon:hover svg {
            filter: drop-shadow(0 0 12px rgba(245, 158, 11, 0.6));
        }

        .cart-icon svg {
            width: 24px;
            height: 24px;
            fill: none;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .cart-badge {
            position: absolute !important;
            top: -4px !important;
            right: -4px !important;
            background: var(--amber);
            color: #000000;
            min-width: 20px;
            height: 20px;
            padding: 0 5px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 800;
            font-family: 'Sora', sans-serif;
            z-index: 10;
        }

        /* Cart Hover Dropdown */
        .cart-hover-dropdown {
            position: fixed;
            top: 0;
            right: 0;
            width: 350px;
            max-height: 500px;
            background: rgba(15, 15, 15, 0.98);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 212, 255, 0.1);
            display: none;
            z-index: 10003;
            overflow: hidden;
            backdrop-filter: blur(20px);
        }


        .cart-hover-header {
            padding: 16px 20px;
            border-bottom: 2px solid rgba(100, 116, 139, 0.1);
            font-weight: 700;
            font-size: 16px;
            color: var(--text-primary);
            background: #1a1a1a;
        }

        .cart-hover-items {
            max-height: 320px;
            overflow-y: auto;
            background: #1a1a1a;
        }

        .cart-hover-items::-webkit-scrollbar {
            width: 6px;
        }

        .cart-hover-items::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 3px;
        }

        .cart-hover-items::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #F59E0B 0%, #FF6B6B 100%);
            border-radius: 3px;
        }

        .cart-hover-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 8px;
            background: #1a1a1a;
            margin: 8px;
            margin-bottom: 8px;
            transition: all 0.2s ease;
        }

        .cart-hover-item:hover {
            background: rgba(245, 158, 11, 0.15);
            border: 2px solid rgba(245, 158, 11, 0.3);
        }

        .cart-hover-item-img {
            width: 50px;
            height: 50px;
            border-radius: 6px;
            object-fit: cover;
            border: 2px solid rgba(0, 212, 255, 0.2);
        }

        .cart-hover-item-info {
            flex: 1;
            min-width: 0;
        }

        .cart-hover-item-title {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .cart-hover-item-price {
            font-size: 12px;
            color: #FFFFFF;
            font-weight: 600;
        }

        .cart-hover-item-price .price-dollar {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .cart-hover-item-remove {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid rgba(239, 68, 68, 0.3);
            color: #EF4444;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        .cart-hover-item-remove:hover {
            background: rgba(239, 68, 68, 0.2);
            transform: scale(1.1);
        }

        .cart-hover-empty {
            padding: 40px 20px;
            text-align: center;
            color: var(--text-muted);
            font-size: 14px;
            line-height: 1.6;
        }

        .cart-hover-empty-icon {
            font-size: 48px;
            opacity: 0.3;
            margin-bottom: 12px;
        }

        .cart-hover-footer {
            padding: 16px 20px;
            border-top: 2px solid rgba(100, 116, 139, 0.1);
            background: #0f0f0f;
        }

        .cart-hover-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .cart-hover-total span:last-child {
            color: #FFFFFF;
            font-size: 18px;
        }
        
        .cart-hover-total .price-dollar {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .btn-logout-nav {
            padding: 8px 16px;
            background: rgba(239, 68, 68, 0.2);
            border: 2px solid rgba(239, 68, 68, 0.4);
            color: #FCA5A5;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s;
        }

        .btn-logout-nav:hover {
            background: rgba(239, 68, 68, 0.3);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }

        .logo-icon {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .logo-icon::before {
            content: '';
            position: absolute;
            width: 60%;
            height: 60%;
            background: var(--bg-primary);
            border-radius: 6px;
            animation: pulse 3s ease-in-out infinite;
        }

        .logo-text {
            font-size: 26px;
            font-weight: 700;
            letter-spacing: -0.5px;
            color: var(--text-primary);
        }

        .logo-text span {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: none; /* Hidden on desktop - mobile only */
            gap: 40px;
            list-style: none;
            align-items: center;
        }
        
        .mobile-menu-close {
            display: none; /* Only visible on mobile */
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            font-size: 15px;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--teal);
            transition: width 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--text-primary);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        
        .btn-login {
            padding: 10px 28px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 50px;
            border: 2px solid rgba(0, 212, 255, 0.3);
            color: var(--teal) !important;
            text-decoration: none;
            font-weight: 700;
            font-size: 15px;
            font-family: 'Sora', sans-serif;
            transition: all 0.3s ease;
            display: inline-block;
        }
        
        .btn-login:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--teal);
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        /* Admin Dashboard Button */
        .btn-admin {
            padding: 10px 20px;
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(0, 212, 255, 0.15));
            border-radius: 10px;
            border: 2px solid rgba(245, 158, 11, 0.5);
            color: var(--amber) !important;
            text-decoration: none;
            font-weight: 700;
            font-size: 14px;
            font-family: 'Sora', sans-serif;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            margin-right: 12px;
        }
        
        .btn-admin:hover {
            background: linear-gradient(135deg, var(--amber), var(--teal));
            color: #000 !important;
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(245, 158, 11, 0.4);
        }

        .hamburger-menu {
            display: none;
            border: none;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 24px;
            cursor: pointer;
        }

        /* Force hide on desktop */
        @media (min-width: 769px) {
            .hamburger-menu {
                display: none !important;
                visibility: hidden !important;
                opacity: 0 !important;
                pointer-events: none !important;
            }
        }

        /* Advanced Search Bar */
        .search-container {
            position: sticky;
            top: 70px;
            z-index: 999;
            background: rgba(26, 26, 26, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 2px solid rgba(0, 212, 255, 0.1);
            padding: 16px 0;
            transition: all 0.3s ease;
        }

        .search-wrapper {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 40px;
            position: relative;
        }

        .search-box {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
        }

        .search-input {
            width: 100%;
            padding: 16px 56px 16px 56px;
            background: var(--bg-secondary);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 50px;
            color: var(--text-primary);
            font-size: 16px;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--teal);
            box-shadow: 0 0 0 4px rgba(0, 212, 255, 0.1);
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        .search-icon {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 20px;
        }

        .search-clear {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 20px;
            cursor: pointer;
            display: none;
            padding: 4px 8px;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .search-clear:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.1);
        }

        .search-dropdown {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 16px;
            max-height: 500px;
            overflow-y: auto;
            display: none;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .search-dropdown.active {
            display: block;
        }

        .search-section {
            padding: 16px 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.05);
        }

        .search-section:last-child {
            border-bottom: none;
        }

        .search-section-title {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--text-muted);
            margin-bottom: 12px;
            letter-spacing: 0.5px;
        }

        .search-result-item {
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 4px;
        }

        .search-result-item:hover {
            background: rgba(0, 212, 255, 0.1);
        }

        .search-result-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .search-result-text {
            flex: 1;
            color: var(--text-primary);
        }

        .search-result-text strong {
            color: var(--teal);
        }

        .search-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .search-tag {
            padding: 6px 12px;
            background: rgba(0, 212, 255, 0.1);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 20px;
            font-size: 13px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .search-tag:hover {
            background: rgba(0, 212, 255, 0.2);
            color: var(--teal);
        }

        .search-filters {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .search-filter-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            color: var(--text-secondary);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .search-filter-btn:hover,
        .search-filter-btn.active {
            background: rgba(0, 212, 255, 0.1);
            border-color: var(--teal);
            color: var(--teal);
        }

        /* Hero Section */
        .hero {
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding-top: 90px;
            overflow: hidden;
            /* No background - use body's fixed background */
            background: transparent;
        }

        /* Floating Particles - REMOVED for liquid metal effect */

        .hero-background {
            position: absolute;
            inset: 0;
            overflow: hidden;
        }

        /* Static Background Image */
        .hero-static-bg {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: 100%;
            height: 100%;
            transform: translate(-50%, -50%);
            z-index: 1;
            opacity: 0.25;
            background-image: url('hero-background.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            /* Fade out at bottom for seamless transition */
            -webkit-mask-image: linear-gradient(to bottom, 
                rgba(0,0,0,1) 0%, 
                rgba(0,0,0,1) 40%, 
                rgba(0,0,0,0.7) 60%, 
                rgba(0,0,0,0.3) 75%,
                rgba(0,0,0,0.1) 85%,
                rgba(0,0,0,0) 92%);
            mask-image: linear-gradient(to bottom, 
                rgba(0,0,0,1) 0%, 
                rgba(0,0,0,1) 40%, 
                rgba(0,0,0,0.7) 60%, 
                rgba(0,0,0,0.3) 75%,
                rgba(0,0,0,0.1) 85%,
                rgba(0,0,0,0) 92%);
        }

        .floating-shape {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            animation: float 8s ease-in-out infinite;
        }

        .shape-1 {
            top: 20%;
            left: 15%;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(245, 158, 11, 0.15), transparent);
        }

        .shape-2 {
            bottom: 20%;
            right: 15%;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(255, 107, 107, 0.12), transparent);
            animation-delay: 4s;
        }

        .hero-content {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 0 32px;
            max-width: 1200px;
            animation: fadeInUp 1s ease-out;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 16px;
            background: rgba(0, 212, 255, 0.08);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 50px;
            color: var(--teal);
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 16px;
            backdrop-filter: blur(10px);
        }

        .badge-dot {
            width: 8px;
            height: 8px;
            background: var(--teal);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .hero-title {
            font-size: clamp(2rem, 6vw, 4rem);
            font-weight: 800;
            line-height: 1.05;
            margin-bottom: 12px;
            letter-spacing: -2px;
            font-family: 'Sora', sans-serif;
            color: #000000;
            text-shadow: 0 0 40px rgba(245, 158, 11, 0.3),
                         0 0 80px rgba(245, 158, 11, 0.1);
        }

        .hero-subtitle {
            font-size: clamp(0.85rem, 2.5vw, 1rem);
            color: var(--text-secondary);
            margin-bottom: 16px;
            max-width: 650px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.4;
        }

        /* Hero subtitle color styles */
        .hero-subtitle-buy-gradient {
            background: linear-gradient(135deg, #F59E0B, #FF6B6B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
        }

        .hero-subtitle-secondary {
            color: #FEFCE8;
            font-weight: 400;
        }

        .hero-subtitle-professional-glow {
            color: #FBBF24;
            font-weight: 800; /* Increased from 700 */
            font-size: 1.15em; /* Slightly larger than surrounding text */
            text-shadow: 0 0 15px rgba(251, 191, 36, 0.6),
                         0 0 30px rgba(251, 191, 36, 0.4),
                         0 0 45px rgba(251, 191, 36, 0.2);
        }

        .hero-subtitle-platforms-gradient {
            background: linear-gradient(135deg, #FF6B6B, #F59E0B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
        }

        .hero-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .btn-primary-cta {
            position: relative;
            overflow: hidden;
        }

        .button-shine {
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { left: -100%; }
            50%, 100% { left: 100%; }
        }

        .trust-badge {
            display: inline-flex;
            align-items: center;
            padding: 8px 16px;
            background: rgba(100, 116, 139, 0.1);
            border: 2px solid rgba(100, 116, 139, 0.2);
            border-radius: 50px;
            font-size: 12px;
            color: var(--teal);
            margin-top: 12px;
            margin-bottom: 12px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .trust-badge:hover {
            border-color: var(--teal);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        .trust-badge svg {
            fill: var(--teal);
        }

        .hero-buttons .btn-secondary {
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .hero-buttons .btn-secondary:hover {
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
            transform: scale(1.05);
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.02);
            }
        }

        .hero-stats {
            display: flex;
            gap: 36px;
            justify-content: center;
            font-size: 12px;
            color: var(--text-muted);
            flex-wrap: wrap;
        }

        /* Hero Preview Carousel - 3 GIFs with Center Focus */
        .hero-preview-carousel {
            margin-bottom: 20px;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            position: relative;
            padding: 0 20px;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .hero-preview-carousel.loaded {
            opacity: 1;
        }

        .carousel-container {
            position: relative;
            height: 220px;
            width: 100%;
            perspective: 1200px;
        }

        .carousel-item {
            position: absolute;
            border-radius: 10px;
            overflow: hidden;
            transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1),
                        opacity 1.2s ease-out,
                        left 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border: 2px solid rgba(100, 116, 139, 0.4);
            background: #1a1a1a;
            will-change: transform, opacity;
            top: 50%;
        }

        /* Position classes for smooth transitions */
        .carousel-item.pos-far-left {
            left: 5%;
            width: 140px;
            height: 170px;
            opacity: 0.4;
            transform: translateX(-50%) translateY(-50%) scale(0.8) translateZ(-150px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.7);
        }

        .carousel-item.pos-left {
            left: 27%;
            width: 140px;
            height: 170px;
            opacity: 0.4;
            transform: translateX(-50%) translateY(-50%) scale(0.8) translateZ(-150px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.7);
        }

        .carousel-item.pos-center {
            left: 50%;
            width: 240px;
            height: 180px;
            opacity: 1;
            transform: translateX(-50%) translateY(-50%) scale(1) translateZ(0);
            z-index: 10;
            box-shadow: 0 12px 35px rgba(0, 212, 255, 0.12),
                        0 0 20px rgba(0, 212, 255, 0.08);
            border-color: rgba(0, 212, 255, 0.45);
        }

        .carousel-item.pos-right {
            left: 73%;
            width: 140px;
            height: 170px;
            opacity: 0.4;
            transform: translateX(-50%) translateY(-50%) scale(0.8) translateZ(-150px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.7);
        }

        .carousel-item.pos-far-right {
            left: 95%;
            width: 140px;
            height: 170px;
            opacity: 0.4;
            transform: translateX(-50%) translateY(-50%) scale(0.8) translateZ(-150px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.7);
        }

        /* Hover states */
        .carousel-item.side:hover {
            opacity: 0.65;
            transform: translateX(-50%) translateY(-50%) scale(0.85) translateZ(-150px);
        }

        .carousel-item.pos-center:hover {
            transform: translateX(-50%) translateY(-50%) scale(1) translateZ(0);
        }

        /* Legacy classes for backwards compatibility */
        .carousel-item.side {
            width: 140px;
            height: 170px;
            opacity: 0.4;
        }

        .carousel-item.center {
            width: 240px;
            height: 180px;
            opacity: 1;
        }

        .carousel-item-content {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);
        }

        .carousel-placeholder {
            text-align: center;
            padding: 20px 12px;
        }

        .carousel-placeholder-icon {
            font-size: 28px;
            margin-bottom: 8px;
            opacity: 0.5;
        }

        .carousel-placeholder-text {
            font-size: 12px;
            font-weight: 600;
            color: var(--teal);
            margin-bottom: 3px;
        }

        .carousel-placeholder-subtext {
            font-size: 9px;
            color: var(--text-muted);
        }

        /* Carousel Overlay Label */
        .carousel-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.9) 100%);
            padding: 10px;
            text-align: center;
        }

        .carousel-overlay-text {
            font-size: 10px;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Navigation Dots */
        .carousel-dots {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-top: 12px;
        }

        .carousel-dot {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            background: rgba(245, 158, 11, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1.5px solid rgba(0, 212, 255, 0.5);
        }

        .carousel-dot.active {
            background: rgba(245, 158, 11, 1);
            box-shadow: 0 0 10px rgba(245, 158, 11, 0.5);
            transform: scale(1.3);
            border-color: rgba(0, 212, 255, 0.8);
        }

        .carousel-dot:hover {
            background: rgba(245, 158, 11, 0.6);
            border-color: rgba(0, 212, 255, 0.7);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .carousel-container {
                height: 140px;
            }

            .carousel-item.side {
                width: 70px;
                height: 100px;
            }

            .carousel-item.center {
                width: 120px;
                height: 140px;
            }

            .carousel-placeholder-icon {
                font-size: 20px;
            }

            .carousel-placeholder-text {
                font-size: 10px;
            }

            .carousel-placeholder-subtext {
                font-size: 8px;
            }

            .carousel-overlay-text {
                font-size: 8px;
            }
            
            /* Mobile Touch Optimizations */
            .hero-buttons {
                width: 100%;
                padding: 0 20px;
            }
            
            .hero-buttons .btn-secondary {
                min-height: 48px; /* Better tap target */
                width: 100%;
                max-width: 300px;
            }
            
            .trust-badge {
                font-size: 11px;
                padding: 10px 16px;
                flex-wrap: wrap;
                text-align: center;
                justify-content: center;
            }
            
            .trust-badge span:last-child {
                width: 100%;
                margin-top: 4px;
                font-size: 10px;
            }
            
            .hero-stats {
                gap: 32px;
                font-size: 12px;
            }
            
            .stat-icon svg {
                width: 16px;
                height: 16px;
            }
        }

        .platform-logos {
            display: flex;
            gap: 24px;
            justify-content: center;
            align-items: center;
            margin: 16px 0;
            opacity: 0.8;
        }

        .platform-logo {
            height: 48px; /* Increased from 32px */
            width: auto;
            opacity: 0.8;
            transition: all 0.3s ease;
        }

        .platform-logo:first-child {
            height: 70px; /* Increased from 52px */
        }

        .platform-logo:hover {
            opacity: 1;
            transform: translateY(-4px);
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stat-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .stat-icon svg {
            width: 16px;
            height: 16px;
            fill: var(--teal);
            filter: drop-shadow(0 0 6px rgba(245, 158, 11, 0.6));
            animation: iconPulse 3s ease-in-out infinite;
        }

        @keyframes iconPulse {
            0%, 100% {
                filter: drop-shadow(0 0 6px rgba(245, 158, 11, 0.6));
                transform: scale(1);
            }
            50% {
                filter: drop-shadow(0 0 10px rgba(245, 158, 11, 0.8));
                transform: scale(1.05);
            }
        }

        .stat-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .scroll-indicator {
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            animation: bounce 2s infinite;
            opacity: 0.6;
        }

        /* Library Section */
        .library-section {
            padding: 60px 32px 120px;
            position: relative;
            overflow: visible;
            z-index: 1;
            background: transparent;
            scroll-margin-top: 40px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInUp 0.8s ease;
        }

        .section-title {
            font-size: clamp(2.8rem, 6vw, 4.2rem);
            font-weight: 900;
            margin-bottom: 24px;
            letter-spacing: -2px;
            font-family: 'Sora', sans-serif;
            color: var(--text-white);
            line-height: 1.1;
        }

        .section-subtitle {
            color: var(--text-primary);
            font-size: clamp(1.1rem, 2vw, 1.35rem);
            font-weight: 500;
            text-shadow: 0 0 30px rgba(245, 158, 11, 0.3);
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Premium Teaser Banner */
        .premium-banner {
            max-width: 900px;
            margin: 0 auto 40px;
            padding: 16px 32px;
            background: linear-gradient(135deg, rgba(100, 116, 139, 0.15), rgba(71, 85, 105, 0.15));
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 50px;
            text-align: center;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: fadeInDown 0.6s ease 0.2s backwards;
            transition: all 0.3s ease;
        }
        
        .premium-banner:hover {
            border-color: var(--teal);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        .premium-banner-text {
            font-size: clamp(0.95rem, 2vw, 1.15rem);
            font-weight: 700;
            color: #FFFFFF;
            letter-spacing: 0.3px;
            text-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulseGlowGrey {
            0%, 100% {
                box-shadow: 0 8px 32px rgba(0, 212, 255, 0.2), 
                            inset 0 1px 0 rgba(255, 255, 255, 0.1);
            }
            50% {
                box-shadow: 0 8px 32px rgba(0, 212, 255, 0.35), 
                            inset 0 1px 0 rgba(255, 255, 255, 0.15);
            }
        }

        /* Ultra-Premium Filters Card */
        .filters-card {
            position: relative;
            background: linear-gradient(145deg, rgba(26, 26, 26, 0.7), rgba(20, 20, 20, 0.8));
            backdrop-filter: blur(30px);
            border: 2px solid rgba(0, 212, 255, 0.25);
            border-radius: 28px;
            padding: 32px 40px;
            margin: 0 0 32px 0;
            z-index: 100;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4),
                        0 0 0 1px rgba(0, 212, 255, 0.1),
                        inset 0 1px 0 rgba(255, 255, 255, 0.05);
            animation: fadeInScale 0.6s ease 0.3s backwards;
            transform-origin: center top;
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        /* Luxe Search Bar */
        .search-box {
            position: relative;
            margin-bottom: 24px;
            z-index: 10001;
        }

        .search-icon {
            position: absolute;
            left: 28px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 22px;
            z-index: 2;
            transition: all 0.3s ease;
            filter: drop-shadow(0 0 8px rgba(0, 212, 255, 0.6));
        }

        .search-input {
            width: 100%;
            background: rgba(15, 15, 15, 0.8);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 50px;
            padding: 24px 32px 24px 68px;
            color: var(--text-primary);
            font-size: 17px;
            outline: none;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'DM Sans', sans-serif;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.3),
                        0 0 0 0 rgba(245, 158, 11, 0);
            font-weight: 500;
        }

        .search-input::placeholder {
            color: var(--text-muted);
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: var(--teal);
            background: rgba(15, 15, 15, 0.95);
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.4),
                        0 0 20px rgba(0, 212, 255, 0.3);
            transform: scale(1.02);
            padding-top: 28px;
            padding-bottom: 20px;
        }

        .search-input:focus::placeholder {
            opacity: 0;
            transform: translateY(-10px);
        }

        .search-input:focus + .search-floating-label {
            opacity: 1;
            transform: translateY(0);
        }

        .search-floating-label {
            position: absolute;
            left: 68px;
            top: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #F59E0B;
            opacity: 0;
            transform: translateY(5px);
            transition: all 0.3s ease;
            pointer-events: none;
        }

        /* Innovative Premium Dropdowns */
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .filter-group {
            position: relative;
        }

        .filter-group label {
            display: block;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            color: var(--text-muted);
            margin-bottom: 10px;
            padding-left: 4px;
        }

        /* Custom Dropdown Button */
        .custom-dropdown-btn {
            width: 100%;
            background: rgba(15, 15, 15, 0.8);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 50px;
            padding: 16px 20px;
            color: var(--text-primary);
            font-size: 15px;
            font-weight: 600;
            outline: none;
            cursor: pointer;
            transition: border-color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                        box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                        transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'DM Sans', sans-serif;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.2);
            text-align: left;
        }

        .custom-dropdown-btn:hover {
            border-color: var(--teal);
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.2),
                        0 0 20px rgba(0, 212, 255, 0.3);
            transform: translateY(-2px);
        }

        .custom-dropdown-btn.active {
            border-color: var(--teal);
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.3),
                        0 0 20px rgba(0, 212, 255, 0.3);
        }

        .dropdown-arrow {
            width: 12px;
            height: 12px;
            transition: transform 0.3s ease;
            flex-shrink: 0;
            margin-left: 8px;
        }

        .custom-dropdown-btn.active .dropdown-arrow {
            transform: rotate(180deg);
        }

        /* Custom Dropdown Menu */
        .custom-dropdown-menu {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            background: rgba(15, 15, 15, 0.98);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 16px;
            padding: 12px;
            z-index: 1000;
            backdrop-filter: blur(20px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.6),
                        0 0 0 1px rgba(0, 212, 255, 0.1);
            max-height: 320px;
            overflow-y: auto;
            display: none;
            animation: dropdownSlideIn 0.3s ease;
        }

        .custom-dropdown-menu.active {
            display: block;
        }

        @keyframes dropdownSlideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Scrollbar for dropdown */
        .custom-dropdown-menu::-webkit-scrollbar {
            width: 6px;
        }

        .custom-dropdown-menu::-webkit-scrollbar-track {
            background: rgba(26, 26, 26, 0.5);
            border-radius: 3px;
        }

        .custom-dropdown-menu::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #F59E0B 0%, #FF6B6B 100%);
            border-radius: 3px;
        }

        /* Pill Options Inside Dropdown */
        .dropdown-pill-option {
            padding: 10px 20px;
            border-radius: 50px;
            border: 2px solid rgba(245, 158, 11, 0.3);
            background: transparent;
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'DM Sans', sans-serif;
            white-space: nowrap;
            text-align: center;
            display: block;
            width: 100%;
            margin-bottom: 8px;
        }

        .dropdown-pill-option:last-child {
            margin-bottom: 0;
        }

        .dropdown-pill-option:hover {
            border-color: rgba(245, 158, 11, 0.6);
            transform: translateX(4px);
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.3),
                        0 4px 12px rgba(0, 0, 0, 0.2);
            background: rgba(245, 158, 11, 0.1);
        }

        .dropdown-pill-option.selected {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            border-color: transparent;
            color: #000000;
            font-weight: 700;
            box-shadow: 0 0 25px rgba(245, 158, 11, 0.5),
                        0 4px 16px rgba(0, 0, 0, 0.3);
        }

        /* Hide native selects */
        .filter-select {
            display: none;
        }

        /* Legacy Select (hidden, for functionality) */
        .filter-pill,
        .filter-pills,
        .filter-pill-group,
        .filter-pill-label {
            display: none;
        }

        /* Results Count with Animation */
        .results-count {
            margin-top: 4px;
            font-size: 15px;
            color: var(--text-secondary);
            font-weight: 600;
            text-align: center;
            animation: fadeIn 0.3s ease;
        }

        .results-count strong {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
            font-size: 17px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        /* AI Suggestions Toggle */
        .ai-suggestions-toggle-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 2px solid rgba(100, 116, 139, 0.15);
        }

        .ai-toggle-label {
            display: flex;
            align-items: center;
            gap: 14px;
            cursor: pointer;
            user-select: none;
        }

        .ai-toggle-input {
            display: none;
        }

        .ai-toggle-slider {
            position: relative;
            width: 48px;
            height: 26px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 50px;
            transition: all 0.3s ease;
            border: 2px solid rgba(0, 212, 255, 0.3);
        }

        .ai-toggle-slider::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: #FFFFFF;
            border-radius: 50%;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .ai-toggle-input:checked + .ai-toggle-slider {
            background: linear-gradient(135deg, #F59E0B, #FF6B6B);
            border-color: rgba(0, 212, 255, 0.3);
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.4);
            animation: gradientShift 3s ease infinite;
            background-size: 200% auto;
        }

        .ai-toggle-input:checked + .ai-toggle-slider::before {
            transform: translateX(22px);
            box-shadow: 0 2px 8px rgba(255, 107, 107, 0.5);
        }

        .ai-toggle-text {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            transition: color 0.3s ease;
        }

        .ai-toggle-label:hover .ai-toggle-text {
            color: #F59E0B;
        }

        .ai-icon {
            font-size: 16px;
            display: inline-block;
            animation: pulse 2s ease-in-out infinite;
            filter: drop-shadow(0 0 4px rgba(245, 158, 11, 0.6));
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .ai-suggestions-info {
            position: relative;
            cursor: help;
        }

        .ai-suggestions-info:hover .ai-suggestions-tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .ai-suggestions-tooltip {
            position: absolute;
            bottom: calc(100% + 12px);
            right: 0;
            background: rgba(15, 15, 15, 0.98);
            border: 2px solid rgba(0, 212, 255, 0.4);
            border-radius: 12px;
            padding: 12px 16px;
            width: 280px;
            font-size: 12px;
            color: var(--text-secondary);
            opacity: 0;
            visibility: hidden;
            transform: translateY(5px);
            transition: all 0.3s ease;
            pointer-events: none;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6);
            z-index: 1001;
        }

        .ai-suggestions-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            right: 20px;
            border: 6px solid transparent;
            border-top-color: rgba(0, 212, 255, 0.4);
        }

        /* AI Recommendations Banner */
        .ai-recommendations-banner {
            background: linear-gradient(135deg, rgba(100, 116, 139, 0.15), rgba(71, 85, 105, 0.15));
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 16px;
            padding: 20px 24px;
            margin-bottom: 32px;
            display: none;
            align-items: center;
            gap: 16px;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 24px rgba(0, 212, 255, 0.25);
            animation: fadeInScale 0.4s ease;
        }

        .ai-recommendations-banner.active {
            display: flex;
        }

        .ai-banner-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #00D4FF, #0EA5E9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
            animation: pulse 2s ease-in-out infinite, gradientShift 3s ease infinite;
            background-size: 200% auto;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.4);
        }

        .ai-banner-content {
            flex: 1;
        }

        .ai-banner-title {
            font-size: 16px;
            font-weight: 700;
            background: linear-gradient(135deg, #F59E0B, #FF6B6B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 4px;
        }

        .ai-banner-description {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .ai-banner-loading {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: #F59E0B;
        }

        .ai-loading-spinner {
            width: 16px;
            height: 16px;
            border: 2px solid rgba(245, 158, 11, 0.3);
            border-top-color: #F59E0B;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* AI Badge */
        .ai-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            background: rgba(0, 212, 255, 0.1);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 50px;
            font-size: 11px;
            font-weight: 700;
            color: var(--teal);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-left: 12px;
            transition: all 0.3s ease;
        }

        .ai-badge-icon {
            width: 14px;
            height: 14px;
            background: linear-gradient(135deg, #F59E0B, #FF6B6B);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }
        }

        /* Animation Grid */
        .animation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 28px;
        }

        .animation-card {
            position: relative;
            background: var(--bg-card);
            border-radius: 20px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid rgba(0, 212, 255, 0.3);
        }

        .animation-card:hover {
            transform: translateY(-12px);
            border-color: var(--teal);
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.6), 
                        0 0 40px rgba(0, 212, 255, 0.25),
                        0 0 20px rgba(245, 158, 11, 0.15);
        }
        
        /* Feature Card Styles */
        .feature-card {
            background: rgba(26, 26, 26, 0.6);
            padding: 32px;
            border-radius: 16px;
            border: 2px solid rgba(0, 212, 255, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        
        .feature-card:hover {
            transform: translateY(-12px);
            border-color: var(--teal);
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.6), 
                        0 0 40px rgba(0, 212, 255, 0.25),
                        0 0 20px rgba(245, 158, 11, 0.15);
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .filters-card {
                padding: 32px 24px;
            }

            .search-input {
                font-size: 15px;
                padding: 20px 24px 20px 60px;
            }

            .search-input:focus {
                transform: scale(1);
                padding-top: 24px;
                padding-bottom: 16px;
            }

            .filter-pills {
                flex-direction: column;
            }

            .filter-pill {
                width: 100%;
                text-align: center;
                justify-content: center;
            }

            .premium-banner {
                padding: 14px 24px;
            }

            .premium-banner-text {
                font-size: 0.9rem;
            }
        }
        
        /* FAQ Item Styles */
        .faq-item {
            background: var(--bg-secondary);
            padding: 28px;
            border-radius: 16px;
            border: 2px solid rgba(0, 212, 255, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        
        .faq-item:hover {
            transform: translateY(-12px);
            border-color: var(--teal);
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.6), 
                        0 0 40px rgba(0, 212, 255, 0.25),
                        0 0 20px rgba(245, 158, 11, 0.15);
        }
        
        .card-checkbox {
            position: absolute;
            top: 12px;
            right: 12px;
            z-index: 10;
        }
        
        .card-checkbox input[type="checkbox"] {
            display: none;
        }
        
        .card-checkbox label {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border: 2px solid rgba(245, 158, 11, 0.5);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .card-checkbox label svg {
            width: 18px;
            height: 18px;
            stroke: #FFFFFF;
            fill: none;
            stroke-width: 2;
            opacity: 0.7;
            transition: all 0.3s ease;
        }
        
        .card-checkbox label:hover {
            transform: scale(1.1);
            border-color: var(--teal);
            background: rgba(245, 158, 11, 0.1);
        }
        
        .card-checkbox label:hover svg {
            opacity: 1;
        }
        
        .card-checkbox input[type="checkbox"]:checked + label {
            background: rgba(245, 158, 11, 0.2);
            border-color: var(--teal);
        }
        
        .card-checkbox input[type="checkbox"]:checked + label svg {
            opacity: 1;
            stroke: var(--teal);
        }
        
        .card-checkbox input[type="checkbox"]:checked + label::after {
            content: '';
            position: absolute;
            top: -4px;
            right: -4px;
            width: 16px;
            height: 16px;
            background: var(--teal);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: black;
            font-size: 10px;
            font-weight: bold;
        }

        .card-thumbnail {
            position: relative;
            aspect-ratio: 4/3;
            overflow: hidden;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.08), rgba(245, 158, 11, 0.08));
        }

        .card-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .animation-card:hover .card-thumbnail img {
            transform: scale(1.1);
        }

        /* Icon badges - below GIF, above title */
        .icon-badge {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            cursor: help;
        }
        
        .icon-badge:hover {
            transform: scale(1.1);
        }
        
        .icon-badge-popular {
            background: rgba(245, 158, 11, 0.15);
            color: var(--amber);
            border: 2px solid rgba(245, 158, 11, 0.4);
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.2);
        }
        
        .icon-badge-sale {
            background: rgba(34, 197, 94, 0.15);
            color: #10B981;
            border: 2px solid rgba(34, 197, 94, 0.4);
            box-shadow: 0 2px 8px rgba(34, 197, 94, 0.2);
        }
        
        .icon-badge-holiday {
            background: rgba(239, 68, 68, 0.15);
            color: #EF4444;
            border: 2px solid rgba(239, 68, 68, 0.4);
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.2);
        }

        .card-overlay {
            position: absolute;
            inset: 0;
            background: rgba(20, 20, 20, 0.75);
            backdrop-filter: blur(6px);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 16px;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .animation-card:hover .card-overlay {
            opacity: 1;
        }

        .quick-preview-btn {
            padding: 12px 28px;
            background: rgba(0, 212, 255, 0.1);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 50px;
            color: var(--teal);
            font-weight: 600;
            cursor: pointer;
            font-size: 15px;
            transition: all 0.3s ease;
        }

        .quick-preview-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--teal);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
            transform: translateY(-2px);
        }

        .card-content {
            padding: 24px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 14px;
            transition: color 0.3s ease;
            font-family: 'Sora', sans-serif;
            color: var(--text-white);
        }

        .animation-card:hover .card-title {
            color: var(--amber);
        }

        .card-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 16px;
        }
        
        .card-badges {
            min-height: 60px;
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            margin-bottom: 8px;
            align-content: flex-start;
        }

        .tag {
            padding: 5px 12px;
            background: rgba(0, 212, 255, 0.08);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 8px;
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .card-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-top: 16px;
            border-top: 2px solid rgba(0, 212, 255, 0.1);
        }

        .card-duration {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: var(--text-muted);
        }

        .card-price {
            /* Styling moved to inline - see renderAnimations() */
        }

        .add-to-cart-btn {
            width: 100%;
            margin-top: 20px;
            padding: 14px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
            font-family: 'Sora', sans-serif;
            font-size: 15px;
        }

        .add-to-cart-btn:hover {
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
            transform: translateY(-2px);
        }

        .load-more {
            text-align: center;
            margin-top: 60px;
        }

        /* Footer */
        /* Custom Request Section */
        .custom-request-section {
            background: transparent;
            padding: 100px 32px;
            border-top: 2px solid rgba(0, 212, 255, 0.1);
            position: relative;
            z-index: 1;
        }

        .request-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .request-header {
            text-align: center;
            margin-bottom: 48px;
        }

        .request-subtitle {
            color: var(--text-secondary);
            font-size: 18px;
            margin-top: 16px;
            line-height: 1.6;
        }

        .request-form {
            background: rgba(26, 26, 26, 0.6);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 20px;
            padding: 48px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .form-group {
            margin-bottom: 24px;
            position: relative;
        }

        .form-group .filter-group {
            position: relative;
        }
        
        .form-group:has(.custom-dropdown-btn.active) {
            z-index: 10000;
        }

        .form-group .custom-dropdown-menu {
            z-index: 10001;
        }
        
        .form-group .custom-dropdown-menu.active {
            display: flex;
            flex-direction: column;
        }
        
        .form-group .dropdown-pill-option {
            width: 100%;
            text-align: left;
        }

        .form-group label {
            display: block;
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 12px;
            font-size: 14px;
        }

        .form-group input[type="text"],
        .form-group input[type="email"] {
            width: 100%;
            background: rgba(15, 15, 15, 0.8);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 50px !important;
            padding: 16px 24px;
            color: var(--text-primary);
            font-size: 15px;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        .form-group input[type="text"]:focus,
        .form-group input[type="email"]:focus {
            outline: none;
            border-color: var(--teal);
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.2),
                        0 0 20px rgba(0, 212, 255, 0.3);
        }

        .form-group select {
            width: 100%;
            background: rgba(15, 15, 15, 0.8);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 50px !important;
            padding: 16px 24px;
            color: var(--text-primary);
            font-size: 15px;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg width='12' height='12' viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M2 4L6 8L10 4' stroke='%2300D4FF' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 20px center;
            padding-right: 48px;
            font-weight: 600;
        }

        .form-group textarea {
            width: 100%;
            background: rgba(15, 15, 15, 0.8);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 16px !important;
            padding: 16px 24px;
            color: var(--text-primary);
            font-size: 15px;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.2);
            resize: vertical;
            min-height: 120px;
        }

        .form-group select option {
            background: #0F0F0F;
            color: var(--text-primary);
            padding: 12px 20px;
            font-weight: 600;
        }
        
        .form-group select option:hover {
            background: rgba(245, 158, 11, 0.2);
            color: var(--teal);
        }
        
        .form-group select option:checked {
            background: linear-gradient(135deg, #F59E0B, #FF6B6B);
            color: #000000;
            font-weight: 700;
        }

        .form-group select:focus {
            outline: none;
            border-color: var(--teal);
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.2),
                        0 0 20px rgba(0, 212, 255, 0.3);
        }
        
        .form-group textarea:focus {
            outline: none;
            border-color: var(--teal);
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.2),
                        0 0 20px rgba(0, 212, 255, 0.4);
        }

        .form-group select:hover {
            border-color: var(--teal);
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.2),
                        0 0 20px rgba(0, 212, 255, 0.3);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
            border-radius: 24px;
        }

        .submit-btn {
            width: 100%;
            padding: 18px;
            background: rgba(0, 212, 255, 0.1);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 50px;
            color: var(--teal);
            font-weight: 700;
            font-size: 16px;
            font-family: 'Sora', sans-serif;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--teal);
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }

            .request-form {
                padding: 32px 24px;
            }
        }

        .footer {
            background: #0a0a0a;
            border-top: 2px solid rgba(100, 116, 139, 0.15);
            padding: 60px 32px 32px;
            position: relative;
            z-index: 1;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 48px;
            max-width: 1400px;
            margin: 0 auto 48px;
        }

        .footer-brand {
            grid-column: span 2;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .footer-description {
            color: var(--text-primary);
            margin-bottom: 28px;
            max-width: 400px;
            line-height: 1.7;
        }

        .social-links {
            display: flex;
            gap: 12px;
        }

        .social-link {
            width: 44px;
            height: 44px;
            background: rgba(0, 212, 255, 0.05);
            border: 2px solid rgba(0, 212, 255, 0.15);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .social-link:hover {
            background: rgba(0, 212, 255, 0.15);
            border-color: var(--teal);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3);
        }

        .footer-section h4 {
            color: var(--text-primary);
            margin-bottom: 20px;
            font-weight: 700;
            font-family: 'Sora', sans-serif;
            font-size: 16px;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 15px;
        }

        .footer-links a:hover {
            color: var(--teal);
            padding-left: 4px;
        }

        .footer-bottom {
            max-width: 1400px;
            margin: 0 auto;
            padding-top: 32px;
            border-top: 2px solid rgba(0, 212, 255, 0.15);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .copyright {
            color: var(--text-muted);
            font-size: 14px;
        }

        .legal-links {
            display: flex;
            gap: 28px;
            font-size: 14px;
        }

        .legal-links a {
            color: var(--text-muted);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .legal-links a:hover {
            color: var(--teal);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translate(0, 0);
            }
            33% {
                transform: translate(30px, -30px);
            }
            66% {
                transform: translate(-20px, 20px);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.7;
                transform: scale(0.95);
            }
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateX(-50%) translateY(0);
            }
            50% {
                transform: translateX(-50%) translateY(-12px);
            }
        }

        /* Sticky Browse Library Button */
        .sticky-browse-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            padding: 12px 24px;
            background: rgba(0, 212, 255, 0.1);
            border: 2px solid rgba(0, 212, 255, 0.3);
            color: var(--teal);
            text-decoration: none;
            font-weight: 700;
            font-size: 14px;
            font-family: 'Sora', sans-serif;
            border-radius: 50px;
            backdrop-filter: blur(10px);
            opacity: 0;
            visibility: hidden;
            transform: translateY(100px);
            transition: all 0.3s ease;
        }

        .sticky-browse-btn.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .sticky-browse-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--teal);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }
        
        @media (max-width: 768px) {
            .sticky-browse-btn {
                display: none !important;
            }
        }
        
        /* Mobile Sticky CTA */
        .mobile-sticky-cta {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.95) 0%, rgba(0, 0, 0, 0.98) 100%);
            backdrop-filter: blur(20px);
            padding: 12px 20px;
            border-top: 2px solid rgba(245, 158, 11, 0.3);
            display: none;
            opacity: 0;
            transform: translateY(100%);
            transition: all 0.4s ease;
            box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .mobile-sticky-cta.show {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        .mobile-sticky-cta-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .mobile-sticky-cta-text {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .mobile-sticky-cta-text small {
            display: block;
            font-size: 11px;
            color: var(--text-muted);
            font-weight: 400;
        }
        
        .mobile-sticky-cta-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            border: none;
            border-radius: 50px;
            color: #000;
            font-weight: 700;
            font-size: 13px;
            white-space: nowrap;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
        }

        /* Responsive */
        @media (max-width: 768px) {
            /* Hide desktop nav elements */
            .nav-center {
                display: none;
            }
            
            .nav-search {
                display: none;
            }
            
            .btn-login {
                display: none;
            }

            /* Keep cart and user menu visible on mobile */
            .nav-right {
                display: flex;
                gap: 8px;
            }

            /* Show mobile menu button */
            .hamburger-menu {
                display: block !important;
                border: none !important;
                background: linear-gradient(135deg, var(--teal), var(--amber)) !important;
                -webkit-background-clip: text !important;
                -webkit-text-fill-color: transparent !important;
                background-clip: text !important;
                font-size: 28px;
                cursor: pointer;
                padding: 8px;
                outline: none !important;
                box-shadow: none !important;
                z-index: 1000 !important;
                position: relative !important;
            }
            
            .hamburger-menu:focus {
                outline: none !important;
                box-shadow: none !important;
            }
            
            /* Tighter navbar on mobile */
            .navbar-container {
                gap: 12px;
            }
            
            /* Mobile menu overlay */
            .nav-links {
                display: flex; /* Show on mobile */
                position: fixed;
                top: 0;
                right: -100%;
                width: 280px;
                height: 100vh;
                background: rgba(15, 15, 15, 0.98);
                backdrop-filter: blur(20px);
                flex-direction: column;
                gap: 0;
                padding: 80px 0 20px;
                border-left: 2px solid rgba(100, 116, 139, 0.15);
                transition: right 0.3s ease;
                z-index: 9999;
                overflow-y: auto;
            }
            
            .mobile-menu-close {
                display: flex; /* Show on mobile */
            }
            
            .nav-links.active {
                right: 0;
            }
            
            /* Mobile menu items */
            .nav-links li {
                width: 100%;
                text-align: left;
                padding: 0;
                border-bottom: 2px solid rgba(0, 212, 255, 0.05);
            }
            
            .nav-links li a {
                display: block;
                padding: 20px 32px;
                font-size: 16px;
                font-weight: 600;
            }
            
            .nav-links li:last-child {
                border-bottom: none;
            }
            
            /* Mobile menu close button */
            .mobile-menu-close {
                position: absolute;
                top: 20px;
                right: 20px;
                width: 40px;
                height: 40px;
                background: rgba(0, 212, 255, 0.1);
                border: none;
                border-radius: 8px;
                color: var(--text-primary);
                font-size: 24px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            /* Keep cart icon and user menu visible on mobile */
            .nav-actions {
                display: flex;
                gap: 12px;
                align-items: center;
            }
            
            .cart-icon {
                display: flex !important;
            }
            
            #userMenu {
                display: none !important;
            }
            
            #userMenu.active {
                display: flex !important;
                flex-direction: column;
                position: fixed;
                top: 80px;
                right: 20px;
                background: var(--bg-secondary);
                border: 2px solid rgba(0, 212, 255, 0.2);
                border-radius: 12px;
                padding: 16px;
                gap: 12px;
                z-index: 9998;
            }
            
            #userMenu a {
                white-space: nowrap;
            }

            .hero-stats {
                gap: 32px;
            }

            .footer-brand {
                grid-column: span 1;
            }

            .footer-bottom {
                flex-direction: column;
                text-align: center;
            }

            .animation-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }

            .navbar-container {
                padding: 0 20px;
            }

            .library-section {
                padding: 80px 20px;
            }

            .filters-card {
                padding: 24px;
            }
            
            .hero h1 {
                font-size: 40px;
            }
            
            .hero-description {
                font-size: 16px;
            }
            
            .hero-buttons {
                flex-direction: column;
                width: 100%;
                align-items: center;
            }
            
            .hero-buttons .btn {
                width: 100%;
            }
            
            /* Auth modal mobile optimization */
            .auth-modal-box {
                width: 95%;
                max-width: 100%;
            }
            
            .auth-close {
                display: flex; /* Show X button on mobile */
            }
            
            .auth-form {
                padding: 32px 24px;
            }
            
            .auth-modal-content {
                padding: 32px 24px;
            }
            
            /* Cart modal mobile */
            .cart-modal-content {
                width: 100%;
                max-width: 100%;
            }
        }

        @media (max-width: 480px) {
            .filters-grid {
                grid-template-columns: 1fr;
            }

            .animation-grid {
                grid-template-columns: 1fr;
            }
        }

        /* SVG Icons */
        /* Cart Modal */
        /* Auth Required Modal */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            z-index: 20000;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .auth-modal.active {
            display: flex;
        }
        
        .auth-modal-overlay {
            position: absolute;
            inset: 0;
        }
        
        .auth-modal-content {
            background: var(--bg-secondary);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 20px;
            padding: 48px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            animation: modalSlideIn 0.3s ease;
            position: relative;
            z-index: 1;
        }
        
        .auth-modal-box {
            background: var(--bg-secondary);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 20px;
            padding: 0;
            max-width: 480px;
            width: 90%;
            animation: modalSlideIn 0.3s ease;
            position: relative;
            z-index: 1;
            overflow: hidden;
            box-shadow: 0 0 40px rgba(0, 212, 255, 0.2);
        }
        
        @keyframes modalSlideIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .auth-close {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 44px;
            height: 44px;
            border: none;
            background: rgba(239, 68, 68, 0.2);
            color: #FCA5A5;
            font-size: 24px;
            font-weight: bold;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 2;
            display: none; /* Hidden on desktop */
            align-items: center;
            justify-content: center;
        }
        
        .auth-close:hover {
            background: rgba(239, 68, 68, 0.3);
            transform: scale(1.1);
        }
        
        .auth-tabs {
            display: flex;
            border-bottom: 2px solid rgba(0, 212, 255, 0.15);
        }
        
        .auth-tab {
            flex: 1;
            padding: 20px;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .auth-tab.active {
            color: var(--text-primary);
        }
        
        .auth-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
        }
        
        .auth-form {
            padding: 40px;
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .auth-form h2 {
            font-size: 28px;
            font-weight: 800;
            font-family: 'Sora', sans-serif;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .auth-subtitle {
            color: var(--text-secondary);
            margin-bottom: 28px;
            font-size: 14px;
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .form-group label {
            display: block;
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .password-input-wrapper {
            position: relative;
        }
        
        .form-group input {
            width: 100%;
            padding: 16px 24px;
            background: rgba(20, 20, 20, 0.6);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 50px;
            color: var(--text-primary);
            font-size: 15px;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
        }
        
        .password-input-wrapper input {
            padding-right: 50px; /* Make room for eye icon */
        }
        
        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            transition: color 0.3s ease;
        }
        
        .password-toggle:hover {
            color: var(--teal);
        }
        
        .eye-icon {
            width: 20px;
            height: 20px;
        }
        
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--teal);
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1),
                        0 0 20px rgba(0, 212, 255, 0.3);
        }
        
        /* Prevent autocomplete blue background */
        .form-group input:-webkit-autofill,
        .form-group input:-webkit-autofill:hover,
        .form-group input:-webkit-autofill:focus,
        .form-group input:-webkit-autofill:active {
            -webkit-box-shadow: 0 0 0 30px rgba(20, 20, 20, 0.6) inset !important;
            -webkit-text-fill-color: var(--text-primary) !important;
            border: 2px solid rgba(0, 212, 255, 0.2) !important;
            transition: background-color 5000s ease-in-out 0s;
        }
        
        .auth-form .btn {
            width: 100%;
            margin-top: 8px;
        }
        
        .auth-message {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .auth-message.error {
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid rgba(239, 68, 68, 0.3);
            color: #FCA5A5;
        }
        
        .auth-message.success {
            background: rgba(0, 212, 255, 0.1);
            border: 2px solid rgba(0, 212, 255, 0.3);
            color: var(--teal);
        }
        
        .auth-modal-icon {
            font-size: 64px;
            margin-bottom: 24px;
        }
        
        .auth-modal h2 {
            font-size: 28px;
            font-weight: 800;
            font-family: 'Sora', sans-serif;
            margin-bottom: 16px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .auth-modal p {
            color: var(--text-secondary);
            margin-bottom: 32px;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .auth-modal-buttons {
            display: flex;
            gap: 16px;
            justify-content: center;
        }
        
        .auth-modal-buttons .btn {
            padding: 14px 32px;
            font-size: 15px;
            border-radius: 50px;
        }
        
        .auth-modal-buttons .btn-secondary {
            background: rgba(0, 212, 255, 0.1);
            border: 2px solid rgba(0, 212, 255, 0.3);
            color: var(--teal);
        }
        
        .auth-modal-buttons .btn-secondary:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--teal);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        .cart-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 20000;
            display: none;
            align-items: center;
            justify-content: flex-end;
        }
        
        .cart-modal.active {
            display: flex;
        }
        
        .cart-modal-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
        }
        
        .cart-modal-content {
            position: relative;
            width: 500px;
            max-width: 90vw;
            height: 100vh;
            background: var(--bg-secondary);
            border-left: 2px solid rgba(100, 116, 139, 0.2);
            display: flex;
            flex-direction: column;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        .cart-header {
            padding: 24px;
            border-bottom: 2px solid rgba(0, 212, 255, 0.15);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .cart-header h2 {
            font-size: 24px;
            font-weight: 800;
            font-family: 'Sora', sans-serif;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .cart-close {
            width: 40px;
            height: 40px;
            border: none;
            background: rgba(0, 212, 255, 0.1);
            color: var(--text-primary);
            font-size: 24px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .cart-close:hover {
            background: rgba(0, 212, 255, 0.2);
            transform: rotate(90deg);
        }
        
        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }
        
        .cart-item {
            background: rgba(26, 26, 26, 0.6);
            border: 2px solid rgba(0, 212, 255, 0.1);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            gap: 16px;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .cart-item:hover {
            border-color: var(--teal);
        }
        
        .cart-item-checkbox {
            position: absolute;
            top: 12px;
            right: 12px;
        }
        
        .cart-item-checkbox input[type="checkbox"] {
            display: none;
        }
        
        .cart-item-checkbox label {
            display: block;
            width: 24px;
            height: 24px;
            border: 2px solid var(--teal);
            border-radius: 4px;
            background: rgba(0, 0, 0, 0.4);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .cart-item-checkbox input[type="checkbox"]:checked + label {
            background: linear-gradient(135deg, var(--teal), var(--amber));
        }
        
        .cart-item-checkbox input[type="checkbox"]:checked + label::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 14px;
            font-weight: bold;
        }
        
        .cart-item-image {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .cart-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .cart-item-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .cart-item-title {
            font-weight: 700;
            color: var(--text-primary);
            font-size: 15px;
        }
        
        .cart-item-duration {
            font-size: 13px;
            color: var(--text-muted);
        }
        
        .cart-item-price {
            font-size: 18px;
            font-weight: 800;
            color: #FFFFFF;
        }
        
        .cart-item-price .price-dollar {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .cart-item-remove {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 32px;
            height: 32px;
            border-radius: 6px;
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid rgba(239, 68, 68, 0.3);
            color: #EF4444;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }
        
        .cart-item-remove:hover {
            background: rgba(239, 68, 68, 0.2);
            transform: scale(1.1);
        }
        
        .cart-empty {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-muted);
        }
        
        .cart-empty svg {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            opacity: 0.3;
        }
        
        .cart-footer {
            padding: 24px;
            border-top: 2px solid rgba(0, 212, 255, 0.15);
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            font-size: 18px;
            font-weight: 700;
        }
        
        .cart-total-price {
            font-size: 28px;
            font-weight: 900;
            color: #FFFFFF;
            font-family: 'Sora', sans-serif;
        }
        
        .cart-total-price .price-dollar {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .icon {
            width: 20px;
            height: 20px;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        /* Pricing Banner */
        .pricing-banner {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            padding: 16px 24px;
            text-align: center;
            font-weight: 700;
            font-size: 18px;
            color: #000000;
            margin-bottom: 60px;
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(0, 212, 255, 0.3);
        }

        .pricing-banner span {
            font-size: 24px;
            margin: 0 8px;
            color: #000000;
        }

        /* Sale Badge */
        /* Buy Now Button */
        .buy-now-btn {
            width: 100%;
            margin-top: 20px;
            padding: 16px;
            background: rgba(16, 185, 129, 0.1);
            border: 2px solid rgba(16, 185, 129, 0.5);
            border-radius: 50px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            font-family: "Sora", sans-serif;
            font-size: 16px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .buy-now-btn:hover {
            background: rgba(16, 185, 129, 0.2);
            border-color: #10B981;
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.7),
                        0 0 60px rgba(16, 185, 129, 0.4);
        }

        .add-to-cart-btn {
            width: 100%;
            margin-top: 12px;
            padding: 14px;
            background: rgba(0, 212, 255, 0.1);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 50px;
            color: var(--teal);
            font-weight: 600;
            cursor: pointer;
            font-family: "Sora", sans-serif;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .add-to-cart-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--teal);
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        .card-price {
            font-size: 28px !important;
            font-weight: 800 !important;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: 24px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            border: 2px solid rgba(0, 212, 255, 0.2);
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 24px;
            cursor: pointer;
            z-index: 10;
        }

        .modal-thumbnail {
            width: 100%;
            aspect-ratio: 16/9;
            overflow: hidden;
            border-radius: 24px 24px 0 0;
        }

        .modal-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .modal-body {
            padding: 32px;
        }

        .modal-title {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 16px;
            font-family: "Sora", sans-serif;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .modal-description {
            color: var(--text-secondary);
            margin-bottom: 24px;
            font-size: 16px;
            line-height: 1.8;
        }

        .modal-price {
            font-size: 48px;
            font-weight: 900;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-family: "Sora", sans-serif;
            margin-bottom: 24px;
        }

        .hidden {
            display: none;
        }
    </style>
    
    <!-- Structured Data (JSON-LD) for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "MocapWork",
      "url": "https://goldstargamingtv-droid.github.io/mocap/",
      "description": "Professional motion capture animation marketplace for game developers, filmmakers, and 3D artists",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://goldstargamingtv-droid.github.io/mocap/?search={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Store",
      "name": "MocapWork",
      "description": "Buy professional motion capture animations for Unreal Engine, Unity, Blender, and more",
      "url": "https://goldstargamingtv-droid.github.io/mocap/",
      "priceRange": "Starting at $1",
      "paymentAccepted": "Credit Card, Stripe",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "US"
      }
    }
    </script>
    
    <!-- GSAP Animation Library -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
</head>
<body>
    <!-- Loading Progress Bar -->
    <div id="loadingBar" style="position: fixed; top: 0; left: 0; width: 0; height: 3px; background: linear-gradient(90deg, var(--teal), var(--amber)); z-index: 99999; transition: width 0.3s ease;"></div>
    
    <!-- Loading Progress Bar for Auth -->
    <div id="authLoadingBar" style="position: fixed; top: 0; left: 0; width: 0; height: 3px; background: linear-gradient(90deg, #F59E0B, #FF6B6B); z-index: 99999; transition: width 0.3s ease; display: none;"></div>
    
    <!-- Start loading bar immediately -->
    <script>
        // Start the loading bar as soon as this script runs (before page fully loads)
        const loadingBar = document.getElementById('loadingBar');
        
        // Immediately start at 10%
        loadingBar.style.width = '10%';
        
        // Progress to 30% over next 200ms
        setTimeout(() => {
            loadingBar.style.width = '30%';
        }, 200);
        
        // Slowly creep to 50% while waiting for page to load
        setTimeout(() => {
            loadingBar.style.width = '50%';
        }, 600);
    </script>
    
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Grain Overlay -->
    <div class="grain"></div>

    <!-- Navbar -->
    <nav class="navbar" id="navbar">
        <div class="navbar-container">
            <!-- Logo -->
            <a href="#" class="logo">
                <div class="logo-icon"></div>
                <span class="logo-text font-sora">
                    Mocap<span>Work</span>
                </span>
            </a>

            <!-- Main Nav Links -->
            <div class="nav-center">
                <a href="#library" class="nav-link">Animations</a>
                <a href="dashboard.html" onclick="handleDashboardClick(event); return false;" class="nav-link">My Library</a>
                <a href="#contact" class="nav-link">Contact</a>
                <a href="#faq" class="nav-link">FAQ</a>
            </div>

            <!-- Search Bar -->
            <div class="nav-search">
                <span class="search-icon-nav"></span>
                <input 
                    type="text" 
                    class="search-input-nav" 
                    id="searchInputNav" 
                    placeholder="Search animations..."
                    autocomplete="off"
                >
                <button class="search-clear-nav" id="searchClearNav" onclick="clearSearchNav()"></button>
                
                <div class="search-dropdown-nav" id="searchDropdownNav">
                    <!-- Results populated here -->
                </div>
            </div>

            <!-- Right Side Actions -->
            <div class="nav-right">
                <!-- Admin Dashboard Button (only for admins) -->
                <a href="admin-dashboard.html" id="adminDashboardBtn" class="btn-admin" style="display: none;" title="Admin Dashboard">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right: 6px;">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    Admin
                </a>
                
                <!-- Cart Icon -->
                <div class="cart-container">
                    <div class="cart-icon" id="cartIconNav" onclick="openCart()" title="View Cart" role="button" aria-label="Shopping cart with 0 items" tabindex="0">
                        <svg viewBox="0 0 24 24">
                            <defs>
                                <linearGradient id="cartGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#F59E0B;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#FF6B6B;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <circle cx="9" cy="21" r="1" stroke="url(#cartGradient)"></circle>
                            <circle cx="20" cy="21" r="1" stroke="url(#cartGradient)"></circle>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" stroke="url(#cartGradient)"></path>
                        </svg>
                        <span class="cart-badge">0</span>
                    </div>
                </div>
                
                <!-- Auth Links (not logged in) -->
                <div id="authLinks">
                    <a href="#" onclick="showAuthModal('login'); return false;" class="btn-login">Sign In</a>
                </div>
                
                <!-- Profile Icon (logged in) -->
                <div id="profileIcon" style="display: none;">
                    <div class="profile-container">
                        <div class="profile-icon" title="My Account">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                            </svg>
                        </div>
                        <div class="profile-dropdown">
                            <a href="dashboard.html" class="profile-dropdown-item">
                                <svg fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                                </svg>
                                <span>My Library</span>
                            </a>
                            <a href="dashboard.html#favorites" class="profile-dropdown-item">
                                <svg fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                </svg>
                                <span>Wishlist</span>
                            </a>
                            <a href="dashboard.html#purchaseHistory" class="profile-dropdown-item">
                                <svg fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                                </svg>
                                <span>Purchases</span>
                            </a>
                            <a href="dashboard.html#downloads" class="profile-dropdown-item">
                                <svg fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                                </svg>
                                <span>Downloads</span>
                            </a>
                            <a href="dashboard.html#settings" class="profile-dropdown-item">
                                <svg fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
                                </svg>
                                <span>Settings</span>
                            </a>
                            <div class="profile-dropdown-divider"></div>
                            <a href="#" onclick="event.stopPropagation(); logout(); return false;" class="profile-dropdown-item" style="color: #FF6B6B;">
                                <svg fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                                </svg>
                                <span>Sign Out</span>
                            </a>
                        </div>
                    </div>
                </div>
                
            </div>

            <!-- Mobile Menu -->
            <button class="hamburger-menu" aria-label="Toggle navigation menu" aria-expanded="false"></button>
            
            <ul class="nav-links">
                <button class="mobile-menu-close" onclick="toggleMobileMenu()"></button>
                
                <!-- Mobile Search -->
                <li style="padding: 20px; border-bottom: 2px solid rgba(0, 212, 255, 0.1);">
                    <div style="position: relative;" id="mobileSearchWrapper">
                        <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); opacity: 0.6;"></span>
                        <input 
                            type="text" 
                            id="mobileSearch"
                            placeholder="Search animations..."
                            style="width: 100%; padding: 10px 10px 10px 40px; background: rgba(26, 26, 26, 0.6); border: 2px solid rgba(0, 212, 255, 0.2); border-radius: 20px; color: white; font-family: 'DM Sans', sans-serif; font-size: 14px;"
                        >
                        <div class="search-dropdown-mobile" id="searchDropdownMobile" style="display: none; position: absolute; top: calc(100% + 8px); left: 0; right: 0; background: var(--bg-secondary); border: 2px solid rgba(100, 116, 139, 0.3); border-radius: 12px; max-height: 300px; overflow-y: auto; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5); z-index: 10000;">
                            <!-- Results populated here -->
                        </div>
                    </div>
                </li>
                
                <li><a href="#library" onclick="toggleMobileMenu()">Animations</a></li>
                <li><a href="dashboard.html" onclick="handleDashboardClick(event); toggleMobileMenu()">My Library</a></li>
                <li><a href="#contact" onclick="toggleMobileMenu()">Contact</a></li>
                <li><a href="#faq" onclick="toggleMobileMenu()">FAQ</a></li>
                <li id="mobileAuthLink"><a href="#" onclick="showAuthModal('login'); toggleMobileMenu(); return false;">Sign In</a></li>
            </ul>
        </div>
    </nav>

    <!-- Transparent Sticky Selection Bar -->
    <div class="selection-bar" id="selectionBar">
        <button class="selection-bar-btn selection-bar-btn-primary" onclick="addSelectedToCart()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            Add <span class="selection-count-badge" id="selectionCountBadge">0</span> to Cart
        </button>
        <button class="selection-bar-btn selection-bar-btn-secondary" onclick="clearSelection()">
            Clear Selection
        </button>
    </div>

    <!-- Sticky Browse Library Button -->
    <a href="#library" class="sticky-browse-btn" id="stickyBrowseBtn">
         Browse Library
    </a>

    <!-- Auth Modal (Login/Signup) -->
    <div id="authModal" class="auth-modal">
        <div class="auth-modal-overlay" onclick="closeAuthModal()"></div>
        <div class="auth-modal-box">
            <button class="auth-close" onclick="closeAuthModal()"></button>
            
            <!-- Tabs -->
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchAuthTab('login')">Sign In</button>
                <button class="auth-tab" onclick="switchAuthTab('signup')">Create Account</button>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="auth-form active">
                <h2>Welcome Back</h2>
                <p class="auth-subtitle">Sign in to access your motion capture library</p>
                
                <div id="loginMessage"></div>
                
                <form onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" placeholder="you@example.com" required aria-required="true">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <div class="password-input-wrapper">
                            <input type="password" id="loginPassword" placeholder="" required aria-required="true">
                            <button type="button" class="password-toggle" onclick="togglePassword('loginPassword', this)" aria-label="Toggle password visibility">
                                <svg class="eye-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary" id="loginBtn">Sign In</button>
                </form>
                <div style="text-align: center; margin-top: 20px;">
                    <a href="#" onclick="closeAuthModal(); return false;" style="color: var(--text-muted); text-decoration: none; font-size: 14px;">Close</a>
                </div>
            </div>

            <!-- Signup Form -->
            <div id="signupForm" class="auth-form">
                <h2>Create Account</h2>
                <p class="auth-subtitle">Join MocapWork to access premium animations</p>
                
                <div id="signupMessage"></div>
                
                <form onsubmit="handleSignup(event)">
                    <div class="form-group">
                        <label for="signupEmail">Email</label>
                        <input type="email" id="signupEmail" placeholder="you@example.com" required aria-required="true">
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">Password</label>
                        <div class="password-input-wrapper">
                            <input type="password" id="signupPassword" placeholder="" minlength="6" required aria-required="true">
                            <button type="button" class="password-toggle" onclick="togglePassword('signupPassword', this)">
                                <svg class="eye-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="signupConfirmPassword">Confirm Password</label>
                        <div class="password-input-wrapper">
                            <input type="password" id="signupConfirmPassword" placeholder="" minlength="6" required aria-required="true">
                            <button type="button" class="password-toggle" onclick="togglePassword('signupConfirmPassword', this)">
                                <svg class="eye-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary" id="signupBtn">Create Account</button>
                </form>
                <div style="text-align: center; margin-top: 20px;">
                    <a href="#" onclick="closeAuthModal(); return false;" style="color: var(--text-muted); text-decoration: none; font-size: 14px;">Close</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Required Modal (Keep for My Library click) -->
    <div id="authRequiredModal" class="auth-modal">
        <div class="auth-modal-overlay" onclick="closeAuthRequiredModal()"></div>
        <div class="auth-modal-content">
            <div class="auth-modal-icon"></div>
            <h2>Sign In Required</h2>
            <p>Please sign in or create an account to start collecting animations and view your library.</p>
            <div class="auth-modal-buttons">
                <button onclick="showAuthModal('login')" class="btn btn-primary">Sign In</button>
                <button onclick="showAuthModal('signup')" class="btn btn-secondary">Create Account</button>
            </div>
            <br>
            <a href="#" onclick="closeAuthRequiredModal(event)" style="color: var(--text-muted); text-decoration: none; font-size: 14px;">Close</a>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cartModal" class="cart-modal">
        <div class="cart-modal-overlay" onclick="closeCart()"></div>
        <div class="cart-modal-content">
            <div class="cart-header">
                <h2>Shopping Cart</h2>
                <button class="cart-close" onclick="closeCart()"></button>
            </div>
            
            <div class="cart-items" id="cartItems">
                <!-- Cart items will be dynamically inserted -->
            </div>
            
            <div class="cart-footer">
                <div class="cart-total">
                    <span>Total:</span>
                    <span class="cart-total-price">$0.00</span>
                </div>
                <button class="btn btn-primary" onclick="proceedToCheckout()">
                    Proceed to Checkout
                </button>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <main id="main-content">
    <section class="hero">
        <div class="hero-background">
            <div class="hero-static-bg"></div>
            <div class="floating-shape shape-1"></div>
            <div class="floating-shape shape-2"></div>
        </div>

        <div class="hero-content">
            <!-- Hero Preview Carousel -->
            <div class="hero-preview-carousel">
                <div class="carousel-container">
                    <!-- Item 1 -->
                    <div class="carousel-item side" data-index="0">
                        <div class="carousel-item-content">
                            <div class="carousel-placeholder">
                                <div class="carousel-placeholder-icon"></div>
                                <div class="carousel-placeholder-text">Running Pack</div>
                                <div class="carousel-placeholder-subtext">12 animations</div>
                            </div>
                        </div>
                        <div class="carousel-overlay">
                            <div class="carousel-overlay-text">Motion Capture Preview</div>
                        </div>
                    </div>

                    <!-- Item 2 -->
                    <div class="carousel-item side" data-index="1">
                        <div class="carousel-item-content">
                            <div class="carousel-placeholder">
                                <div class="carousel-placeholder-icon"></div>
                                <div class="carousel-placeholder-text">Combat Pack</div>
                                <div class="carousel-placeholder-subtext">24 animations</div>
                            </div>
                        </div>
                        <div class="carousel-overlay">
                            <div class="carousel-overlay-text">Featured Animation</div>
                        </div>
                    </div>

                    <!-- Center Item (Featured) - Item 3 -->
                    <div class="carousel-item center" data-index="2">
                        <div class="carousel-item-content">
                            <div class="carousel-placeholder">
                                <div class="carousel-placeholder-icon"></div>
                                <div class="carousel-placeholder-text">Acrobatic Pack</div>
                                <div class="carousel-placeholder-subtext">18 animations</div>
                            </div>
                        </div>
                        <div class="carousel-overlay">
                            <div class="carousel-overlay-text">Motion Capture Preview</div>
                        </div>
                    </div>

                    <!-- Item 4 -->
                    <div class="carousel-item side" data-index="3">
                        <div class="carousel-item-content">
                            <div class="carousel-placeholder">
                                <div class="carousel-placeholder-icon"></div>
                                <div class="carousel-placeholder-text">Climbing Pack</div>
                                <div class="carousel-placeholder-subtext">16 animations</div>
                            </div>
                        </div>
                        <div class="carousel-overlay">
                            <div class="carousel-overlay-text">Motion Capture Preview</div>
                        </div>
                    </div>

                    <!-- Item 5 -->
                    <div class="carousel-item side" data-index="4">
                        <div class="carousel-item-content">
                            <div class="carousel-placeholder">
                                <div class="carousel-placeholder-icon"></div>
                                <div class="carousel-placeholder-text">Sports Pack</div>
                                <div class="carousel-placeholder-subtext">20 animations</div>
                            </div>
                        </div>
                        <div class="carousel-overlay">
                            <div class="carousel-overlay-text">Motion Capture Preview</div>
                        </div>
                    </div>
                </div>

                <!-- Navigation Dots -->
                <div class="carousel-dots">
                    <div class="carousel-dot" data-index="0"></div>
                    <div class="carousel-dot" data-index="1"></div>
                    <div class="carousel-dot active" data-index="2"></div>
                    <div class="carousel-dot" data-index="3"></div>
                    <div class="carousel-dot" data-index="4"></div>
                </div>
            </div>

            <div class="hero-badge">
                <div class="badge-dot"></div>
                Premium Motion Capture Library
            </div>
            
            <h1 class="hero-title font-sora">
                <span style="color: var(--text-white);">Professional</span> <span class="gradient-text animated-gradient">Motion</span><br>
                <span class="gradient-text animated-gradient">Capture</span> <span style="color: var(--text-white);">Animations</span>
            </h1>
            
            <p class="hero-subtitle">
                <span class="hero-subtitle-buy-gradient">Buy premium motion capture animations</span><br>
                <span class="hero-subtitle-secondary" style="color: var(--text-primary);">for game development, film, and virtual production.</span><br>
                <span class="hero-subtitle-professional-glow">Professional mocap</span> <span id="typewriter-text" class="hero-subtitle-platforms-gradient"></span>
            </p>
            
            <!-- Platform Logos -->
            <div class="platform-logos">
                <img src="unreal-white.svg" alt="Unreal Engine" class="platform-logo">
                <img src="unity-white.svg" alt="Unity" class="platform-logo">
                <img src="blender-white.svg" alt="Blender" class="platform-logo">
            </div>
            
            <!-- Trust Badge (moved above buttons) -->
            <div class="trust-badge">
                <svg viewBox="0 0 24 24" fill="none" style="width: 16px; height: 16px; margin-right: 6px;">
                    <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="currentColor"/>
                </svg>
                <span style="font-weight: 600;">100+ Professional Animations</span>
                <span style="margin: 0 8px; opacity: 0.5;"></span>
                <span>Instant download with <span style="color: var(--amber); font-weight: 600;">royalty-free</span> licenses</span>
            </div>
            
            <div class="hero-buttons">
                <a href="#library" class="btn-secondary btn-primary-cta" style="padding: 14px 28px; font-size: 15px; position: relative;">
                     Browse Library
                    <span class="button-shine"></span>
                </a>
                <a href="#" id="heroSignUpBtn" onclick="showAuthModal('signup'); return false;" class="btn-secondary" style="padding: 14px 28px; font-size: 15px;">
                     Get Started Free
                </a>
            </div>


            <div class="hero-stats">
                <div class="stat-item">
                    <div class="stat-icon">
                        <!-- Film Reel Icon for Exclusive Rights -->
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="2" y="4" width="20" height="16" rx="2" stroke="currentColor" stroke-width="2"/>
                            <circle cx="7" cy="8" r="1.5" fill="currentColor"/>
                            <circle cx="7" cy="16" r="1.5" fill="currentColor"/>
                            <circle cx="17" cy="8" r="1.5" fill="currentColor"/>
                            <circle cx="17" cy="16" r="1.5" fill="currentColor"/>
                            <line x1="10" y1="4" x2="10" y2="20" stroke="currentColor" stroke-width="2"/>
                            <line x1="14" y1="4" x2="14" y2="20" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <span>Exclusive Rights</span>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">
                        <!-- Diamond/Sparkle Icon for Studio Quality -->
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="currentColor"/>
                        </svg>
                    </div>
                    <span>Studio Quality</span>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">
                        <!-- Lightning Download Icon for Instant Download -->
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13 2L3 14h8l-1 8 10-12h-8l1-8z" fill="currentColor"/>
                        </svg>
                    </div>
                    <span>Instant Download</span>
                </div>
            </div>

        </div>
    </section>

    <!-- Library Section -->
    <section id="library" class="library-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title font-sora">
                    Explore Our <span class="gradient-text animated-gradient">Animation Library</span>
                </h2>
            </div>

            <!-- Premium Teaser Banner -->
            <div class="premium-banner">
                <div style="margin-bottom: 4px; font-size: 14px; font-weight: 700; background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;"> Professional mocap animations for every project</div>
                <div class="premium-banner-text"> Premium Animations from $1  Instant Download  Royalty-Free Forever</div>
            </div>

            <!-- Ultra-Premium Filters Card -->
            <div class="filters-card">
                <!-- Luxe Search Bar -->
                <div class="search-box">
                    <span class="search-icon"></span>
                    <input type="text" id="searchInput" class="search-input" placeholder="Search animations by name, style, or motion...">
                    <span class="search-floating-label">Search Library</span>
                    <div class="search-dropdown-library" id="searchDropdownLibrary" style="display: none;">
                        <!-- Results populated here -->
                    </div>
                </div>

                <!-- Premium Dropdown Filters -->
                <div class="filters-grid">
                    <!-- Category Custom Dropdown -->
                    <div class="filter-group">
                        <label>Category</label>
                        <button class="custom-dropdown-btn" data-dropdown="category">
                            <span class="dropdown-selected-text">All Categories</span>
                            <svg class="dropdown-arrow" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 9L1 4h10z" fill="#00D4FF"/>
                            </svg>
                        </button>
                        <div class="custom-dropdown-menu" data-dropdown-menu="category">
                            <button class="dropdown-pill-option selected" data-value="All">All Categories</button>
                            <button class="dropdown-pill-option" data-value="Combat">Combat</button>
                            <button class="dropdown-pill-option" data-value="Locomotion">Locomotion</button>
                            <button class="dropdown-pill-option" data-value="Dance">Dance</button>
                            <button class="dropdown-pill-option" data-value="Idle">Idle</button>
                            <button class="dropdown-pill-option" data-value="Emotes">Emotes</button>
                        </div>
                        <select id="categoryFilter" class="filter-select">
                            <option value="All">All Categories</option>
                            <option value="Combat">Combat</option>
                            <option value="Locomotion">Locomotion</option>
                            <option value="Dance">Dance</option>
                            <option value="Idle">Idle</option>
                            <option value="Emotes">Emotes</option>
                        </select>
                    </div>

                    <!-- Gender Custom Dropdown -->
                    <div class="filter-group">
                        <label>Gender</label>
                        <button class="custom-dropdown-btn" data-dropdown="gender">
                            <span class="dropdown-selected-text">All</span>
                            <svg class="dropdown-arrow" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 9L1 4h10z" fill="#00D4FF"/>
                            </svg>
                        </button>
                        <div class="custom-dropdown-menu" data-dropdown-menu="gender">
                            <button class="dropdown-pill-option selected" data-value="All">All</button>
                            <button class="dropdown-pill-option" data-value="Male">Male</button>
                            <button class="dropdown-pill-option" data-value="Female">Female</button>
                            <button class="dropdown-pill-option" data-value="Unisex">Unisex</button>
                        </div>
                        <select id="genderFilter" class="filter-select">
                            <option value="All">All</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Unisex">Unisex</option>
                        </select>
                    </div>

                    <!-- Style Custom Dropdown -->
                    <div class="filter-group">
                        <label>Style</label>
                        <button class="custom-dropdown-btn" data-dropdown="style">
                            <span class="dropdown-selected-text">All Styles</span>
                            <svg class="dropdown-arrow" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 9L1 4h10z" fill="#00D4FF"/>
                            </svg>
                        </button>
                        <div class="custom-dropdown-menu" data-dropdown-menu="style">
                            <button class="dropdown-pill-option selected" data-value="All">All Styles</button>
                            <button class="dropdown-pill-option" data-value="Realistic">Realistic</button>
                            <button class="dropdown-pill-option" data-value="Stylized">Stylized</button>
                        </div>
                        <select id="styleFilter" class="filter-select">
                            <option value="All">All Styles</option>
                            <option value="Realistic">Realistic</option>
                            <option value="Stylized">Stylized</option>
                        </select>
                    </div>

                    <!-- Sort Custom Dropdown -->
                    <div class="filter-group">
                        <label>Sort By</label>
                        <button class="custom-dropdown-btn" data-dropdown="sort">
                            <span class="dropdown-selected-text">Most Popular</span>
                            <svg class="dropdown-arrow" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 9L1 4h10z" fill="#00D4FF"/>
                            </svg>
                        </button>
                        <div class="custom-dropdown-menu" data-dropdown-menu="sort">
                            <button class="dropdown-pill-option selected" data-value="popular">Most Popular</button>
                            <button class="dropdown-pill-option" data-value="newest">Newest First</button>
                            <button class="dropdown-pill-option" data-value="price-low">Price: Low to High</button>
                            <button class="dropdown-pill-option" data-value="price-high">Price: High to Low</button>
                        </div>
                        <select id="sortFilter" class="filter-select">
                            <option value="popular">Most Popular</option>
                            <option value="newest">Newest First</option>
                            <option value="price-low">Price: Low to High</option>
                            <option value="price-high">Price: High to Low</option>
                        </select>
                    </div>
                </div>

                <!-- Results Count with Animation -->
                <div class="results-count" id="resultsCount">Showing <strong>12</strong> of <strong>12</strong> animations</div>
                
                <!-- AI Suggestions Toggle -->
                <div class="ai-suggestions-toggle-container">
                    <span class="ai-badge" style="margin-left: 0; margin-bottom: 4px;"><span class="ai-badge-icon"></span>AI Enhanced Search</span>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <label class="ai-toggle-label">
                            <input type="checkbox" id="aiSuggestionsToggle" class="ai-toggle-input">
                            <span class="ai-toggle-slider"></span>
                            <span class="ai-toggle-text">
                                <span class="ai-icon"></span>
                                Show AI-Powered Recommendations
                            </span>
                        </label>
                        <div class="ai-suggestions-info">
                            <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                                <circle cx="7" cy="7" r="6" stroke="#A8A593" stroke-width="1.5"/>
                                <path d="M7 4V7M7 10H7.01" stroke="#A8A593" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                            <div class="ai-suggestions-tooltip">
                                AI analyzes your browsing history, searches, and purchases to suggest animations tailored to your projects
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Recommendations Banner -->
            <div class="ai-recommendations-banner" id="aiRecommendationsBanner">
                <div class="ai-banner-icon"></div>
                <div class="ai-banner-content">
                    <div class="ai-banner-title">AI-Powered Recommendations</div>
                    <div class="ai-banner-description" id="aiRecommendationText">Analyzing your preferences...</div>
                    <div class="ai-banner-loading" id="aiLoadingIndicator">
                        <div class="ai-loading-spinner"></div>
                        <span>Generating personalized suggestions...</span>
                    </div>
                </div>
            </div>

            <!-- Animation Grid -->
            <div class="animation-grid" id="animationGrid">
                <!-- Cards will be dynamically inserted here -->
            </div>

            <div class="load-more">
                <button type="button" class="btn btn-secondary" style="padding: 16px 40px;" onclick="loadMore(); return false;" id="loadMoreBtn">Load More Animations</button>
                <button type="button" class="btn btn-secondary" style="padding: 16px 40px; display: none;" onclick="scrollToTop(); return false;" id="backToTopBtn"> Back to Top</button>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section style="background: transparent; padding: 80px 20px; border-top: 2px solid rgba(0, 212, 255, 0.1); position: relative; z-index: 1;">
        <div style="max-width: 1400px; margin: 0 auto;">
            <div style="text-align: center; margin-bottom: 60px;">
                <h2 style="font-size: 42px; font-weight: 900; font-family: 'Sora', sans-serif; margin-bottom: 16px;">
                    <span style="color: white;">Professional</span> <span class="gradient-text animated-gradient">Motion Capture</span> <span style="color: white;">for Every Project</span>
                </h2>
                <p style="color: var(--text-secondary); font-size: 18px; max-width: 700px; margin: 0 auto;">
                    Our motion capture animations are trusted by game developers, filmmakers, and 3D artists worldwide. 
                    Each mocap asset is studio-quality and ready for immediate use in your projects.
                </p>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 32px;">
                <div class="feature-card">
                    <div style="font-size: 36px; margin-bottom: 16px;"></div>
                    <h3 style="font-size: 22px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px;">Game Development Ready</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Optimized motion capture animations for Unreal Engine and Unity. Perfect for AAA games, indie projects, and everything in between. 
                        All mocap files include standard FBX format for seamless integration.
                    </p>
                </div>
                
                <div class="feature-card">
                    <div style="font-size: 36px; margin-bottom: 16px;"></div>
                    <h3 style="font-size: 22px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px;">Film & Animation</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        High-quality mocap animations for film, TV, and animated content. Compatible with Blender, Maya, 3ds Max, and Cinema 4D. 
                        Professional motion capture data captured in our studio facility.
                    </p>
                </div>
                
                <div class="feature-card">
                    <div style="font-size: 36px; margin-bottom: 16px;"></div>
                    <h3 style="font-size: 22px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px;">Instant Download</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Buy mocap animations and download immediately. No subscription required. 
                        Get lifetime access to your purchased motion capture files with unlimited re-downloads from your dashboard.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Custom Request Section -->
    <section class="custom-request-section" id="contact">
        <div class="request-container">
            <div class="request-content">
                <div class="request-header">
                    <h2 class="section-title font-sora"><span style="color: var(--text-white);">Need Custom</span> <span class="gradient-text animated-gradient">Motion Capture</span><span style="color: var(--text-white);">?</span></h2>
                    <p class="request-subtitle">Can't find what you're looking for? Our team can create bespoke animations tailored to your exact specifications.</p>
                </div>
                
                <form class="request-form" id="customRequestForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Your Name</label>
                            <input type="text" name="name" placeholder="John Doe" required>
                        </div>
                        <div class="form-group">
                            <label>Email Address</label>
                            <input type="email" name="email" placeholder="john@company.com" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Project Type</label>
                        <div class="filter-group">
                            <button type="button" class="custom-dropdown-btn" data-dropdown="projectType">
                                <span class="dropdown-selected-text">Select a project type</span>
                                <svg class="dropdown-arrow" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M6 9L1 4h10z" fill="#00D4FF"/>
                                </svg>
                            </button>
                            <div class="custom-dropdown-menu" data-dropdown-menu="projectType">
                                <button type="button" class="dropdown-pill-option" data-value="">Select a project type</button>
                                <button type="button" class="dropdown-pill-option" data-value="game">Game Development</button>
                                <button type="button" class="dropdown-pill-option" data-value="film">Film/Animation</button>
                                <button type="button" class="dropdown-pill-option" data-value="vr">VR/AR Experience</button>
                                <button type="button" class="dropdown-pill-option" data-value="training">Training/Simulation</button>
                                <button type="button" class="dropdown-pill-option" data-value="other">Other</button>
                            </div>
                            <input type="hidden" name="projectType" id="projectTypeInput" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Budget Range (Optional)</label>
                        <div class="filter-group">
                            <button type="button" class="custom-dropdown-btn" data-dropdown="budget">
                                <span class="dropdown-selected-text">Select budget range</span>
                                <svg class="dropdown-arrow" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M6 9L1 4h10z" fill="#00D4FF"/>
                                </svg>
                            </button>
                            <div class="custom-dropdown-menu" data-dropdown-menu="budget">
                                <button type="button" class="dropdown-pill-option" data-value="">Select budget range</button>
                                <button type="button" class="dropdown-pill-option" data-value="under-1k">Under $1,000</button>
                                <button type="button" class="dropdown-pill-option" data-value="1k-5k">$1,000 - $5,000</button>
                                <button type="button" class="dropdown-pill-option" data-value="5k-10k">$5,000 - $10,000</button>
                                <button type="button" class="dropdown-pill-option" data-value="10k-25k">$10,000 - $25,000</button>
                                <button type="button" class="dropdown-pill-option" data-value="25k-plus">$25,000+</button>
                            </div>
                            <input type="hidden" name="budget" id="budgetInput">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Describe Your Custom Animation Needs</label>
                        <textarea name="description" rows="5" placeholder="Tell us about the animations you need, including number of animations, style, character details, and timeline..." required></textarea>
                    </div>
                    
                    <button type="submit" class="submit-btn">
                        <span>Submit Request</span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" style="background: transparent; padding: 100px 20px; position: relative; z-index: 1;">
        <div style="max-width: 900px; margin: 0 auto;">
            <div style="text-align: center; margin-bottom: 60px;">
                <h2 style="font-size: 42px; font-weight: 900; font-family: 'Sora', sans-serif; color: var(--text-white); margin-bottom: 16px;">
                    Frequently Asked Questions
                </h2>
                <p style="color: var(--text-primary); font-size: 18px;">
                    Everything you need to know about buying motion capture animations
                </p>
            </div>
            
            <div style="display: flex; flex-direction: column; gap: 24px;">
                <!-- FAQ Item 1 -->
                <div class="faq-item">
                    <h3 style="font-size: 20px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px; color: var(--teal);">
                        What is motion capture and how does it work?
                    </h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        Motion capture (mocap) is the process of recording real human movement and translating it into digital 3D animation data. 
                        Our professional motion capture animations are recorded in a studio using advanced mocap technology, then cleaned and optimized for use in 
                        game engines like Unreal Engine and Unity, as well as 3D software like Blender, Maya, and 3ds Max.
                    </p>
                </div>
                
                <!-- FAQ Item 2 -->
                <div class="faq-item">
                    <h3 style="font-size: 20px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px; color: var(--teal);">
                        What file formats do your mocap animations come in?
                    </h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        All motion capture animations are provided in industry-standard FBX format, which is compatible with Unreal Engine, Unity, Blender, Maya, 
                        3ds Max, Cinema 4D, and virtually all major 3D software and game engines. Each mocap asset includes clean, optimized animation data 
                        ready for immediate use in your projects.
                    </p>
                </div>
                
                <!-- FAQ Item 3 -->
                <div class="faq-item">
                    <h3 style="font-size: 20px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px; color: var(--teal);">
                        Can I use these motion capture animations in commercial projects?
                    </h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        Yes! When you buy mocap animations from MocapWork, you receive a royalty-free license for commercial use. 
                        Use our professional motion capture in video games, films, commercials, virtual production, and any other commercial projects 
                        without additional fees or royalties. Perfect for game development studios, independent filmmakers, and 3D artists.
                    </p>
                </div>
                
                <!-- FAQ Item 4 -->
                <div class="faq-item">
                    <h3 style="font-size: 20px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px; color: var(--teal);">
                        How do I use motion capture animations in Unreal Engine?
                    </h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        Using our mocap animations in Unreal Engine is simple: 
                        1) Download your purchased motion capture files, 
                        2) Import the FBX file into your Unreal Engine project, 
                        3) Retarget the animation to your character skeleton, 
                        4) Start using the mocap in your game. 
                        Our animations are compatible with Unreal Engine 4 and Unreal Engine 5, including MetaHuman characters.
                    </p>
                </div>
                
                <!-- FAQ Item 5 -->
                <div class="faq-item">
                    <h3 style="font-size: 20px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px; color: var(--teal);">
                        Are Unity mocap assets compatible with Unity?
                    </h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        Absolutely! Our motion capture animations work perfectly with Unity. Simply import the FBX file into your Unity project, 
                        and the mocap will be ready to use with your humanoid characters. Our Unity mocap assets are compatible with Unity's Mecanim animation system 
                        and work with all Unity versions. Perfect for Unity game development, VR projects, and real-time applications.
                    </p>
                </div>
                
                <!-- FAQ Item 6 -->
                <div class="faq-item">
                    <h3 style="font-size: 20px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px; color: var(--teal);">
                        Do I need a subscription to buy mocap animations?
                    </h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        No subscription required! Buy motion capture animations individually as you need them. 
                        Each purchase gives you lifetime access to download and re-download your mocap files from your personal dashboard. 
                        No monthly fees, no hidden costsjust affordable, professional motion capture animations from $1.
                    </p>
                </div>
                
                <!-- FAQ Item 7 -->
                <div class="faq-item">
                    <h3 style="font-size: 20px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px; color: var(--teal);">
                        What types of mocap animations do you offer?
                    </h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        Our motion capture library includes fighting animations, walking cycles, running animations, idle poses, combat moves, 
                        dance mocap, sports movements, everyday actions, and character interactions. 
                        All professional motion capture for game development, film production, and 3D animation projects. 
                        New mocap animations added regularly to expand our library.
                    </p>
                </div>
                
                <!-- FAQ Item 8 -->
                <div class="faq-item">
                    <h3 style="font-size: 20px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px; color: var(--teal);">
                        Can I request custom motion capture animations?
                    </h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        Yes! We offer custom motion capture services for game developers and studios who need specific animations. 
                        Fill out our custom request form below with your requirements, and our motion capture team will provide a quote. 
                        Custom mocap is perfect for unique character movements, specialized actions, or project-specific animation needs.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <!-- Why Choose MocapWork -->
    <section style="background: var(--bg-secondary); padding: 80px 20px; border-top: 2px solid rgba(0, 212, 255, 0.1);">
        <div style="max-width: 1200px; margin: 0 auto; text-align: center;">
            <h2 style="font-size: 42px; font-weight: 900; font-family: 'Sora', sans-serif; margin-bottom: 20px;">
                <span style="color: white;">Why Choose Mocap</span><span class="gradient-text animated-gradient">Work</span> <span style="color: white;">for</span> <span class="gradient-text animated-gradient">Motion Capture</span><span style="color: white;">?</span>
            </h2>
            <p style="color: var(--text-secondary); font-size: 18px; max-width: 700px; margin: 0 auto 50px;">
                Trusted by game developers, filmmakers, and 3D artists worldwide
            </p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; margin-top: 50px;">
                <div>
                    <div style="font-size: 48px; margin-bottom: 16px; background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></div>
                    <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 12px;">Studio Quality Mocap</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Professional motion capture recorded with industry-leading mocap technology
                    </p>
                </div>
                <div>
                    <div style="font-size: 48px; margin-bottom: 16px; background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></div>
                    <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 12px;">Game Engine Ready</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Optimized for Unreal Engine, Unity, and all major game development platforms
                    </p>
                </div>
                <div>
                    <div style="font-size: 48px; margin-bottom: 16px; background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></div>
                    <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 12px;">Royalty-Free License</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Use mocap animations in unlimited commercial projects with no extra fees
                    </p>
                </div>
                <div>
                    <div style="font-size: 48px; margin-bottom: 16px; background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></div>
                    <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 12px;">Instant Download</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Buy and download motion capture files immediatelyno waiting
                    </p>
                </div>
            </div>
        </div>
    </section>

    </main>

    <footer class="footer">
        <div class="footer-grid">
            <div class="footer-brand">
                <div class="footer-logo">
                    <img src="logo.png" alt="MocapWork Logo" style="width: 50px; height: 50px; border-radius: 10px;">
                    <span class="logo-text font-sora">
                        Mocap<span>Work</span>
                    </span>
                </div>
                <p class="footer-description">
                    The premier destination for professional motion capture animations. 
                    Elevate your projects with studio-quality mocap data.
                </p>
                <div class="social-links">
                    <a href="#" class="social-link"></a>
                    <a href="#" class="social-link"></a>
                    <a href="#" class="social-link"></a>
                    <a href="#" class="social-link"></a>
                </div>
            </div>

            <div class="footer-section">
                <h4>Product</h4>
                <ul class="footer-links">
                    <li><a href="#">Browse Library</a></li>
                    <li><a href="#">Pricing Plans</a></li>
                    <li><a href="#">Enterprise</a></li>
                    <li><a href="#">API Access</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Support</h4>
                <ul class="footer-links">
                    <li><a href="#">Documentation</a></li>
                    <li><a href="#">Tutorials</a></li>
                    <li><a href="#">Contact Us</a></li>
                    <li><a href="#">FAQ</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright"> 2024 MocapWork. All rights reserved.</p>
            <div class="legal-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
                <a href="#">License Agreement</a>
            </div>
        </div>
    </footer>

    <!-- Quick View Modal -->
    <div class="modal-overlay hidden" id="quickViewModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()"></button>
            <div id="modalBody"></div>
        </div>
    </div>


    <!-- Stripe.js for Payments -->
    <script src="https://js.stripe.com/v3/"></script>
    
    <!-- Supabase JavaScript Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        // CACHE BUSTER - v9 - BUTTON TYPE + LOGGING
        console.log('========================================');
        console.log('INDEX.HTML VERSION 11 - ICON BADGES!');
        console.log('Loaded at:', new Date().toISOString());
        console.log('========================================');
        
        // Force scroll to top immediately on page load
        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'manual';
        }
        window.scrollTo(0, 0);
        
        // Detect when user comes back from Stripe (browser back button)
        window.addEventListener('pageshow', function(event) {
            // If page is being restored from cache (user clicked back)
            if (event.persisted) {
                const overlay = document.getElementById('stripe-loading-overlay');
                if (overlay) {
                    overlay.remove();
                }
            }
        });
        
        (function() {
            // Supabase Configuration
            const SUPABASE_URL = 'https://ekzablbemeponkrcitco.supabase.co';
            const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVremFibGJlbWVwb25rcmNpdGNvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5NTkzNDQsImV4cCI6MjA4MTUzNTM0NH0.bhr5lIwDUA3prPuCN7mBj5Bn8lJhalPFu5MMS5I1g2I';
            
            // Initialize Supabase client - make it global so carousel can access it
            window.supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
            const supabaseClient = window.supabaseClient; // Keep local reference for this scope
            
            // Stripe Configuration
            const STRIPE_PUBLISHABLE_KEY = 'pk_test_51SfQ2BQBChX7okucx4uosVidKjSy2aeDtIAJz3G2DdkFcnKKZWp3byJ8ZbIbSMfvUL6mFpBinviFcjs6dQStaqTN000OZa3XQn';
            const stripe = window.Stripe ? window.Stripe(STRIPE_PUBLISHABLE_KEY) : null;
            
            // Stripe Modal Variables
            let stripeElements;
            let cardNumberElement;
            let cardExpiryElement;
            let cardCvcElement;
            let currentClientSecret;
            let currentProductInfo = {};
            
            // ==========================================
            // STRIPE CHECKOUT MODAL FUNCTIONS
            // ==========================================
            
            // Initialize Stripe Elements
            function initializeStripeElements() {
                if (stripeElements) return; // Already initialized
                
                const elementStyles = {
                    base: {
                        color: '#FEFCE8',
                        fontFamily: '"DM Sans", sans-serif',
                        fontSize: '16px',
                        fontWeight: '400',
                        '::placeholder': {
                            color: '#A8A593'
                        }
                    },
                    invalid: {
                        color: '#FCA5A5',
                        iconColor: '#FCA5A5'
                    },
                    complete: {
                        color: '#10B981',
                        iconColor: '#10B981'
                    }
                };
                
                stripeElements = stripe.elements();
                
                // Create separate elements
                cardNumberElement = stripeElements.create('cardNumber', {
                    style: elementStyles,
                    placeholder: '1234 5678 9012 3456'
                });
                
                cardExpiryElement = stripeElements.create('cardExpiry', {
                    style: elementStyles,
                    placeholder: 'MM / YY'
                });
                
                cardCvcElement = stripeElements.create('cardCvc', {
                    style: elementStyles,
                    placeholder: 'CVC'
                });
                
                // Mount elements
                cardNumberElement.mount('#stripe-card-number');
                cardExpiryElement.mount('#stripe-card-expiry');
                cardCvcElement.mount('#stripe-card-cvc');
                
                // Handle errors for all elements
                [cardNumberElement, cardExpiryElement, cardCvcElement].forEach(element => {
                    element.on('change', (event) => {
                        if (event.error) {
                            showStripeError(event.error.message);
                        } else {
                            hideStripeError();
                        }
                    });
                });
            }
            
            // Open Stripe Checkout Modal
            async function openStripeCheckout(productName, price, clientSecret) {
                currentProductInfo = {
                    name: productName,
                    price: price,
                    clientSecret: clientSecret
                };
                currentClientSecret = clientSecret;
                
                // Update UI
                document.getElementById('stripe-product-name').textContent = productName;
                document.getElementById('stripe-product-price').textContent = `$${price.toFixed(2)}`;
                document.getElementById('stripe-total-price').textContent = `$${price.toFixed(2)}`;
                
                // Initialize Stripe Elements if not already done
                initializeStripeElements();
                
                // Show modal
                document.getElementById('stripeCheckoutModal').classList.add('active');
                
                console.log(' Stripe checkout modal opened');
            }
            
            // Close Stripe Checkout Modal
            function closeStripeCheckout() {
                const modal = document.getElementById('stripeCheckoutModal');
                modal.classList.remove('active');
                
                // Clear all card elements
                if (cardNumberElement) cardNumberElement.clear();
                if (cardExpiryElement) cardExpiryElement.clear();
                if (cardCvcElement) cardCvcElement.clear();
                
                // Hide error
                hideStripeError();
                
                // Reset button
                setPayButtonLoading(false);
            }
            
            // Make globally accessible
            window.closeStripeCheckout = closeStripeCheckout;
            window.openStripeCheckout = openStripeCheckout;
            
            // Show Thank You Modal (simple version)
            async function showThankYouModal(paymentIntentId) {
                console.log(' showThankYouModal called with:', paymentIntentId);
                
                // Show modal
                const thankYouModal = document.getElementById('thankYouModal');
                if (!thankYouModal) {
                    console.error(' Thank you modal not found');
                    alert('Payment successful! Check your dashboard for downloads.');
                    return;
                }
                
                thankYouModal.classList.add('active');
                
                // Show loading
                document.getElementById('thankYouLoading').style.display = 'block';
                document.getElementById('thankYouPreview').style.display = 'none';
                document.getElementById('thankYouDownload').style.display = 'none';
                if (document.getElementById('thankYouOrderDetails')) {
                    document.getElementById('thankYouOrderDetails').style.display = 'none';
                }
                if (document.getElementById('thankYouError')) {
                    document.getElementById('thankYouError').style.display = 'none';
                }
                
                try {
                    // Get user session
                    const { data: { session } } = await supabaseClient.auth.getSession();
                    
                    if (!session) {
                        throw new Error('Please sign in to view your purchase');
                    }
                    
                    // Wait a bit for webhook to process
                    console.log(' Waiting 2 seconds for webhook...');
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    // Query purchase from database - try payment_intent first, then session_id
                    let purchase = null;
                    let error = null;
                    
                    // Try searching by stripe_payment_intent
                    const result1 = await supabaseClient
                        .from('purchases')
                        .select('*, animations(*)')
                        .eq('stripe_payment_intent', paymentIntentId)
                        .eq('user_id', session.user.id)
                        .single();
                    
                    if (result1.data) {
                        purchase = result1.data;
                    } else {
                        // Fallback: try stripe_session_id (in case webhook uses different field)
                        const result2 = await supabaseClient
                            .from('purchases')
                            .select('*, animations(*)')
                            .eq('stripe_session_id', paymentIntentId)
                            .eq('user_id', session.user.id)
                            .single();
                        
                        purchase = result2.data;
                        error = result2.error;
                    }
                    
                    if (error || !purchase) {
                        throw new Error('Purchase not found. Please check your dashboard in a moment.');
                    }
                    
                    // Hide loading
                    document.getElementById('thankYouLoading').style.display = 'none';
                    
                    // Show animation preview
                    if (purchase.animations && purchase.animations.video_url) {
                        document.getElementById('thankYouPreview').style.display = 'block';
                        document.getElementById('thankYouGif').src = purchase.animations.video_url;
                        document.getElementById('thankYouAnimationName').textContent = purchase.animations.title;
                    }
                    
                    // Show download button
                    if (purchase.animations && purchase.animations.file_url) {
                        document.getElementById('thankYouDownload').style.display = 'block';
                        document.getElementById('thankYouDownloadBtn').href = purchase.animations.file_url;
                        document.getElementById('thankYouDownloadBtn').download = purchase.animations.title + '.zip';
                    }
                    
                    console.log(' Thank you modal loaded successfully!');
                    
                } catch (error) {
                    console.error('Error loading purchase:', error);
                    document.getElementById('thankYouLoading').style.display = 'none';
                    
                    // Show simple success message with dashboard link
                    const errorDiv = document.getElementById('thankYouError');
                    if (errorDiv) {
                        errorDiv.innerHTML = `
                            <p style="color: var(--text-secondary); text-align: center; margin-bottom: 16px;">
                                Your payment was successful! Your download will be available in your dashboard shortly.
                            </p>
                            <a href="dashboard.html" class="btn btn-primary" style="display: inline-block; text-decoration: none;">
                                Go to Dashboard
                            </a>
                        `;
                        errorDiv.style.display = 'block';
                        errorDiv.style.textAlign = 'center';
                    }
                }
            }
            
            // Make globally accessible
            window.showThankYouModal = showThankYouModal;
            
            // Show Error
            function showStripeError(message) {
                const errorDiv = document.getElementById('stripe-error-message');
                errorDiv.textContent = message;
                errorDiv.classList.add('show');
            }
            
            // Hide Error
            function hideStripeError() {
                const errorDiv = document.getElementById('stripe-error-message');
                errorDiv.classList.remove('show');
            }
            
            // Set Pay Button Loading State
            function setPayButtonLoading(loading) {
                const button = document.getElementById('stripe-pay-button');
                const buttonText = document.getElementById('stripe-button-text');
                const spinner = document.getElementById('stripe-button-spinner');
                
                if (loading) {
                    button.disabled = true;
                    buttonText.textContent = 'Processing...';
                    spinner.style.display = 'block';
                } else {
                    button.disabled = false;
                    buttonText.textContent = 'Pay Now';
                    spinner.style.display = 'none';
                }
            }
            
            // Handle Payment Submission
            document.addEventListener('DOMContentLoaded', () => {
                document.getElementById('stripe-pay-button')?.addEventListener('click', async (e) => {
                    e.preventDefault();
                    
                    setPayButtonLoading(true);
                    hideStripeError();
                    
                    try {
                        const { error, paymentIntent } = await stripe.confirmCardPayment(currentClientSecret, {
                            payment_method: {
                                card: cardNumberElement
                            }
                        });
                        
                        if (error) {
                            showStripeError(error.message);
                            setPayButtonLoading(false);
                        } else if (paymentIntent.status === 'succeeded') {
                            console.log(' Payment successful!', paymentIntent);
                            console.log(' Checking if showThankYouModal exists...');
                            console.log('window.showThankYouModal:', typeof window.showThankYouModal);
                            console.log('showThankYouModal:', typeof showThankYouModal);
                            
                            // Close checkout modal
                            closeStripeCheckout();
                            
                            // Show thank you modal - use window reference
                            if (typeof window.showThankYouModal === 'function') {
                                window.showThankYouModal(paymentIntent.id);
                            } else if (typeof showThankYouModal === 'function') {
                                showThankYouModal(paymentIntent.id);
                            } else {
                                console.error(' showThankYouModal not found!');
                                alert('Payment successful! Check your dashboard for downloads.');
                            }
                        }
                    } catch (err) {
                        console.error('Payment error:', err);
                        showStripeError('An unexpected error occurred. Please try again.');
                        setPayButtonLoading(false);
                    }
                });
                
                // Close modal on ESC key
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        const modal = document.getElementById('stripeCheckoutModal');
                        if (modal.classList.contains('active')) {
                            closeStripeCheckout();
                        }
                    }
                });
            });
        
        // API Helper Functions
        const API = {
            // Get all animations with optional filters
            async getAnimations(filters = {}) {
                let query = supabaseClient
                    .from('animations')
                    .select(`
                        *,
                        animation_tags(
                            tag_id,
                            tags(name)
                        )
                    `);

                // Apply filters
                if (filters.category && filters.category !== 'All') {
                    query = query.eq('category', filters.category);
                }
                if (filters.gender && filters.gender !== 'All') {
                    query = query.eq('gender', filters.gender);
                }
                if (filters.style && filters.style !== 'All') {
                    query = query.eq('style', filters.style);
                }
                if (filters.search) {
                    query = query.ilike('title', `%${filters.search}%`);
                }

                // Apply sorting - ALWAYS include ID as secondary sort for consistency
                if (filters.sort === 'popular') {
                    query = query.order('popular', { ascending: false }).order('id', { ascending: true });
                } else if (filters.sort === 'price-low') {
                    query = query.order('price', { ascending: true }).order('id', { ascending: true });
                } else if (filters.sort === 'price-high') {
                    query = query.order('price', { ascending: false }).order('id', { ascending: true });
                } else if (filters.sort === 'newest') {
                    query = query.order('created_at', { ascending: false }).order('id', { ascending: true });
                } else {
                    // DEFAULT: Order by ID for consistent results
                    query = query.order('id', { ascending: true });
                }

                const { data, error } = await query;
                
                if (error) {
                    console.error('Error fetching animations:', error);
                    return [];
                }

                // Transform data to match frontend format
                return data.map(anim => ({
                    id: anim.id,
                    title: anim.title,
                    slug: anim.slug,
                    description: anim.description,
                    price: parseFloat(anim.price),
                    duration: anim.duration,
                    category: anim.category,
                    gender: anim.gender,
                    style: anim.style,
                    popular: anim.popular,
                    onSale: anim.on_sale,
                    holidaySale: anim.holiday_sale,
                    salePercentage: anim.sale_percentage,
                    video: anim.video_url,
                    thumbnail: anim.thumbnail_url,
                    videoType: anim.video_type,
                    tags: anim.animation_tags && anim.animation_tags.length > 0 
                        ? anim.animation_tags.map(at => at.tags.name)
                        : [anim.category, anim.gender, anim.style].filter(Boolean),
                    frameRate: anim.frame_rate,
                    animationCount: anim.animation_count,
                    formats: anim.formats,
                    skeleton: anim.skeleton,
                    mocapProcess: anim.mocap_process
                }));
            },

            // Submit custom request
            async submitCustomRequest(formData) {
                const { data, error } = await supabaseClient
                    .from('custom_requests')
                    .insert([
                        {
                            name: formData.name,
                            email: formData.email,
                            project_type: formData.projectType,
                            description: formData.description,
                            budget: formData.budget || null
                        }
                    ]);

                if (error) {
                    console.error('Error submitting request:', error);
                    return { success: false, error: error.message };
                }

                return { success: true, data };
            },

            // Add to cart (localStorage for now)
            async addToCart(animationId) {
                const cart = JSON.parse(localStorage.getItem('cart') || '[]');
                if (!cart.includes(animationId)) {
                    cart.push(animationId);
                    localStorage.setItem('cart', JSON.stringify(cart));
                }
                return { success: true };
            },

            // Remove from cart
            async removeFromCart(animationId) {
                let cart = JSON.parse(localStorage.getItem('cart') || '[]');
                console.log('Removing from cart:', animationId, 'Current cart:', cart);
                cart = cart.filter(id => id !== animationId && id !== String(animationId));
                console.log('After removal:', cart);
                localStorage.setItem('cart', JSON.stringify(cart));
                return { success: true };
            },

            // Get cart items
            async getCartItems() {
                const cartIds = JSON.parse(localStorage.getItem('cart') || '[]');
                if (cartIds.length === 0) return [];
                
                const { data, error } = await supabaseClient
                    .from('animations')
                    .select('id, title, slug, price, thumbnail_url, video_url, video_type, on_sale, holiday_sale, sale_percentage')
                    .in('id', cartIds);
                
                return data || [];
            }
        };
        
        // Animation data
        // Animations will load from Supabase database
        let animations = [];
        let filteredAnimations = []; // Store current filtered/sorted results
        let selectedAnimations = [];
        let currentDisplayCount = 8;
        const itemsPerPage = 12;

        // Render animations
        function renderAnimations(filteredAnimations) {
            const grid = document.getElementById('animationGrid');
            grid.innerHTML = '';
            
            const displayAnimations = filteredAnimations.slice(0, currentDisplayCount);
            const loadMoreBtn = document.getElementById('loadMoreBtn');
            
            // Show/hide load more button
            const backToTopBtn = document.getElementById('backToTopBtn');
            if (loadMoreBtn) {
                if (filteredAnimations.length > displayAnimations.length) {
                    loadMoreBtn.style.display = 'inline-block';
                    if (backToTopBtn) backToTopBtn.style.display = 'none';
                } else {
                    loadMoreBtn.style.display = 'none';
                    if (backToTopBtn) backToTopBtn.style.display = 'inline-block';
                }
            }

            displayAnimations.forEach(anim => {
                const card = document.createElement('div');
                card.className = 'animation-card';
                
                let mediaElement = '';
                if (anim.videoType === 'image/gif') {
                    mediaElement = `<img src="${anim.video}" alt="${anim.title} - Professional motion capture animation for game development" loading="lazy" style="width: 100%; height: 100%; object-fit: cover;">`;
                } else {
                    mediaElement = `<img src="${anim.thumbnail}" alt="${anim.title} - Motion capture animation thumbnail" loading="lazy" style="width: 100%; height: 100%; object-fit: cover;">`;
                }
                
                card.innerHTML = `
                    <div class="card-checkbox" onclick="event.stopPropagation(); toggleSelection('${anim.id}')">
                        <input type="checkbox" id="check-${anim.id}" />
                        <label for="check-${anim.id}">
                            <svg viewBox="0 0 24 24">
                                <circle cx="9" cy="21" r="1"></circle>
                                <circle cx="20" cy="21" r="1"></circle>
                                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                            </svg>
                        </label>
                    </div>
                    <div class="card-thumbnail">
                        ${mediaElement}
                        <div class="card-overlay">
                            <a href="animation-detail.html?slug=${anim.slug}" class="quick-preview-btn" style="text-decoration: none;">View Details</a>
                        </div>
                    </div>
                    <div class="card-content">
                            <!-- Icon badges below GIF, above title -->
                            <div style="display: flex; gap: 8px; margin-bottom: 12px; min-height: 32px; align-items: center;">
                                ${anim.popular ? `
                                    <div class="icon-badge icon-badge-popular" title="Popular">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="currentColor"/>
                                        </svg>
                                    </div>
                                ` : ''}
                                ${anim.onSale ? `
                                    <div class="icon-badge icon-badge-sale" title="On Sale">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M21.41 11.58L12.41 2.58C12.05 2.22 11.55 2 11 2H4C2.9 2 2 2.9 2 4V11C2 11.55 2.22 12.05 2.59 12.42L11.59 21.42C11.95 21.78 12.45 22 13 22C13.55 22 14.05 21.78 14.41 21.41L21.41 14.41C21.78 14.05 22 13.55 22 13C22 12.45 21.77 11.94 21.41 11.58ZM5.5 7C4.67 7 4 6.33 4 5.5C4 4.67 4.67 4 5.5 4C6.33 4 7 4.67 7 5.5C7 6.33 6.33 7 5.5 7Z" fill="currentColor"/>
                                        </svg>
                                    </div>
                                ` : ''}
                                ${anim.holidaySale ? `
                                    <div class="icon-badge icon-badge-holiday" title="Holiday Sale">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M6 3L8 8H16L18 3M8 8L3 21H21L16 8M8 8H16M12 11V17M9 14H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </div>
                                ` : ''}
                            </div>
                            <h3 class="card-title">${anim.title}</h3>
                            <div class="card-tags">
                                ${anim.tags.slice(0, 3).map(tag => `<span class="tag">${tag}</span>`).join('')}
                            </div>
                            <div class="card-footer">
                                <div class="card-duration">
                                    <svg class="icon" viewBox="0 0 24 24">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <polyline points="12 6 12 12 16 14"></polyline>
                                    </svg>
                                    <span>${anim.duration}</span>
                                </div>
                                <div class="card-price">
                                    ${(anim.onSale || anim.holidaySale) && anim.salePercentage ? `
                                        <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 2px;">
                                            <span style="font-size: 14px; font-weight: 500; text-decoration: line-through; text-decoration-color: var(--text-muted);">
                                                <span style="background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">$</span><span style="color: var(--text-muted); text-decoration: line-through;">${anim.price.toFixed(2)}</span>
                                            </span>
                                            <span style="font-size: 22px; font-weight: 700; font-family: 'Sora', sans-serif; line-height: 1;">
                                                <span style="background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">$</span><span style="color: #FFFFFF;">${(anim.price * (1 - anim.salePercentage / 100)).toFixed(2)}</span>
                                            </span>
                                        </div>
                                    ` : `
                                        <span style="font-size: 22px; font-weight: 700; font-family: 'Sora', sans-serif; line-height: 1;">
                                            <span style="background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">$</span><span style="color: #FFFFFF;">${anim.price.toFixed(2)}</span>
                                        </span>
                                    `}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="padding: 0 24px 24px;">
                        <button class="buy-now-btn" onclick="event.stopPropagation(); handleBuyNow('${anim.id}', '${anim.title}', ${(anim.onSale || anim.holidaySale) && anim.salePercentage ? (anim.price * (1 - anim.salePercentage / 100)).toFixed(2) : anim.price})">
                             Buy Now
                        </button>
                        <button class="add-to-cart-btn" onclick="event.stopPropagation(); handleAddToCart('${anim.id}')">
                            <svg class="icon" viewBox="0 0 24 24">
                                <circle cx="9" cy="21" r="1"></circle>
                                <circle cx="20" cy="21" r="1"></circle>
                                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                            </svg>
                            Add to Cart
                        </button>
                    </div>
                `;
                grid.appendChild(card);
            });
            
            // Debug: Log alignment values
            console.log('ALIGNMENT CHECK - Min Heights Applied:');
            console.log('  Badges: 60px, Title: 72px, Tags: 76px, Price: 56px');
            console.log('  Version: 2024-12-20-v3 - PRICE COLORS FIXED');

            document.getElementById('resultsCount').innerHTML = 
                `Showing <strong>${Math.min(displayAnimations.length, filteredAnimations.length)}</strong> of <strong>${filteredAnimations.length}</strong> animations`;
            
            // Initialize particle effects after cards render
            if (typeof initCardParticles === 'function') {
                initCardParticles();
            }
        }

        // Filter function
        function filterAnimations() {
            console.log('=== FILTER ANIMATIONS CALLED ===');
            const searchQuery = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;
            const gender = document.getElementById('genderFilter').value;
            const style = document.getElementById('styleFilter').value;
            const sort = document.getElementById('sortFilter').value;
            
            console.log('Sort value:', sort);

            let filtered = animations.filter(anim => {
                const matchesSearch = !searchQuery || 
                    anim.title.toLowerCase().includes(searchQuery) ||
                    anim.tags.some(tag => tag.toLowerCase().includes(searchQuery));
                const matchesCategory = category === 'All' || anim.category === category;
                const matchesGender = gender === 'All' || anim.tags.includes(gender);
                const matchesStyle = style === 'All' || anim.tags.includes(style);

                return matchesSearch && matchesCategory && matchesGender && matchesStyle;
            });
            
            console.log('Filtered animations count:', filtered.length);
            console.log('First 3 titles BEFORE sort:', filtered.slice(0, 3).map(a => a.title));

            // Sort (stable - maintains original database order when values are equal)
            filtered.sort((a, b) => {
                if (sort === 'popular') {
                    if (b.popular !== a.popular) return b.popular - a.popular;
                    return a._originalIndex - b._originalIndex; // Maintain original order
                }
                if (sort === 'price-low') {
                    if (a.price !== b.price) return a.price - b.price;
                    return a._originalIndex - b._originalIndex;
                }
                if (sort === 'price-high') {
                    if (b.price !== a.price) return b.price - a.price;
                    return a._originalIndex - b._originalIndex;
                }
                return a._originalIndex - b._originalIndex; // Default: maintain database order
            });
            
            console.log('First 3 titles AFTER sort:', filtered.slice(0, 3).map(a => a.title));
            console.log('First 3 _originalIndex:', filtered.slice(0, 3).map(a => a._originalIndex));

            // Save filtered results and reset display count
            filteredAnimations = filtered;
            currentDisplayCount = 8; // Reset to 8 when filters change
            renderAnimations(filteredAnimations);
        }

        // Event listeners
        // Library search with dropdown
        const searchInputLibrary = document.getElementById('searchInput');
        const searchDropdownLibrary = document.getElementById('searchDropdownLibrary');
        let librarySearchTimeout;

        searchInputLibrary.addEventListener('input', function(e) {
            const query = e.target.value.trim();
            
            // Also filter animations
            filterAnimations();
            
            // Show dropdown with suggestions
            clearTimeout(librarySearchTimeout);
            
            if (query.length === 0) {
                searchDropdownLibrary.style.display = 'none';
                return;
            }
            
            if (query.length < 2) return;
            
            librarySearchTimeout = setTimeout(() => {
                performLibrarySearch(query);
            }, 300);
        });

        // Enter key for library search
        searchInputLibrary.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                searchDropdownLibrary.style.display = 'none';
                filterAnimations();
                // Scroll to above animation grid
                const animationGrid = document.getElementById('animationGrid');
                if (animationGrid) {
                    const yOffset = -100; // 100px above the grid
                    const y = animationGrid.getBoundingClientRect().top + window.pageYOffset + yOffset;
                    window.scrollTo({ top: y, behavior: 'smooth' });
                }
            }
        });

        function performLibrarySearch(query) {
            const lowerQuery = query.toLowerCase();
            
            // Filter animations (handle null values)
            const results = animations.filter(anim => 
                (anim.title && anim.title.toLowerCase().includes(lowerQuery)) ||
                (anim.category && anim.category.toLowerCase().includes(lowerQuery)) ||
                (anim.style && anim.style.toLowerCase().includes(lowerQuery))
            ).slice(0, 6);
            
            // Suggested searches
            const suggestions = [
                query,
                'fantasy ' + query,
                query + ' pack'
            ].slice(0, 3);
            
            let html = '';
            
            // Suggested searches
            if (suggestions.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">Suggested</div>';
                suggestions.forEach(sugg => {
                    const highlighted = sugg.replace(new RegExp(query, 'gi'), match => `<strong>${match}</strong>`);
                    html += `<div class="search-result-item" onclick="applyLibrarySearch('${sugg}')">`;
                    html += '<div class="search-result-icon"></div>';
                    html += `<div class="search-result-text">${highlighted}</div>`;
                    html += '</div>';
                });
                html += '</div>';
            }
            
            // Animation results
            if (results.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">Animations</div>';
                results.forEach(anim => {
                    const highlighted = anim.title.replace(new RegExp(query, 'gi'), match => `<strong>${match}</strong>`);
                    const thumbnailUrl = anim.thumbnail_url || anim.video_url;
                    html += `<div class="search-result-item" onclick="window.location.href='animation-detail.html?slug=${anim.slug}'" style="display: flex; align-items: center; gap: 12px;">`;
                    html += `<img src="${thumbnailUrl}" alt="${anim.title}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 8px; border: 2px solid rgba(0, 212, 255, 0.2);">`;
                    html += `<div class="search-result-text">${highlighted}</div>`;
                    html += '</div>';
                });
                html += '</div>';
            }
            
            searchDropdownLibrary.innerHTML = html;
            searchDropdownLibrary.style.display = 'block';
        }

        window.applyLibrarySearch = function(searchTerm) {
            searchInputLibrary.value = searchTerm;
            filterAnimations();
            searchDropdownLibrary.style.display = 'none';
        }

        // Close library dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.search-box')) {
                if (searchDropdownLibrary) {
                    searchDropdownLibrary.style.display = 'none';
                }
            }
        });

        document.getElementById('searchInput').addEventListener('input', filterAnimations);
        document.getElementById('categoryFilter').addEventListener('change', filterAnimations);
        document.getElementById('genderFilter').addEventListener('change', filterAnimations);
        document.getElementById('styleFilter').addEventListener('change', filterAnimations);
        document.getElementById('sortFilter').addEventListener('change', filterAnimations);

        // Custom Dropdown System
        function setupCustomDropdowns() {
            const dropdownBtns = document.querySelectorAll('.custom-dropdown-btn');
            const dropdownMenus = document.querySelectorAll('.custom-dropdown-menu');
            
            // Mapping of dropdown names to select IDs
            const selectMapping = {
                'category': 'categoryFilter',
                'gender': 'genderFilter',
                'style': 'styleFilter',
                'sort': 'sortFilter'
            };

            // Toggle dropdown on button click
            dropdownBtns.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const dropdownName = this.dataset.dropdown;
                    const menu = document.querySelector(`[data-dropdown-menu="${dropdownName}"]`);
                    
                    // Close all other dropdowns
                    dropdownBtns.forEach(b => {
                        if (b !== this) b.classList.remove('active');
                    });
                    dropdownMenus.forEach(m => {
                        if (m !== menu) m.classList.remove('active');
                    });
                    
                    // Toggle current dropdown
                    this.classList.toggle('active');
                    menu.classList.toggle('active');
                });
            });

            // Handle pill option clicks
            document.querySelectorAll('.dropdown-pill-option').forEach(option => {
                option.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const menu = this.closest('.custom-dropdown-menu');
                    const dropdownName = menu.dataset.dropdownMenu;
                    const btn = document.querySelector(`[data-dropdown="${dropdownName}"]`);
                    const selectedText = btn.querySelector('.dropdown-selected-text');
                    const selectId = selectMapping[dropdownName];
                    const select = document.getElementById(selectId);
                    
                    // Remove selected class from siblings
                    menu.querySelectorAll('.dropdown-pill-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Add selected class to clicked option
                    this.classList.add('selected');
                    
                    // Update button text
                    selectedText.textContent = this.textContent;
                    
                    // Update hidden select and trigger change (for filter dropdowns)
                    if (select) {
                        select.value = this.dataset.value;
                        select.dispatchEvent(new Event('change'));
                    }
                    
                    // Update hidden input (for contact form dropdowns)
                    const hiddenInput = document.getElementById(dropdownName + 'Input');
                    if (hiddenInput) {
                        hiddenInput.value = this.dataset.value;
                    }
                    
                    // Close dropdown
                    btn.classList.remove('active');
                    menu.classList.remove('active');
                });
            });

            // Close dropdowns when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.filter-group')) {
                    dropdownBtns.forEach(btn => btn.classList.remove('active'));
                    dropdownMenus.forEach(menu => menu.classList.remove('active'));
                }
            });
        }

        // AI Recommendations System
        let aiRecommendationsEnabled = false;
        let userBehaviorData = {
            searches: [],
            viewedAnimations: [],
            purchases: [],
            categories: {},
            styles: {}
        };

        // Track user behavior
        function trackUserBehavior() {
            // Track search queries
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    if (this.value.length > 2) {
                        userBehaviorData.searches.push({
                            query: this.value,
                            timestamp: Date.now()
                        });
                        // Keep last 20 searches
                        if (userBehaviorData.searches.length > 20) {
                            userBehaviorData.searches.shift();
                        }
                        saveUserBehavior();
                    }
                });
            }

            // Track animation views (when clicking on cards)
            document.addEventListener('click', function(e) {
                const card = e.target.closest('.animation-card');
                if (card && card.dataset.animation) {
                    try {
                        const animation = JSON.parse(card.dataset.animation);
                        userBehaviorData.viewedAnimations.push({
                            id: animation.id,
                            title: animation.title,
                            category: animation.category,
                            style: animation.style,
                            timestamp: Date.now()
                        });
                        
                        // Track category frequency
                        userBehaviorData.categories[animation.category] = 
                            (userBehaviorData.categories[animation.category] || 0) + 1;
                        
                        // Track style frequency
                        if (animation.style) {
                            userBehaviorData.styles[animation.style] = 
                                (userBehaviorData.styles[animation.style] || 0) + 1;
                        }
                        
                        // Keep last 50 viewed animations
                        if (userBehaviorData.viewedAnimations.length > 50) {
                            userBehaviorData.viewedAnimations.shift();
                        }
                        
                        saveUserBehavior();
                    } catch (e) {
                        console.error('Error tracking animation view:', e);
                    }
                }
            });
        }

        // Save behavior to localStorage
        function saveUserBehavior() {
            try {
                localStorage.setItem('mocapwork_user_behavior', JSON.stringify(userBehaviorData));
            } catch (e) {
                console.error('Error saving user behavior:', e);
            }
        }

        // Load behavior from localStorage
        function loadUserBehavior() {
            try {
                const saved = localStorage.getItem('mocapwork_user_behavior');
                if (saved) {
                    userBehaviorData = JSON.parse(saved);
                }
            } catch (e) {
                console.error('Error loading user behavior:', e);
            }
        }

        // Generate AI recommendations using Claude API
        async function generateAIRecommendations() {
            const banner = document.getElementById('aiRecommendationsBanner');
            const loadingIndicator = document.getElementById('aiLoadingIndicator');
            const recommendationText = document.getElementById('aiRecommendationText');
            
            if (!banner) return;
            
            banner.classList.add('active');
            loadingIndicator.style.display = 'flex';
            recommendationText.style.display = 'none';
            
            try {
                // Prepare user context for AI
                const userContext = {
                    recentSearches: userBehaviorData.searches.slice(-10).map(s => s.query),
                    viewedAnimations: userBehaviorData.viewedAnimations.slice(-20),
                    topCategories: Object.entries(userBehaviorData.categories)
                        .sort((a, b) => b[1] - a[1])
                        .slice(0, 3)
                        .map(e => e[0]),
                    topStyles: Object.entries(userBehaviorData.styles)
                        .sort((a, b) => b[1] - a[1])
                        .slice(0, 2)
                        .map(e => e[0]),
                    availableAnimations: animations.map(a => ({
                        id: a.id,
                        title: a.title,
                        category: a.category,
                        style: a.style,
                        tags: a.tags
                    }))
                };

                // Call Claude API for recommendations
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1024,
                        messages: [{
                            role: 'user',
                            content: `You are an AI recommendation engine for a motion capture animation marketplace. Based on the user's behavior data, recommend 6-12 animation IDs that best match their interests and needs.

User Behavior Data:
- Recent searches: ${userContext.recentSearches.join(', ') || 'none yet'}
- Viewed animations: ${userContext.viewedAnimations.map(a => a.title).join(', ') || 'none yet'}
- Preferred categories: ${userContext.topCategories.join(', ') || 'none yet'}
- Preferred styles: ${userContext.topStyles.join(', ') || 'none yet'}

Available animations: ${JSON.stringify(userContext.availableAnimations, null, 2)}

Return ONLY a JSON object with this structure:
{
  "recommendedIds": [list of animation IDs],
  "reasoning": "brief explanation of why these animations were recommended"
}

Focus on diversity while matching user preferences. Prioritize animations the user hasn't viewed yet.`
                        }]
                    })
                });

                const data = await response.json();
                
                if (data.content && data.content[0] && data.content[0].text) {
                    const aiResponse = JSON.parse(data.content[0].text.replace(/```json|```/g, '').trim());
                    
                    // Filter and display recommendations
                    const recommendedAnimations = animations.filter(a => 
                        aiResponse.recommendedIds.includes(a.id)
                    );
                    
                    // Update UI
                    loadingIndicator.style.display = 'none';
                    recommendationText.style.display = 'block';
                    recommendationText.textContent = aiResponse.reasoning;
                    
                    // Apply recommendations to grid
                    if (recommendedAnimations.length > 0) {
                        renderAnimations(recommendedAnimations);
                        document.getElementById('resultsCount').innerHTML = 
                            `Showing <strong>${recommendedAnimations.length}</strong> AI-recommended animations`;
                    }
                } else {
                    throw new Error('Invalid AI response');
                }
                
            } catch (error) {
                console.error('AI recommendation error:', error);
                loadingIndicator.style.display = 'none';
                recommendationText.style.display = 'block';
                recommendationText.textContent = 'Showing animations based on your browsing history and preferences';
                
                // Fallback: Use simple behavior-based filtering
                const fallbackRecommendations = getFallbackRecommendations();
                if (fallbackRecommendations.length > 0) {
                    renderAnimations(fallbackRecommendations);
                    document.getElementById('resultsCount').innerHTML = 
                        `Showing <strong>${fallbackRecommendations.length}</strong> recommended animations`;
                }
            }
        }

        // Fallback recommendation logic (doesn't use AI)
        function getFallbackRecommendations() {
            if (!userBehaviorData.viewedAnimations.length && !Object.keys(userBehaviorData.categories).length) {
                // New user: show popular animations
                return animations.filter(a => a.popular).slice(0, 12);
            }
            
            // Score animations based on user behavior
            const scored = animations.map(animation => {
                let score = 0;
                
                // Prefer categories user has viewed
                if (userBehaviorData.categories[animation.category]) {
                    score += userBehaviorData.categories[animation.category] * 3;
                }
                
                // Prefer styles user likes
                if (animation.style && userBehaviorData.styles[animation.style]) {
                    score += userBehaviorData.styles[animation.style] * 2;
                }
                
                // Boost popular items
                if (animation.popular) {
                    score += 1;
                }
                
                // Penalize already viewed
                const alreadyViewed = userBehaviorData.viewedAnimations.find(v => v.id === animation.id);
                if (alreadyViewed) {
                    score -= 5;
                }
                
                return { ...animation, aiScore: score };
            });
            
            // Return top scored animations
            return scored
                .sort((a, b) => b.aiScore - a.aiScore)
                .slice(0, 12);
        }

        // Setup AI toggle
        function setupAIRecommendations() {
            const toggle = document.getElementById('aiSuggestionsToggle');
            const banner = document.getElementById('aiRecommendationsBanner');
            
            if (!toggle || !banner) return;
            
            toggle.addEventListener('change', function() {
                aiRecommendationsEnabled = this.checked;
                
                if (aiRecommendationsEnabled) {
                    generateAIRecommendations();
                } else {
                    banner.classList.remove('active');
                    // Reset to normal filtered view
                    filterAnimations();
                }
            });
        }

        // Initialize everything
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                setupCustomDropdowns();
                loadUserBehavior();
                trackUserBehavior();
                setupAIRecommendations();
            });
        } else {
            setupCustomDropdowns();
            loadUserBehavior();
            trackUserBehavior();
            setupAIRecommendations();
        }

        // Navbar scroll effect & Sticky Browse Button
        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            const stickyBtn = document.getElementById('stickyBrowseBtn');
            const librarySection = document.getElementById('library');
            
            if (window.scrollY > 20) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
            
            // Show sticky button when scrolling past library (into features section)
            if (librarySection) {
                const libraryRect = librarySection.getBoundingClientRect();
                // Show when library section scrolls above viewport
                if (libraryRect.bottom < window.innerHeight - 200) {
                    stickyBtn.classList.add('show');
                } else {
                    stickyBtn.classList.remove('show');
                }
            }
            
            // Track active section for nav links
            const sections = [
                { id: 'library', link: 'a[href="#library"]' },
                { id: 'contact', link: 'a[href="#contact"]' },
                { id: 'faq', link: 'a[href="#faq"]' }
            ];
            
            let currentSection = '';
            const scrollPosition = window.scrollY + 150; // Offset for navbar
            
            sections.forEach(section => {
                const element = document.getElementById(section.id);
                if (element) {
                    const offsetTop = element.offsetTop;
                    const offsetBottom = offsetTop + element.offsetHeight;
                    
                    if (scrollPosition >= offsetTop && scrollPosition < offsetBottom) {
                        currentSection = section.id;
                    }
                }
            });
            
            // Update active states
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            if (currentSection) {
                const activeLink = document.querySelector(`.nav-link[href="#${currentSection}"]`);
                if (activeLink) {
                    activeLink.classList.add('active');
                }
            }
        });

        // Modal functions
        function openModal(animId) {
            const anim = animations.find(a => a.id === animId);
            if (!anim) return;
            
            const modalBody = `
                <div class="modal-thumbnail"><img src="${anim.video || anim.thumbnail}" alt="${anim.title} - Motion capture animation preview" loading="lazy"></div>
                <div class="modal-body">
                    <h2 class="modal-title">${anim.title}</h2>
                    <p class="modal-description">${anim.description || "Professional motion capture animation."}</p>
                    <div class="modal-price">$${anim.price}</div>
                    <button class="buy-now-btn"> Buy Now - $${anim.price}</button>
                </div>
            `;
            
            document.getElementById("modalBody").innerHTML = modalBody;
            document.getElementById("quickViewModal").classList.remove("hidden");
        }
        
        function closeModal() {
            document.getElementById("quickViewModal").classList.add("hidden");
        }
        
        document.getElementById("quickViewModal").addEventListener("click", function(e) {
            if (e.target === this) closeModal();
        });
        
        document.addEventListener("keydown", (e) => {
            if (e.key === "Escape") closeModal();
        });


        // Load More functionality
        window.loadMore = function() {
            console.log('=== LOAD MORE CLICKED ===');
            console.log('Current display count BEFORE:', currentDisplayCount);
            console.log('filteredAnimations length:', filteredAnimations.length);
            console.log('filteredAnimations:', filteredAnimations);
            
            if (!filteredAnimations || filteredAnimations.length === 0) {
                console.error('ERROR: filteredAnimations is empty!');
                alert('Error: No animations to display. Please refresh the page.');
                return;
            }
            
            currentDisplayCount += itemsPerPage;
            console.log('Current display count AFTER:', currentDisplayCount);
            console.log('Re-rendering with same filter/sort...');
            // Just re-render with increased count - DON'T re-filter or re-sort!
            renderAnimations(filteredAnimations);
        }
        
        window.scrollToTop = function() {
            document.getElementById('library').scrollIntoView({ behavior: 'smooth' });
        }

        // Stripe Payment Handlers
        window.handleBuyNow = async function(animationId, animationTitle, price) {
            // Check if user is logged in
            const { data: { user } } = await supabaseClient.auth.getUser();
            if (!user) {
                showAuthModal('login');
                return;
                return;
            }

            if (!stripe) {
                alert('Payment system is initializing. Please try again.');
                return;
            }

            // Show loading overlay
            const loading = document.createElement('div');
            loading.id = 'stripe-loading-overlay';
            loading.style.cssText = 'position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:9999;';
            loading.innerHTML = '<div style="background:#1a1a1a;padding:40px;border-radius:16px;text-align:center;border:2px solid rgba(100, 116, 139, 0.3);"><div style="font-size:24px;margin-bottom:16px;"></div><div style="font-size:18px;font-weight:700;color:#F59E0B;">Processing Payment...</div><div style="color:#E7E5D3;margin-top:8px;">Please wait</div></div>';
            document.body.appendChild(loading);

            try {
                const response = await fetch(`${SUPABASE_URL}/functions/v1/create-checkout`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                    },
                    body: JSON.stringify({
                        userId: user.id,
                        animationId: animationId,
                        animationTitle: animationTitle,
                        price: price,
                        currentPage: window.location.pathname + window.location.search
                    })
                });

                const { clientSecret, error, price: returnedPrice, productName } = await response.json();

                if (error) {
                    document.body.removeChild(loading);
                    alert('Error creating checkout: ' + error);
                    return;
                }

                document.body.removeChild(loading);
                openStripeCheckout(productName || animationTitle, returnedPrice || price, clientSecret);
            } catch (error) {
                document.body.removeChild(loading);
                console.error('Payment error:', error);
                alert('Error processing payment. Please try again.');
            }
        }

        window.handleAddToCart = function(animationId) {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            if (!cart.includes(animationId)) {
                cart.push(animationId);
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartBadge();
                
                // Google Analytics: Add to Cart
                const animation = animations.find(a => a.id === animationId);
                if (animation && typeof gtag !== 'undefined') {
                    gtag('event', 'add_to_cart', {
                        currency: 'USD',
                        value: animation.price,
                        items: [{
                            item_id: animation.id,
                            item_name: animation.title,
                            price: animation.price,
                            quantity: 1
                        }]
                    });
                }
                
                // Show success notification
                showNotification('Added to cart!', 'success');
            } else {
                // Show already in cart notification
                showNotification('Already in cart!', 'warning');
            }
        }
        
        // Bulk selection functions
        window.toggleSelection = function(animationId) {
            const checkbox = document.getElementById(`check-${animationId}`);
            
            if (checkbox.checked) {
                if (!selectedAnimations.includes(animationId)) {
                    selectedAnimations.push(animationId);
                }
            } else {
                selectedAnimations = selectedAnimations.filter(id => id !== animationId);
            }
            
            updateBulkActions();
        }
        
        window.addSelectedToCart = function() {
            if (selectedAnimations.length === 0) {
                // Show warning notification
                showNotification('Please select animations first', 'warning');
                return;
            }
            
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            let addedCount = 0;
            let alreadyInCartCount = 0;
            
            selectedAnimations.forEach(id => {
                if (!cart.includes(id)) {
                    cart.push(id);
                    addedCount++;
                } else {
                    alreadyInCartCount++;
                }
            });
            
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartBadge();
            
            // Show success notification
            if (addedCount > 0) {
                let msg = `Added ${addedCount} animation${addedCount > 1 ? 's' : ''} to cart!`;
                if (alreadyInCartCount > 0) {
                    msg += `<br><span style="font-size:12px;opacity:0.7;">${alreadyInCartCount} already in cart</span>`;
                }
                showNotification(msg, 'success');
            } else if (alreadyInCartCount > 0) {
                showNotification('All selected items already in cart!', 'warning');
            }
            
            clearSelection();
        }
        
        window.clearSelection = function() {
            selectedAnimations = [];
            document.querySelectorAll('.card-checkbox input[type="checkbox"]').forEach(cb => {
                cb.checked = false;
            });
            updateBulkActions();
        }
        
        function updateBulkActions() {
            const selectionBar = document.getElementById('selectionBar');
            const selectionCountBadge = document.getElementById('selectionCountBadge');
            
            if (selectedAnimations.length > 0) {
                selectionBar.classList.add('active');
                selectionCountBadge.textContent = selectedAnimations.length;
            } else {
                selectionBar.classList.remove('active');
            }
        }
        
        // Cart Modal Functions
        let selectedCartItems = [];
        
        window.openCart = async function() {
            const modal = document.getElementById('cartModal');
            modal.classList.add('active');
            await renderCartItems();
        }
        
        window.closeCart = function() {
            const modal = document.getElementById('cartModal');
            modal.classList.remove('active');
            selectedCartItems = [];
            
            // Check if there's a return URL from animation-detail page
            const returnUrl = sessionStorage.getItem('returnUrl');
            if (returnUrl) {
                sessionStorage.removeItem('returnUrl');
                window.location.href = returnUrl;
            }
        }
        
        async function renderCartItems() {
            const cartIds = JSON.parse(localStorage.getItem('cart') || '[]');
            const cartItemsContainer = document.getElementById('cartItems');
            
            if (cartIds.length === 0) {
                cartItemsContainer.innerHTML = `
                    <div class="cart-empty">
                        <span style="font-size: 80px; margin-bottom: 20px; opacity: 0.3;"></span>
                        <h3 style="margin-bottom: 12px; font-size: 16px;">Your cart is empty</h3>
                        <p style="font-size: 13px; opacity: 0.7; line-height: 1.4;">Any animations you add to your cart will be displayed here.</p>
                    </div>
                `;
                document.querySelector('.cart-total-price').innerHTML = '<span class="price-dollar">$</span>0.00';
                return;
            }
            
            try {
                const cartItems = await API.getCartItems();
                let total = 0;
                
                cartItemsContainer.innerHTML = cartItems.map(item => {
                    // Calculate sale price if applicable
                    const isOnSale = (item.on_sale || item.holiday_sale) && item.sale_percentage;
                    const finalPrice = isOnSale ? item.price * (1 - item.sale_percentage / 100) : item.price;
                    total += finalPrice;
                    
                    const imageUrl = item.video_type === 'image/gif' ? item.video_url : item.thumbnail_url;
                    return `
                        <div class="cart-item">
                            <div class="cart-item-image">
                                <img src="${imageUrl}" alt="${item.title} - Motion capture animation" loading="lazy" />
                            </div>
                            <div class="cart-item-info">
                                <div class="cart-item-title">${item.title}</div>
                                <div class="cart-item-price">
                                    ${isOnSale ? `
                                        <div style="display: flex; flex-direction: column; gap: 4px;">
                                            <span style="font-size: 12px; color: var(--text-muted); text-decoration: line-through; text-decoration-color: #EF4444;">$${item.price.toFixed(2)}</span>
                                            <span style="font-size: 18px; font-weight: 800; color: #FFFFFF;"><span class="price-dollar">$</span>${finalPrice.toFixed(2)}</span>
                                        </div>
                                    ` : `<span class="price-dollar">$</span>${item.price.toFixed(2)}`}
                                </div>
                            </div>
                            <button class="cart-item-remove" data-id="${item.id}" title="Remove from cart">
                                
                            </button>
                        </div>
                    `;
                }).join('');
                
                document.querySelector('.cart-total-price').innerHTML = '<span class="price-dollar">$</span>' + total.toFixed(2);
                
                // Add event listeners to remove buttons
                const removeButtons = cartItemsContainer.querySelectorAll('.cart-item-remove');
                removeButtons.forEach(btn => {
                    btn.addEventListener('click', async () => {
                        const animId = btn.getAttribute('data-id');
                        await removeFromCart(animId);
                    });
                });
            } catch (error) {
                console.error('Error loading cart:', error);
                cartItemsContainer.innerHTML = '<div class="cart-empty"><p>Error loading cart items</p></div>';
            }
        }
        
        // Remove single item from cart
        async function removeFromCart(animationId) {
            try {
                await API.removeFromCart(animationId);
                await renderCartItems();
                await updateCartBadge();
            } catch (error) {
                console.error('Error removing from cart:', error);
            }
        }
        
        window.toggleCartItemSelection = function(itemId) {
            const checkbox = document.getElementById(`cart-check-${itemId}`);
            
            if (checkbox.checked) {
                if (!selectedCartItems.includes(itemId)) {
                    selectedCartItems.push(itemId);
                }
            } else {
                selectedCartItems = selectedCartItems.filter(id => id !== itemId);
            }
            
            updateCartRemoveButton();
        }
        
        function updateCartRemoveButton() {
            const removeBtn = document.getElementById('removeSelectedBtn');
            if (selectedCartItems.length > 0) {
                removeBtn.style.display = 'block';
                removeBtn.textContent = `Remove Selected (${selectedCartItems.length})`;
            } else {
                removeBtn.style.display = 'none';
            }
        }
        
        window.removeSelectedFromCart = function() {
            if (selectedCartItems.length === 0) return;
            
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            cart = cart.filter(id => !selectedCartItems.includes(id));
            localStorage.setItem('cart', JSON.stringify(cart));
            
            selectedCartItems = [];
            updateCartBadge();
            renderCartItems();
        }
        
        window.proceedToCheckout = async function() {
            const cartIds = JSON.parse(localStorage.getItem('cart') || '[]');
            
            // Check if cart is empty first
            if (cartIds.length === 0) {
                // Show notification without closing cart
                showNotification('Your cart is empty!<br><span style="font-size:12px;opacity:0.7;">Add some animations to get started.</span>', 'error');
                return;
            }
            
            // Cart has items, proceed with checkout
            closeCart();
            checkoutCart();
        }

        window.checkoutCart = async function() {
            const cartIds = JSON.parse(localStorage.getItem('cart') || '[]');
            
            if (cartIds.length === 0) {
                return;
            }

            // Check if user is logged in
            const { data: { user } } = await supabaseClient.auth.getUser();
            if (!user) {
                showAuthModal('login');
                return;
                return;
            }

            if (!stripe) {
                alert('Payment system is initializing. Please try again.');
                return;
            }

            // Show loading
            const loading = document.createElement('div');
            loading.style.cssText = 'position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:9999;';
            loading.innerHTML = '<div style="background:#1a1a1a;padding:40px;border-radius:16px;text-align:center;border:2px solid rgba(100, 116, 139, 0.3);"><div style="font-size:24px;margin-bottom:16px;"></div><div style="font-size:18px;font-weight:700;color:#F59E0B;">Processing Cart...</div><div style="color:#E7E5D3;margin-top:8px;">Please wait</div></div>';
            document.body.appendChild(loading);

            try {
                const cartItems = await API.getCartItems();
                
                const response = await fetch(`${SUPABASE_URL}/functions/v1/create-checkout`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                    },
                    body: JSON.stringify({
                        userId: user.id,
                        cartItems: cartItems.map(item => ({
                            animationId: item.id,
                            animationTitle: item.title,
                            price: item.price
                        })),
                        currentPage: window.location.pathname + window.location.search
                    })
                });

                const { clientSecret, error, price, productName } = await response.json();

                if (error) {
                    document.body.removeChild(loading);
                    alert('Error creating checkout: ' + error);
                    return;
                }

                document.body.removeChild(loading);
                openStripeCheckout(productName || `Cart (${cartItems.length} items)`, price, clientSecret);
            } catch (error) {
                document.body.removeChild(loading);
                console.error('Cart checkout error:', error);
                alert('Error processing cart. Please try again.');
            }
        }
        
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            
            let colors = {
                success: {
                    bg: 'rgba(0, 212, 255, 0.15)',
                    border: 'rgba(0, 212, 255, 0.3)',
                    text: '#00D4FF',
                    icon: ''
                },
                warning: {
                    bg: 'rgba(245, 158, 11, 0.15)',
                    border: 'rgba(245, 158, 11, 0.3)',
                    text: '#F59E0B',
                    icon: ''
                },
                error: {
                    bg: 'rgba(255, 107, 107, 0.15)',
                    border: 'rgba(255, 107, 107, 0.3)',
                    text: '#FF6B6B',
                    icon: ''
                }
            };
            
            const style = colors[type] || colors.success;
            
            notification.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                background: ${style.bg};
                backdrop-filter: blur(20px);
                border: 2px solid ${style.border};
                border-radius: 50px;
                padding: 14px 24px;
                z-index: 99999;
                animation: slideInRight 0.3s ease;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
                display: flex;
                align-items: center;
                gap: 10px;
            `;
            
            notification.innerHTML = `
                <span style="font-size: 20px;">${style.icon}</span>
                <div style="color: ${style.text}; font-weight: 600; font-size: 14px;">${message}</div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => {
                    if (notification.parentNode) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Load animations from Supabase
        async function loadAnimations() {
            try {
                animations = await API.getAnimations();
                // Add original index to each animation for stable sorting
                animations = animations.map((anim, index) => ({ ...anim, _originalIndex: index }));
                window.animations = animations; // Make available in console for debugging
                console.log('========================================');
                console.log('TOTAL ANIMATIONS IN DATABASE:', animations.length);
                console.log('========================================');
                console.log('Loaded animations:', animations);
                console.log('Popular flags:', animations.map(a => ({ title: a.title, popular: a.popular, onSale: a.onSale, holidaySale: a.holidaySale })));
                
                // Check for URL parameters (from animation detail page tags/category)
                const urlParams = new URLSearchParams(window.location.hash.split('?')[1] || '');
                const categoryParam = urlParams.get('category');
                const searchParam = urlParams.get('search');
                
                if (categoryParam) {
                    // Set category filter
                    const categorySelect = document.getElementById('categoryFilter');
                    if (categorySelect) {
                        categorySelect.value = categoryParam;
                    }
                    // Scroll to library
                    setTimeout(() => {
                        document.getElementById('library')?.scrollIntoView({ behavior: 'smooth' });
                    }, 100);
                } else if (searchParam) {
                    // Set search query
                    const searchInput = document.getElementById('searchInput');
                    if (searchInput) {
                        searchInput.value = searchParam;
                    }
                    // Scroll to library
                    setTimeout(() => {
                        document.getElementById('library')?.scrollIntoView({ behavior: 'smooth' });
                    }, 100);
                }
                
                // Filter and render animations
                if (categoryParam || searchParam) {
                    filterAnimations();
                } else {
                    // Initial load - set filteredAnimations
                    filteredAnimations = animations;
                    renderAnimations(animations);
                }
            } catch (error) {
                console.error('Error loading animations:', error);
                alert('Error loading animations. Please make sure you have run the SQL schema in Supabase.');
            }
        }

        // Update filter function to work with database
        // Update cart badge
        async function updateCartBadge() {
            try {
                const cartItems = await API.getCartItems();
                const badge = document.querySelector('.cart-badge');
                if (badge) {
                    badge.textContent = cartItems.length;
                }
                
                // Update hover dropdown
                updateCartHoverDropdown(cartItems);
            } catch (error) {
                console.error('Error updating cart badge:', error);
            }
        }

        // Update cart hover dropdown
        function updateCartHoverDropdown(cartItems) {
            const cartHoverItems = document.getElementById('cartHoverItems');
            const cartHoverTotal = document.getElementById('cartHoverTotal');
            const checkoutBtn = document.getElementById('cartHoverCheckoutBtn');
            
            if (!cartHoverItems || !cartHoverTotal) return;
            
            if (cartItems.length === 0) {
                // Show empty state
                cartHoverItems.style.overflowY = 'hidden';
                cartHoverItems.innerHTML = `
                    <div class="cart-hover-empty">
                        <div class="cart-hover-empty-icon"></div>
                        <div>Your cart is empty</div>
                        <div style="font-size: 12px; margin-top: 8px; opacity: 0.7;">Any animations you add to your cart will be displayed here.</div>
                    </div>
                `;
                cartHoverTotal.innerHTML = '<span class="price-dollar">$</span>0.00';
                if (checkoutBtn) checkoutBtn.style.display = 'none';
            } else {
                // Show cart items
                cartHoverItems.style.overflowY = 'auto';
                let total = 0;
                let html = '';
                
                cartItems.forEach(item => {
                    const isOnSale = (item.on_sale || item.holiday_sale) && item.sale_percentage;
                    const finalPrice = isOnSale ? item.price * (1 - item.sale_percentage / 100) : item.price;
                    total += finalPrice;
                    
                    html += `
                        <div class="cart-hover-item" data-slug="${item.slug}">
                            <img src="${item.video_url}" alt="${item.title}" class="cart-hover-item-img">
                            <div class="cart-hover-item-info">
                                <div class="cart-hover-item-title">${item.title}</div>
                                <div class="cart-hover-item-price"><span class="price-dollar">$</span>${finalPrice.toFixed(2)}</div>
                            </div>
                            <button class="cart-hover-item-remove" data-id="${item.id}" title="Remove from cart">
                                
                            </button>
                        </div>
                    `;
                });
                
                cartHoverItems.innerHTML = html;
                cartHoverTotal.innerHTML = '<span class="price-dollar">$</span>' + total.toFixed(2);
                if (checkoutBtn) checkoutBtn.style.display = 'block';
                
                // Add event listeners to items and remove buttons
                const items = cartHoverItems.querySelectorAll('.cart-hover-item');
                items.forEach(item => {
                    const slug = item.getAttribute('data-slug');
                    const removeBtn = item.querySelector('.cart-hover-item-remove');
                    
                    item.addEventListener('click', (e) => {
                        if (!e.target.closest('.cart-hover-item-remove')) {
                            window.location.href = `animation-detail.html?slug=${slug}`;
                        }
                    });
                    
                    if (removeBtn) {
                        removeBtn.addEventListener('click', async (e) => {
                            e.stopPropagation();
                            const animId = removeBtn.getAttribute('data-id');
                            await removeFromCartHover(animId);
                        });
                    }
                });
            }
        }

        // Remove item from cart (from hover dropdown)
        window.removeFromCartHover = async function(animationId) {
            try {
                console.log('removeFromCartHover called with:', animationId);
                await API.removeFromCart(animationId);
                await updateCartBadge();
                showNotification('Removed from cart', 'warning');
            } catch (error) {
                console.error('Error removing from cart:', error);
            }
        }

        // Handle checkout from cart hover dropdown
        window.handleCartHoverCheckout = async function() {
            const cartIds = JSON.parse(localStorage.getItem('cart') || '[]');
            
            if (cartIds.length === 0) {
                alert('Your cart is empty');
                return;
            }

            // Check if user is logged in
            const { data: { user } } = await supabaseClient.auth.getUser();
            if (!user) {
                document.getElementById('cartHoverDropdown').style.display = 'none';
                showAuthModal('login');
                return;
            }

            if (!stripe) {
                alert('Payment system is initializing. Please try again.');
                return;
            }

            // Show loading
            const loading = document.createElement('div');
            loading.style.cssText = 'position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:9999;';
            loading.innerHTML = '<div style="background:#1a1a1a;padding:40px;border-radius:16px;text-align:center;border:2px solid rgba(100, 116, 139, 0.3);"><div style="font-size:24px;margin-bottom:16px;"></div><div style="font-size:18px;font-weight:700;color:#F59E0B;">Processing Cart...</div><div style="color:#E7E5D3;margin-top:8px;">Please wait</div></div>';
            document.body.appendChild(loading);

            try {
                const cartItems = await API.getCartItems();
                
                const response = await fetch(`${SUPABASE_URL}/functions/v1/create-checkout`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                    },
                    body: JSON.stringify({
                        userId: user.id,
                        cartItems: cartItems.map(item => {
                            const isOnSale = (item.on_sale || item.holiday_sale) && item.sale_percentage;
                            const finalPrice = isOnSale ? item.price * (1 - item.sale_percentage / 100) : item.price;
                            return {
                                animationId: item.id,
                                animationTitle: item.title,
                                price: finalPrice
                            };
                        }),
                        currentPage: window.location.pathname + window.location.search
                    })
                });

                const { clientSecret, error, price, productName } = await response.json();
                
                if (!clientSecret) {
                    document.body.removeChild(loading);
                    alert('Error creating checkout session. Please try again.');
                    return;
                }

                if (error) {
                    document.body.removeChild(loading);
                    alert('Error: ' + error);
                    return;
                }

                document.body.removeChild(loading);
                openStripeCheckout(productName || `Selected Cart Items (${cartItems.length})`, price, clientSecret);
            } catch (error) {
                document.body.removeChild(loading);
                console.error('Cart checkout error:', error);
                alert('Error processing cart. Please try again.');
            }
        }

        // Position and show/hide cart hover dropdown
        document.addEventListener('DOMContentLoaded', function() {
            const cartIcon = document.getElementById('cartIconNav');
            const cartHoverDropdown = document.getElementById('cartHoverDropdown');
            let hideTimeout;

            function positionCartDropdown() {
                if (!cartIcon || !cartHoverDropdown) return;
                
                const rect = cartIcon.getBoundingClientRect();
                cartHoverDropdown.style.top = (rect.bottom + 12) + 'px';
                cartHoverDropdown.style.right = (window.innerWidth - rect.right) + 'px';
            }

            function showCartDropdown() {
                clearTimeout(hideTimeout);
                positionCartDropdown();
                cartHoverDropdown.style.display = 'block';
            }

            function hideCartDropdown() {
                hideTimeout = setTimeout(() => {
                    cartHoverDropdown.style.display = 'none';
                }, 100);
            }

            if (cartIcon && cartHoverDropdown) {
                cartIcon.addEventListener('mouseenter', showCartDropdown);
                cartIcon.addEventListener('mouseleave', hideCartDropdown);
                cartHoverDropdown.addEventListener('mouseenter', () => clearTimeout(hideTimeout));
                cartHoverDropdown.addEventListener('mouseleave', hideCartDropdown);
                
                // Reposition on scroll/resize
                window.addEventListener('scroll', positionCartDropdown);
                window.addEventListener('resize', positionCartDropdown);
            }
        });

        // Initial render - Load from database with progressive loading bar
        const loadingBar = document.getElementById('loadingBar');
        
        // Jump to 60% when scripts are loaded
        if (loadingBar) loadingBar.style.width = '60%';
        
        Promise.all([
            loadAnimations().then(() => {
                // Jump to 85% when animations loaded
                if (loadingBar) loadingBar.style.width = '85%';
            }),
            checkAuth()
        ]).then(() => {
            // Page fully loaded - complete to 100%
            if (loadingBar) {
                loadingBar.style.width = '100%';
                
                // Fade out and remove
                setTimeout(() => {
                    loadingBar.style.opacity = '0';
                    loadingBar.style.transition = 'width 0.3s ease, opacity 0.3s ease';
                    setTimeout(() => {
                        loadingBar.style.display = 'none';
                    }, 300);
                }, 200);
            }
            
            // Update cart badge and dropdown
            updateCartBadge();
        }).catch(error => {
            console.error('Error loading page:', error);
            // On error, complete in red
            if (loadingBar) {
                loadingBar.style.width = '100%';
                loadingBar.style.background = 'linear-gradient(90deg, #ef4444, #f59e0b)';
                setTimeout(() => {
                    loadingBar.style.opacity = '0';
                    setTimeout(() => loadingBar.style.display = 'none', 300);
                }, 500);
            }
        });

        // Check authentication status
        async function checkAuth() {
            const { data: { session } } = await supabaseClient.auth.getSession();
            if (session) {
                document.getElementById('authLinks').style.display = 'none';
                document.getElementById('profileIcon').style.display = 'block';
                // Hide mobile auth link when logged in
                const mobileAuthLink = document.getElementById('mobileAuthLink');
                if (mobileAuthLink) mobileAuthLink.style.display = 'none';
                // Hide hero Sign Up button when logged in
                const heroSignUpBtn = document.getElementById('heroSignUpBtn');
                if (heroSignUpBtn) heroSignUpBtn.style.display = 'none';
                
                // Check if user is admin
                checkAdminStatus(session.user.id);
            }
            return session?.user || null;
        }

        // Check if user has admin role and show admin button
        async function checkAdminStatus(userId) {
            console.log('=== ADMIN CHECK ===');
            console.log('Checking admin status for user ID:', userId);
            
            const { data: userRole, error } = await supabaseClient
                .from('user_roles')
                .select('role')
                .eq('user_id', userId)
                .single();
            
            console.log('User role query result:', userRole);
            console.log('User role query error:', error);
            
            if (userRole && userRole.role === 'admin') {
                console.log(' User IS admin - showing button');
                const adminBtn = document.getElementById('adminDashboardBtn');
                console.log('Admin button element:', adminBtn);
                if (adminBtn) {
                    adminBtn.style.display = 'inline-flex';
                    console.log('Admin button should now be visible');
                } else {
                    console.error(' Admin button element not found in DOM');
                }
            } else {
                console.log(' User is NOT admin');
            }
        }

        window.logout = async function() {
            await supabaseClient.auth.signOut();
            location.reload();
        }

        // Unified notification system
        window.showNotification = function(message, type = 'success') {
            const colors = {
                success: {
                    bg: 'rgba(15, 15, 15, 0.98)',
                    border: 'rgba(0, 212, 255, 0.5)',
                    text: 'var(--teal)',
                    shadow: 'rgba(0, 212, 255, 0.3)'
                },
                warning: {
                    bg: 'rgba(15, 15, 15, 0.98)',
                    border: 'rgba(245, 158, 11, 0.5)',
                    text: '#F59E0B',
                    shadow: 'rgba(245, 158, 11, 0.3)'
                },
                error: {
                    bg: 'rgba(15, 15, 15, 0.98)',
                    border: 'rgba(255, 107, 107, 0.5)',
                    text: '#FF6B6B',
                    shadow: 'rgba(255, 107, 107, 0.3)'
                }
            };
            
            const style = colors[type] || colors.success;
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                background: ${style.bg};
                border: 2px solid ${style.border};
                border-radius: 12px;
                padding: 16px 24px;
                z-index: 99999;
                animation: slideInRight 0.3s ease;
                box-shadow: 0 8px 24px ${style.shadow};
                backdrop-filter: blur(20px);
                font-family: 'DM Sans', sans-serif;
            `;
            notification.innerHTML = `<div style="color: ${style.text}; font-weight: 600; font-size: 14px;">${message}</div>`;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 2500);
        }

        // Check URL hash for modal triggers (from animation-detail page)
        window.addEventListener('load', function() {
            const hash = window.location.hash;
            
            // Handle auth and cart modals
            if (hash.startsWith('#auth=')) {
                // Force scroll to top for auth modal
                window.scrollTo(0, 0);
                const authType = hash.split('=')[1];
                showAuthModal(authType);
            } else if (hash === '#cart') {
                // Force scroll to top for cart modal
                window.scrollTo(0, 0);
                openCart();
            } else if (hash === '#checkout') {
                // Handle checkout from other pages
                window.scrollTo(0, 0);
                handleCartHoverCheckout();
            } else if (hash === '#library' || hash === '#contact' || hash === '#faq') {
                // Scroll to the section after a brief delay to ensure page is loaded
                setTimeout(() => {
                    const section = document.querySelector(hash);
                    if (section) {
                        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }, 100);
            } else {
                // No hash or unknown hash - scroll to top
                window.scrollTo(0, 0);
            }
        });

        // Auth Modal Functions
        window.showAuthModal = function(tab = 'login') {
            // Close auth required modal first
            document.getElementById('authRequiredModal').classList.remove('active');
            // Show auth modal
            document.getElementById('authModal').classList.add('active');
            switchAuthTab(tab);
        }

        window.closeAuthModal = function() {
            document.getElementById('authModal').classList.remove('active');
            
            // Check if there's a return URL from animation-detail page
            const returnUrl = sessionStorage.getItem('returnUrl');
            if (returnUrl) {
                sessionStorage.removeItem('returnUrl');
                window.location.href = returnUrl;
                return;
            }
            
            // Clear forms
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
            document.getElementById('signupEmail').value = '';
            document.getElementById('signupPassword').value = '';
            document.getElementById('signupConfirmPassword').value = '';
            document.getElementById('loginMessage').innerHTML = '';
            document.getElementById('signupMessage').innerHTML = '';
        }

        window.switchAuthTab = function(tab) {
            // Update tabs
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            if (tab === 'login') {
                document.querySelectorAll('.auth-tab')[0].classList.add('active');
                document.getElementById('loginForm').classList.add('active');
            } else {
                document.querySelectorAll('.auth-tab')[1].classList.add('active');
                document.getElementById('signupForm').classList.add('active');
            }
        }

        window.togglePassword = function(inputId, button) {
            const input = document.getElementById(inputId);
            const icon = button.querySelector('.eye-icon');
            
            if (input.type === 'password') {
                input.type = 'text';
                // Change to eye-slash icon
                icon.innerHTML = '<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>';
            } else {
                input.type = 'password';
                // Change back to eye icon
                icon.innerHTML = '<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>';
            }
        }

        window.handleLogin = async function(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const loginBtn = document.getElementById('loginBtn');
            const messageDiv = document.getElementById('loginMessage');
            const loadingBar = document.getElementById('authLoadingBar');
            
            // Show and animate loading bar
            loadingBar.style.display = 'block';
            loadingBar.style.width = '30%';
            
            loginBtn.disabled = true;
            loginBtn.textContent = 'Signing in...';
            messageDiv.innerHTML = '';
            
            try {
                // Progress to 60%
                setTimeout(() => { loadingBar.style.width = '60%'; }, 200);
                
                const { data, error } = await supabaseClient.auth.signInWithPassword({
                    email,
                    password
                });
                
                if (error) throw error;
                
                // Complete to 100%
                loadingBar.style.width = '100%';
                
                messageDiv.innerHTML = '<div class="auth-message success">Login successful! Redirecting...</div>';
                setTimeout(() => {
                    closeAuthModal();
                    location.reload();
                }, 1000);
                
            } catch (error) {
                // Hide loading bar on error
                loadingBar.style.width = '0';
                setTimeout(() => { loadingBar.style.display = 'none'; }, 300);
                
                messageDiv.innerHTML = `<div class="auth-message error">${error.message}</div>`;
                loginBtn.disabled = false;
                loginBtn.textContent = 'Sign In';
            }
        }

        window.handleSignup = async function(event) {
            event.preventDefault();
            
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupConfirmPassword').value;
            const signupBtn = document.getElementById('signupBtn');
            const messageDiv = document.getElementById('signupMessage');
            const loadingBar = document.getElementById('authLoadingBar');
            
            if (password !== confirmPassword) {
                messageDiv.innerHTML = '<div class="auth-message error">Passwords do not match</div>';
                return;
            }
            
            if (password.length < 6) {
                messageDiv.innerHTML = '<div class="auth-message error">Password must be at least 6 characters</div>';
                return;
            }
            
            // Show and animate loading bar
            loadingBar.style.display = 'block';
            loadingBar.style.width = '30%';
            
            signupBtn.disabled = true;
            signupBtn.textContent = 'Creating account...';
            messageDiv.innerHTML = '';
            
            try {
                // Progress to 60%
                setTimeout(() => { loadingBar.style.width = '60%'; }, 200);
                
                const { data, error } = await supabaseClient.auth.signUp({
                    email,
                    password
                });
                
                if (error) throw error;
                
                // Complete to 100%
                loadingBar.style.width = '100%';
                
                // Google Analytics: Sign Up Event
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'sign_up', {
                        method: 'Email'
                    });
                }
                
                messageDiv.innerHTML = '<div class="auth-message success">Account created! Logging you in...</div>';
                setTimeout(() => {
                    closeAuthModal();
                    location.reload();
                }, 1500);
                
            } catch (error) {
                // Hide loading bar on error
                loadingBar.style.width = '0';
                setTimeout(() => { loadingBar.style.display = 'none'; }, 300);
                
                messageDiv.innerHTML = `<div class="auth-message error">${error.message}</div>`;
                signupBtn.disabled = false;
                signupBtn.textContent = 'Create Account';
            }
        }

        // Handle My Library click - show modal if not logged in
        window.handleDashboardClick = async function(event) {
            event.preventDefault();
            
            const { data: { user } } = await supabaseClient.auth.getUser();
            
            if (user) {
                // User is logged in, go to dashboard
                window.location.href = 'dashboard.html';
            } else {
                // User not logged in, show login modal
                showAuthModal('login');
            }
        }

        window.closeAuthRequiredModal = function(event) {
            if (event) event.preventDefault();
            document.getElementById('authRequiredModal').classList.remove('active');
        }

        // Mobile menu toggle
        // Mobile menu toggle
        window.toggleMobileMenu = function() {
            const navLinks = document.querySelector('.nav-links');
            navLinks.classList.toggle('active');
        }
        
        document.querySelector('.hamburger-menu').addEventListener('click', toggleMobileMenu);
        
        // Close mobile menu when clicking outside
        document.addEventListener('click', function(e) {
            const navLinks = document.querySelector('.nav-links');
            const mobileMenuBtn = document.querySelector('.hamburger-menu');
            
            if (navLinks.classList.contains('active') && 
                !navLinks.contains(e.target) && 
                !mobileMenuBtn.contains(e.target)) {
                navLinks.classList.remove('active');
            }
        });

        // Custom request form handler
        document.getElementById('customRequestForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = {
                name: this.name.value,
                email: this.email.value,
                projectType: this.projectType.value,
                description: this.description.value,
                budget: this.budget.value || null
            };
            
            const submitBtn = this.querySelector('.submit-btn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span>Submitting...</span>';
            
            try {
                const result = await API.submitCustomRequest(formData);
                
                if (result.success) {
                    alert('Thank you for your request! We\'ll get back to you within 24 hours.');
                    this.reset();
                } else {
                    alert('Error submitting request. Please try again.');
                }
            } catch (error) {
                console.error('Form error:', error);
                alert('Error submitting request. Please try again.');
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<span>Submit Request</span><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>';
            }
        });
        
        // Advanced Search Functionality (in navbar)
        const searchInputNav = document.getElementById('searchInputNav');
        const searchClearNav = document.getElementById('searchClearNav');
        const searchDropdownNav = document.getElementById('searchDropdownNav');
        
        let searchTimeout;
        
        if (searchInputNav) {
            searchInputNav.addEventListener('input', function(e) {
                const query = e.target.value.trim();
                
                // Show/hide clear button
                searchClearNav.style.display = query ? 'block' : 'none';
                
                // Debounce search
                clearTimeout(searchTimeout);
                
                if (query.length === 0) {
                    searchDropdownNav.classList.remove('active');
                    return;
                }
                
                if (query.length < 2) return;
                
                searchTimeout = setTimeout(() => {
                    performSearchNav(query);
                }, 300);
            });

            // Enter key for navbar search
            searchInputNav.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const query = e.target.value.trim();
                    if (query) {
                        applySearchNav(query);
                    }
                }
            });
        }
        
        function performSearchNav(query) {
            console.log('performSearchNav called with query:', query);
            console.log('animations array:', animations);
            console.log('animations length:', animations ? animations.length : 'undefined');
            
            const lowerQuery = query.toLowerCase();
            
            // Filter animations (handle null values)
            const results = animations.filter(anim => 
                (anim.title && anim.title.toLowerCase().includes(lowerQuery)) ||
                (anim.category && anim.category.toLowerCase().includes(lowerQuery)) ||
                (anim.style && anim.style.toLowerCase().includes(lowerQuery))
            ).slice(0, 5);
            
            console.log('Search results:', results);
            
            // Build dropdown
            let html = '';
            
            // Animation results with thumbnails
            if (results.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">Animations</div>';
                results.forEach(anim => {
                    const imageUrl = anim.video_type === 'image/gif' ? anim.video_url : anim.thumbnail_url;
                    const isOnSale = (anim.on_sale || anim.holiday_sale) && anim.sale_percentage;
                    const finalPrice = isOnSale ? anim.price * (1 - anim.sale_percentage / 100) : anim.price;
                    
                    html += `
                        <div class="search-result-item" onclick="window.location.href='animation-detail.html?slug=${anim.slug}'" style="display: flex; align-items: center; gap: 12px; padding: 12px 16px; cursor: pointer; border-bottom: 2px solid rgba(0, 212, 255, 0.1); transition: all 0.2s;">
                            <img src="${imageUrl}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 6px;">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 4px;">${anim.title}</div>
                                <div style="font-size: 14px; color: var(--teal); font-weight: 600;">$${finalPrice.toFixed(2)}</div>
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
            }
            
            // Suggested searches below animations
            const suggestions = [
                query,
                'fantasy ' + query,
                query + ' pack',
                'walking',
                'running',
                'combat'
            ].slice(0, 4);
            
            if (suggestions.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">Suggested Searches</div>';
                suggestions.forEach(sugg => {
                    const highlighted = sugg.replace(new RegExp(query, 'gi'), match => `<strong>${match}</strong>`);
                    html += `<div class="search-result-item" onclick="applySearchNav('${sugg}')">`;
                    html += '<div class="search-result-icon"></div>';
                    html += `<div class="search-result-text">${highlighted}</div>`;
                    html += '</div>';
                });
                html += '</div>';
            }
            
            console.log('Generated HTML:', html);
            searchDropdownNav.innerHTML = html;
            searchDropdownNav.classList.add('active');
        }
        
        window.applySearchNav = function(searchTerm) {
            searchInputNav.value = searchTerm;
            const librarySearchInput = document.getElementById('searchInput');
            if (librarySearchInput) {
                librarySearchInput.value = searchTerm;
            }
            filterAnimations();
            searchDropdownNav.classList.remove('active');
            // Scroll to above animation grid
            const animationGrid = document.getElementById('animationGrid');
            if (animationGrid) {
                const yOffset = -100; // 100px above the grid
                const y = animationGrid.getBoundingClientRect().top + window.pageYOffset + yOffset;
                window.scrollTo({ top: y, behavior: 'smooth' });
            }
        }
        
        window.clearSearchNav = function() {
            searchInputNav.value = '';
            searchClearNav.style.display = 'none';
            searchDropdownNav.classList.remove('active');
        }
        
        // Mobile search handler with dropdown
        const mobileSearchInput = document.getElementById('mobileSearch');
        const searchDropdownMobile = document.getElementById('searchDropdownMobile');
        let mobileSearchTimeout;

        if (mobileSearchInput) {
            mobileSearchInput.addEventListener('input', function(e) {
                const query = e.target.value.trim();
                
                clearTimeout(mobileSearchTimeout);
                
                if (query.length === 0) {
                    searchDropdownMobile.style.display = 'none';
                    return;
                }
                
                if (query.length < 2) return;
                
                mobileSearchTimeout = setTimeout(() => {
                    performMobileSearch(query);
                }, 300);
            });

            // Enter key for mobile search
            mobileSearchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const query = e.target.value.trim();
                    if (query) {
                        applyMobileSearch(query);
                    }
                }
            });
        }

        function performMobileSearch(query) {
            const lowerQuery = query.toLowerCase();
            
            const results = animations.filter(anim => 
                anim.title.toLowerCase().includes(lowerQuery) ||
                anim.category.toLowerCase().includes(lowerQuery) ||
                anim.style.toLowerCase().includes(lowerQuery)
            ).slice(0, 5);
            
            let html = '';
            
            // Animation results with thumbnails first
            if (results.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">Animations</div>';
                results.forEach(anim => {
                    const imageUrl = anim.video_type === 'image/gif' ? anim.video_url : anim.thumbnail_url;
                    const isOnSale = (anim.on_sale || anim.holiday_sale) && anim.sale_percentage;
                    const finalPrice = isOnSale ? anim.price * (1 - anim.sale_percentage / 100) : anim.price;
                    
                    html += `
                        <div class="search-result-item" onclick="window.location.href='animation-detail.html?slug=${anim.slug}'" style="display: flex; align-items: center; gap: 12px; padding: 12px 16px; cursor: pointer; border-bottom: 2px solid rgba(0, 212, 255, 0.1); transition: all 0.2s;">
                            <img src="${imageUrl}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 6px;">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 4px;">${anim.title}</div>
                                <div style="font-size: 14px; color: var(--teal); font-weight: 600;">$${finalPrice.toFixed(2)}</div>
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
            }
            
            // Suggested searches below
            const suggestions = [
                query,
                'fantasy ' + query,
                query + ' pack',
                'walking',
                'running',
                'combat'
            ].slice(0, 4);
            
            if (suggestions.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">Suggested Searches</div>';
                suggestions.forEach(sugg => {
                    const highlighted = sugg.replace(new RegExp(query, 'gi'), match => `<strong>${match}</strong>`);
                    html += `<div class="search-result-item" onclick="applyMobileSearch('${sugg}')">`;
                    html += '<div class="search-result-icon"></div>';
                    html += `<div class="search-result-text">${highlighted}</div>`;
                    html += '</div>';
                });
                html += '</div>';
            }
            
            searchDropdownMobile.innerHTML = html;
            searchDropdownMobile.style.display = 'block';
        }

        window.applyMobileSearch = function(searchTerm) {
            const librarySearchInput = document.getElementById('searchInput');
            if (librarySearchInput) {
                librarySearchInput.value = searchTerm;
            }
            filterAnimations();
            searchDropdownMobile.style.display = 'none';
            toggleMobileMenu();
            
            // Scroll to animation grid
            setTimeout(() => {
                const animationGrid = document.getElementById('animationGrid');
                if (animationGrid) {
                    const yOffset = -100;
                    const y = animationGrid.getBoundingClientRect().top + window.pageYOffset + yOffset;
                    window.scrollTo({ top: y, behavior: 'smooth' });
                }
            }, 300);
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (searchInputNav && !e.target.closest('.nav-search')) {
                searchDropdownNav.classList.remove('active');
            }
        });
        
        updateCartBadge();
        })(); // End of IIFE
    </script>
    <!-- Thank You Modal -->
    <div id="thankYouModal" class="auth-modal">
        <div class="auth-modal-overlay" onclick="closeThankYouModal()"></div>
        <div class="auth-modal-box" style="max-width: 500px;">
            <button class="auth-close" onclick="closeThankYouModal()"></button>
            
            <div style="padding: 32px;">
                <!-- Success Icon -->
                <div style="width: 60px; height: 60px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.05)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
                    <svg width="30" height="30" fill="none" stroke="#10B981" stroke-width="3" viewBox="0 0 24 24">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                </div>

                <h2 style="font-size: 28px; font-weight: 800; font-family: 'Sora', sans-serif; margin-bottom: 6px; text-align: center; background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    Payment Successful!
                </h2>
                <p style="color: var(--text-secondary); margin-bottom: 24px; font-size: 14px; text-align: center;">
                    Thank you for your purchase. Your download is ready!
                </p>

                <!-- Loading State -->
                <div id="thankYouLoading" style="text-align: center; padding: 20px;">
                    <div class="spinner" style="margin: 0 auto 12px;"></div>
                    <span style="color: var(--text-muted); font-size: 14px;">Preparing your download...</span>
                </div>

                <!-- Animation Preview -->
                <div id="thankYouPreview" style="display: none; margin-bottom: 20px;">
                    <div style="background: var(--bg-secondary); border-radius: 12px; padding: 12px; border: 2px solid rgba(0, 212, 255, 0.1);">
                        <img id="thankYouGif" src="" alt="Animation Preview" style="width: 100%; max-width: 200px; border-radius: 8px; display: block; margin: 0 auto;">
                        <p id="thankYouAnimationName" style="text-align: center; margin-top: 8px; font-weight: 600; color: var(--text-primary); font-size: 14px;"></p>
                    </div>
                </div>

                <!-- Download Button -->
                <div id="thankYouDownload" style="display: none; text-align: center; margin-bottom: 20px;">
                    <a href="#" id="thankYouDownloadBtn" class="btn btn-primary" style="display: inline-flex; align-items: center; justify-content: center; gap: 8px; text-decoration: none; padding: 14px 28px; font-size: 15px;">
                        <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        Download Your Files
                    </a>
                    <p style="color: var(--text-muted); font-size: 12px; margin-top: 10px;">
                        You can re-download anytime from your <a href="#" onclick="handleDashboardClick(event); closeThankYouModal(); return false;" style="color: var(--teal); text-decoration: none;">Dashboard</a>
                    </p>
                </div>

                <!-- Order Details -->
                <div id="thankYouOrderDetails" style="display: none; background: rgba(26, 26, 26, 0.4); border-radius: 10px; padding: 16px; border: 2px solid rgba(0, 212, 255, 0.1);">
                    <h3 style="font-size: 14px; font-weight: 700; margin-bottom: 12px; color: var(--text-primary);">Order Details</h3>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-muted); font-size: 13px;">Order ID</span>
                            <span id="thankYouOrderId" style="color: var(--text-primary); font-size: 12px; font-family: monospace;">-</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-muted); font-size: 13px;">Animation</span>
                            <span id="thankYouOrderAnimation" style="color: var(--text-primary); font-size: 13px;">-</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-muted); font-size: 13px;">Amount Paid</span>
                            <span id="thankYouOrderAmount" style="color: var(--text-primary); font-size: 13px; font-weight: 600;">-</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-muted); font-size: 13px;">Date</span>
                            <span id="thankYouOrderDate" style="color: var(--text-primary); font-size: 13px;">-</span>
                        </div>
                    </div>
                </div>

                <!-- Error State -->
                <div id="thankYouError" style="display: none; background: rgba(239, 68, 68, 0.1); border: 2px solid rgba(239, 68, 68, 0.3); border-radius: 12px; padding: 14px; text-align: center;">
                    <p id="thankYouErrorMessage" style="color: #EF4444; font-size: 13px; margin: 0;"></p>
                </div>
            </div>
        </div>
    </div>

    <style>
    /* Thank You Modal Spinner */
    #thankYouModal .spinner {
        width: 40px;
        height: 40px;
        border: 4px solid rgba(0, 212, 255, 0.1);
        border-top-color: var(--teal);
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    /* ==========================================
       STRIPE CHECKOUT MODAL STYLES
       ========================================== */
    .stripe-checkout-modal {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.85);
        backdrop-filter: blur(8px);
        z-index: 20000;
        display: none;
        align-items: center;
        justify-content: center;
    }

    .stripe-checkout-modal.active {
        display: flex;
    }

    .stripe-checkout-modal-overlay {
        position: absolute;
        inset: 0;
    }

    .stripe-checkout-modal-content {
        background: var(--bg-secondary);
        border: 2px solid rgba(0, 212, 255, 0.3);
        border-radius: 20px;
        padding: 0;
        max-width: 500px;
        width: 90%;
        animation: modalSlideIn 0.3s ease;
        position: relative;
        z-index: 1;
        overflow: hidden;
        box-shadow: 0 0 40px rgba(0, 212, 255, 0.2);
    }

    .stripe-checkout-modal-header {
        background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(245, 158, 11, 0.1));
        padding: 24px;
        border-bottom: 1px solid rgba(0, 212, 255, 0.2);
        position: relative;
    }

    .stripe-checkout-modal-title {
        font-size: 20px;
        font-weight: 700;
        color: var(--text-primary);
        margin: 0;
        font-family: 'Sora', sans-serif;
    }

    .stripe-checkout-modal-close {
        position: absolute;
        top: 16px;
        right: 16px;
        width: 36px;
        height: 36px;
        border: none;
        background: rgba(239, 68, 68, 0.2);
        color: #FCA5A5;
        font-size: 20px;
        font-weight: bold;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 2;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .stripe-checkout-modal-close:hover {
        background: rgba(239, 68, 68, 0.3);
        transform: scale(1.1);
    }

    .stripe-checkout-modal-body {
        padding: 32px 24px;
    }

    .stripe-payment-form {
        margin-bottom: 20px;
    }

    .stripe-form-group {
        margin-bottom: 16px;
    }

    .stripe-form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
    }

    .stripe-label {
        display: block;
        font-size: 14px;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 8px;
        font-family: 'DM Sans', sans-serif;
    }

    .stripe-input {
        background: var(--bg-card);
        border: 2px solid rgba(0, 212, 255, 0.2);
        border-radius: 12px;
        padding: 14px 16px;
        transition: all 0.3s ease;
    }

    .stripe-input:focus-within,
    .stripe-input.StripeElement--focus {
        border-color: rgba(0, 212, 255, 0.5);
        box-shadow: 0 0 20px rgba(0, 212, 255, 0.15);
        background: rgba(0, 212, 255, 0.03);
    }

    .stripe-input.StripeElement--invalid {
        border-color: rgba(239, 68, 68, 0.5);
    }

    .stripe-input.StripeElement--complete {
        border-color: rgba(16, 185, 129, 0.5);
    }

    .stripe-order-summary {
        background: var(--bg-card);
        border: 1px solid rgba(0, 212, 255, 0.15);
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 24px;
    }

    .stripe-order-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
        padding-bottom: 12px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .stripe-order-item:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
    }

    .stripe-order-label {
        color: var(--text-secondary);
        font-size: 14px;
    }

    .stripe-order-value {
        color: var(--text-primary);
        font-weight: 600;
        font-size: 16px;
    }

    .stripe-order-total {
        margin-top: 12px;
        padding-top: 12px;
        border-top: 2px solid rgba(0, 212, 255, 0.3);
    }

    .stripe-order-total .stripe-order-label {
        font-weight: 700;
        font-size: 16px;
        color: var(--text-primary);
    }

    .stripe-order-total .stripe-order-value {
        font-size: 24px;
        background: linear-gradient(135deg, #00D4FF, #F59E0B);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .stripe-pay-button {
        width: 100%;
        padding: 16px;
        background: linear-gradient(135deg, #00D4FF, #F59E0B);
        border: none;
        border-radius: 12px;
        color: #000;
        font-weight: 700;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-family: 'DM Sans', sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }

    .stripe-pay-button:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(0, 212, 255, 0.4);
    }

    .stripe-pay-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .stripe-pay-button-spinner {
        width: 20px;
        height: 20px;
        border: 3px solid rgba(0, 0, 0, 0.3);
        border-top-color: #000;
        border-radius: 50%;
        animation: spinButton 0.8s linear infinite;
    }

    @keyframes spinButton {
        to { transform: rotate(360deg); }
    }

    .stripe-error-message {
        background: rgba(239, 68, 68, 0.1);
        border: 1px solid rgba(239, 68, 68, 0.3);
        border-radius: 8px;
        padding: 12px;
        margin-top: 16px;
        color: #FCA5A5;
        font-size: 14px;
        display: none;
    }

    .stripe-error-message.show {
        display: block;
    }

    .stripe-secure-badge {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        margin-top: 16px;
        color: var(--text-muted);
        font-size: 12px;
    }

    .stripe-secure-icon {
        width: 16px;
        height: 16px;
        fill: #10B981;
    }

    @media (max-width: 768px) {
        .stripe-checkout-modal-content {
            max-width: 95%;
            margin: 16px;
        }
        
        .stripe-checkout-modal-body {
            padding: 24px 16px;
        }
    }
    </style>

    <script>
    // Thank You Modal Functions
    let thankYouModalOpen = false;

    function closeThankYouModal() {
        document.getElementById('thankYouModal').classList.remove('active');
        thankYouModalOpen = false;
        
        // Clear the success parameter from URL without reloading
        const url = new URL(window.location);
        url.searchParams.delete('session_id');
        url.searchParams.delete('payment_success');
        window.history.replaceState({}, '', url);
        
        // Clear cart since purchase was successful
        localStorage.removeItem('cart');
        if (typeof updateCartBadge === 'function') updateCartBadge();
    }

            console.error('Error loading purchase:', error);
            document.getElementById('thankYouLoading').style.display = 'none';
            document.getElementById('thankYouError').style.display = 'block';
            document.getElementById('thankYouErrorMessage').textContent = error.message || 'Unable to load purchase details. Please contact support.';
        }
    }

    // Check URL for payment success on page load
    window.addEventListener('load', function() {
        const urlParams = new URLSearchParams(window.location.search);
        const sessionId = urlParams.get('session_id');
        const paymentSuccess = urlParams.get('payment_success');
        
        if (sessionId && paymentSuccess === 'true') {
            // Small delay to ensure page is loaded
            setTimeout(() => {
                showThankYouModal(sessionId);
            }, 500);
        }
    });
    </script>

    <!-- Cart Hover Dropdown (Outside Navbar) -->
    <div class="cart-hover-dropdown" id="cartHoverDropdown">
        <div class="cart-hover-header">Shopping Cart</div>
        <div class="cart-hover-items" id="cartHoverItems">
            <!-- Items populated by JavaScript -->
        </div>
        <div class="cart-hover-footer">
            <div class="cart-hover-total">
                <span>Total:</span>
                <span id="cartHoverTotal">$0.00</span>
            </div>
            <button id="cartHoverCheckoutBtn" class="btn btn-primary" onclick="handleCartHoverCheckout()" style="width: 100%; margin-top: 12px; display: none;">
                Proceed to Checkout
            </button>
            <button class="btn btn-secondary" onclick="openCart(); event.stopPropagation();" style="width: 100%; margin-top: 12px;">
                View Full Cart
            </button>
        </div>
    </div>

    <!-- Floating Particles Script - REMOVED for liquid metal effect -->

    <!-- Carousel Auto-Rotation Script -->
    <script>
        // Carousel state
        let currentIndex = 2; // Start with 3rd item (index 2 - Acrobatic Pack)
        let carouselInterval;
        
        // Carousel data (5 items) - will be loaded from database or use defaults
        let carouselData = [
            { icon: '', title: 'Running Pack', subtitle: '12 animations', label: 'Motion Capture Preview', image_url: null, link_url: '' },
            { icon: '', title: 'Combat Pack', subtitle: '24 animations', label: 'Featured Animation', image_url: null, link_url: '' },
            { icon: '', title: 'Acrobatic Pack', subtitle: '18 animations', label: 'Motion Capture Preview', image_url: null, link_url: '' },
            { icon: '', title: 'Climbing Pack', subtitle: '16 animations', label: 'Motion Capture Preview', image_url: null, link_url: '' },
            { icon: '', title: 'Sports Pack', subtitle: '20 animations', label: 'Motion Capture Preview', image_url: null, link_url: '' }
        ];

        // Load carousel data from database
        async function loadCarouselData() {
            if (!window.supabaseClient) {
                console.log('Supabase not available, using default carousel data');
                return;
            }
            
            try {
                console.log('Loading carousel data from database...');
                const { data, error } = await window.supabaseClient
                    .from('carousel_items')
                    .select('*')
                    .order('position', { ascending: true });

                console.log('Carousel query result:', { data, error });

                if (!error && data && data.length > 0) {
                    // Update carousel data with database values
                    carouselData = data.map(item => ({
                        icon: item.icon,
                        title: item.title,
                        subtitle: item.subtitle,
                        label: 'Motion Capture Preview',
                        image_url: item.image_url,
                        link_url: item.link_url
                    }));
                    
                    console.log('Updated carousel data:', carouselData);
                    
                    // Update carousel display
                    updateCarouselContent();
                } else {
                    console.log('Using default carousel data');
                }
            } catch (error) {
                console.error('Error loading carousel:', error);
                console.log('Using default carousel data');
            }
        }

        // Update carousel content in DOM
        function updateCarouselContent() {
            console.log('Updating carousel content...');
            const items = document.querySelectorAll('.carousel-item');
            console.log('Found carousel items:', items.length);
            
            items.forEach((item, index) => {
                if (carouselData[index]) {
                    const data = carouselData[index];
                    const placeholder = item.querySelector('.carousel-placeholder');
                    
                    console.log(`Item ${index}:`, data);
                    
                    if (placeholder) {
                        // If image_url exists, use it; otherwise use icon
                        if (data.image_url) {
                            console.log(`Setting image for item ${index}:`, data.image_url);
                            placeholder.innerHTML = `
                                <img src="${data.image_url}" 
                                     alt="${data.title}" 
                                     style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px;">
                            `;
                        } else {
                            console.log(`Setting icon for item ${index}:`, data.icon);
                            placeholder.innerHTML = `
                                <div class="carousel-placeholder-icon">${data.icon}</div>
                                <div class="carousel-placeholder-text">${data.title}</div>
                                <div class="carousel-placeholder-subtext">${data.subtitle}</div>
                            `;
                        }
                    } else {
                        console.log(`No placeholder found for item ${index}`);
                    }
                    
                    // Update overlay label
                    const overlayText = item.querySelector('.carousel-overlay-text');
                    if (overlayText) {
                        overlayText.textContent = data.label || 'Motion Capture Preview';
                    }
                }
            });
            
            // Force carousel to reset to proper positions after content update
            console.log('Resetting carousel positions to index:', currentIndex);
            setTimeout(() => {
                updateCarousel(currentIndex);
            }, 100);
        }

        function updateCarousel(selectedIndex) {
            const items = document.querySelectorAll('.carousel-item');
            const dots = document.querySelectorAll('.carousel-dot');
            
            if (!items.length) return;

            const totalItems = items.length;
            
            // Calculate positions relative to selected item
            items.forEach((item, index) => {
                const dataIndex = parseInt(item.getAttribute('data-index'));
                
                // Calculate offset from selected item (-2 to +2)
                let offset = dataIndex - selectedIndex;
                
                // Wrap around to keep within -2 to +2 range
                while (offset > 2) offset -= totalItems;
                while (offset < -2) offset += totalItems;
                
                // Apply classes based on position
                item.classList.remove('side', 'center', 'pos-far-left', 'pos-left', 'pos-center', 'pos-right', 'pos-far-right');
                
                if (offset === 0) {
                    // Center item
                    item.classList.add('center', 'pos-center');
                } else {
                    // Side items
                    item.classList.add('side');
                    
                    // Add specific position class for smooth transitions
                    if (offset === -2) item.classList.add('pos-far-left');
                    else if (offset === -1) item.classList.add('pos-left');
                    else if (offset === 1) item.classList.add('pos-right');
                    else if (offset === 2) item.classList.add('pos-far-right');
                }
            });

            // Update dots
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === selectedIndex);
            });
            
            // Update current index
            currentIndex = selectedIndex;
        }

        function startCarousel() {
            // Always clear any existing interval first
            clearInterval(carouselInterval);
            carouselInterval = setInterval(() => {
                const nextIndex = (currentIndex + 1) % carouselData.length;
                updateCarousel(nextIndex);
            }, 6000);
        }

        function stopCarousel() {
            clearInterval(carouselInterval);
        }
        
        // Pause carousel when tab is inactive
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                stopCarousel();
            } else {
                startCarousel();
            }
        });

        // Initialize carousel
        async function initCarousel() {
            // Load carousel data from database first
            await loadCarouselData();
            
            const dots = document.querySelectorAll('.carousel-dot');
            const items = document.querySelectorAll('.carousel-item');

            // Add click handlers to dots
            // Add click handlers to dots
            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    stopCarousel();
                    updateCarousel(index);
                    startCarousel();
                });
            });

            // Add click handlers to items
            items.forEach((item) => {
                item.addEventListener('click', () => {
                    const index = parseInt(item.getAttribute('data-index'));
                    const carouselItem = carouselData[index];
                    
                    // If center item and has link_url, navigate to it
                    if (item.classList.contains('pos-center') && carouselItem && carouselItem.link_url) {
                        window.location.href = carouselItem.link_url;
                    } else {
                        // Otherwise, center the clicked item
                        stopCarousel();
                        updateCarousel(index);
                        startCarousel();
                    }
                });
                
                // Add pointer cursor for items with links
                const index = parseInt(item.getAttribute('data-index'));
                if (carouselData[index] && carouselData[index].link_url) {
                    item.style.cursor = 'pointer';
                }
            });

            // Pause on hover
            const carousel = document.querySelector('.hero-preview-carousel');
            if (carousel) {
                carousel.addEventListener('mouseenter', () => {
                    stopCarousel();
                });
                carousel.addEventListener('mouseleave', () => {
                    stopCarousel(); // Ensure fully stopped
                    startCarousel(); // Then start fresh
                });
            }

            // Initialize to starting position (Acrobatic Pack - index 2)
            updateCarousel(2);
            
            // Fade in carousel after everything is positioned
            setTimeout(() => {
                if (carousel) {
                    carousel.classList.add('loaded');
                }
            }, 200);
            
            // Start auto-rotation
            startCarousel();
        }

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initCarousel);
        } else {
            initCarousel();
        }
    </script>

    <!-- Mobile Sticky CTA Bar (only on mobile) -->
    <div class="mobile-sticky-cta" id="mobileStickyCta">
        <div class="mobile-sticky-cta-content">
            <div class="mobile-sticky-cta-text">
                <span>Ready to elevate your project?</span>
                <small>100+ professional animations available</small>
            </div>
            <button class="mobile-sticky-cta-btn" onclick="document.getElementById('library').scrollIntoView({behavior: 'smooth'})">
                Browse Now
            </button>
        </div>
    </div>

    <!-- Mobile Sticky CTA Trigger Script -->
    <script>
        // Show mobile sticky CTA after scrolling past hero on mobile
        let mobileStickyCta = document.getElementById('mobileStickyCta');
        
        function handleMobileStickyCta() {
            if (window.innerWidth <= 768) {
                if (window.scrollY > window.innerHeight * 0.7) {
                    mobileStickyCta.classList.add('show');
                } else {
                    mobileStickyCta.classList.remove('show');
                }
            } else {
                mobileStickyCta.classList.remove('show');
            }
        }
        
        window.addEventListener('scroll', handleMobileStickyCta);
        window.addEventListener('resize', handleMobileStickyCta);
    </script>

    <!-- ========================================== -->
    <!-- SIMPLE ANIMATIONS - Particles + Hero Text -->
    <!-- ========================================== -->
    <script>
        // ==========================================
        // LIQUID METAL FLUID SIMULATION
        // ==========================================
        class LiquidMetal {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d');
                this.width = canvas.width = window.innerWidth;
                this.height = canvas.height = window.innerHeight;
                
                // Fluid grid - SMALLER RESOLUTION = MORE ORBS
                this.resolution = 32; // Reduced from 64 - creates 2x more grid cells
                this.gridWidth = Math.floor(this.width / this.resolution);
                this.gridHeight = Math.floor(this.height / this.resolution);
                
                // Velocity fields
                this.vx = this.createGrid();
                this.vy = this.createGrid();
                this.vx0 = this.createGrid();
                this.vy0 = this.createGrid();
                
                // Density field (for color)
                this.density = this.createGrid();
                this.density0 = this.createGrid();
                
                // Metallic blobs - ORANGE & TEAL ONLY, EXTRA SLOW
                this.blobs = [];
                const colors = ['#F59E0B', '#00D4FF']; // Orange, Teal (no red)
                
                for (let i = 0; i < 12; i++) {
                    this.blobs.push({
                        x: Math.random() * this.width,
                        y: Math.random() * this.height,
                        vx: (Math.random() - 0.5) * 0.2, // Reduced from 0.3 to 0.2 (even slower!)
                        vy: (Math.random() - 0.5) * 0.2, // Reduced from 0.3 to 0.2
                        radius: 15 + Math.random() * 25,
                        color: colors[Math.floor(Math.random() * colors.length)]
                    });
                }
                
                this.mouse = { x: this.width / 2, y: this.height / 2, px: 0, py: 0 };
                this.setupListeners();
                this.animate();
            }
            
            createGrid() {
                return new Array(this.gridWidth * this.gridHeight).fill(0);
            }
            
            setupListeners() {
                // Use window mousemove since canvas has pointer-events: none
                window.addEventListener('mousemove', (e) => {
                    this.mouse.px = this.mouse.x;
                    this.mouse.py = this.mouse.y;
                    this.mouse.x = e.clientX;
                    this.mouse.y = e.clientY;
                });
                
                window.addEventListener('resize', () => {
                    this.width = this.canvas.width = window.innerWidth;
                    this.height = this.canvas.height = window.innerHeight;
                    this.gridWidth = Math.floor(this.width / this.resolution);
                    this.gridHeight = Math.floor(this.height / this.resolution);
                });
            }
            
            addVelocity(x, y, vx, vy) {
                const gx = Math.floor(x / this.resolution);
                const gy = Math.floor(y / this.resolution);
                const idx = gx + gy * this.gridWidth;
                
                if (idx >= 0 && idx < this.vx.length) {
                    this.vx[idx] += vx;
                    this.vy[idx] += vy;
                    this.density[idx] += 50;
                }
            }
            
            diffuse(x, x0, diff) {
                const a = diff * this.gridWidth * this.gridHeight;
                for (let k = 0; k < 4; k++) {
                    for (let i = 1; i < this.gridWidth - 1; i++) {
                        for (let j = 1; j < this.gridHeight - 1; j++) {
                            const idx = i + j * this.gridWidth;
                            x[idx] = (x0[idx] + a * (
                                x[idx - 1] + x[idx + 1] +
                                x[idx - this.gridWidth] + x[idx + this.gridWidth]
                            )) / (1 + 4 * a);
                        }
                    }
                }
            }
            
            step() {
                // Add mouse interaction - FASTER CURSOR TRAIL
                const dx = this.mouse.x - this.mouse.px;
                const dy = this.mouse.y - this.mouse.py;
                
                // Only add force if mouse is in hero area (top part of page)
                if (this.mouse.y < this.height) {
                    this.addVelocity(this.mouse.x, this.mouse.y, dx * 3, dy * 3); // Increased from 1.5 to 3
                    
                    // Minimal ripple - just 1-2 dots around mouse
                    const rippleRadius = 20; // Much smaller - was 40
                    for (let angle = 0; angle < 360; angle += 180) { // Only 2 points instead of 4
                        const rad = angle * Math.PI / 180;
                        const rippleX = this.mouse.x + Math.cos(rad) * rippleRadius;
                        const rippleY = this.mouse.y + Math.sin(rad) * rippleRadius;
                        this.addVelocity(rippleX, rippleY, dx * 0.5, dy * 0.5); // Increased from 0.2 to 0.5
                    }
                }
                
                // Add random disturbances from blobs - SLOWER
                this.blobs.forEach(blob => {
                    this.addVelocity(blob.x, blob.y, blob.vx * 1, blob.vy * 1); // Reduced from 2 to 1
                });
                
                // Diffuse velocity
                this.diffuse(this.vx, this.vx0, 0.0001);
                this.diffuse(this.vy, this.vy0, 0.0001);
                
                // Fade density - HIGHER = SLOWER FADE = LONGER TRAIL
                for (let i = 0; i < this.density.length; i++) {
                    this.density[i] *= 0.99; // Changed from 0.85 to 0.99 (dots stay WAY longer!)
                }
                
                // Update blobs
                this.blobs.forEach(blob => {
                    blob.x += blob.vx;
                    blob.y += blob.vy;
                    
                    if (blob.x < 0 || blob.x > this.width) blob.vx *= -1;
                    if (blob.y < 0 || blob.y > this.height) blob.vy *= -1;
                    
                    blob.x = Math.max(0, Math.min(this.width, blob.x));
                    blob.y = Math.max(0, Math.min(this.height, blob.y));
                });
            }
            
            render() {
                // NO GREY OVERLAY - Don't clear canvas, just draw fresh
                this.ctx.clearRect(0, 0, this.width, this.height);
                
                // Draw metallic fluid field - TEAL COLORED DOTS WITH TRANSPARENCY
                for (let i = 0; i < this.gridWidth; i++) {
                    for (let j = 0; j < this.gridHeight; j++) {
                        const idx = i + j * this.gridWidth;
                        const d = this.density[idx];
                        
                        // Skip top 2 rows to avoid navbar interference
                        if (j < 2) continue;
                        
                        if (d > 0.1) { // LOWERED from 0.5 - dots appear much earlier and stay visible longer
                            const x = i * this.resolution;
                            const y = j * this.resolution;
                            
                            // Fixed orb size regardless of grid resolution
                            const orbSize = 20; // Keep orbs at 20px diameter
                            const centerX = x + this.resolution / 2;
                            const centerY = y + this.resolution / 2;
                            
                            // Radial gradient for rounded effect - TEAL COLOR WITH TRANSPARENCY
                            const gradient = this.ctx.createRadialGradient(
                                centerX, centerY, 0,
                                centerX, centerY, orbSize / 2
                            );
                            
                            const intensity = Math.min(d / 100, 1);
                            // Teal with reduced opacity (0.4 and 0.25 instead of 0.6 and 0.4)
                            gradient.addColorStop(0, `rgba(0, 212, 255, ${intensity * 0.4})`);
                            gradient.addColorStop(0.5, `rgba(0, 212, 255, ${intensity * 0.25})`);
                            gradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
                            
                            this.ctx.fillStyle = gradient;
                            
                            // Draw as circle
                            this.ctx.beginPath();
                            this.ctx.arc(centerX, centerY, orbSize / 2, 0, Math.PI * 2);
                            this.ctx.fill();
                        }
                    }
                }
                
                // Draw flowing blobs - TEAL EXTRA TRANSPARENT, ALL ORBS MORE TRANSPARENT
                this.blobs.forEach(blob => {
                    // Check if teal for extra transparency
                    const isTeal = blob.color === '#00D4FF';
                    const transparencyMultiplier = isTeal ? 0.5 : 0.8; // Teal: 50%, Orange: 80% (was 60% and 100%)
                    
                    // Outer glow
                    const outerGradient = this.ctx.createRadialGradient(
                        blob.x, blob.y, 0,
                        blob.x, blob.y, blob.radius * 1.5
                    );
                    const outerOpacity1 = Math.floor(0x40 * transparencyMultiplier).toString(16).padStart(2, '0');
                    const outerOpacity2 = Math.floor(0x15 * transparencyMultiplier).toString(16).padStart(2, '0');
                    outerGradient.addColorStop(0, blob.color + outerOpacity1);
                    outerGradient.addColorStop(0.5, blob.color + outerOpacity2);
                    outerGradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
                    
                    this.ctx.fillStyle = outerGradient;
                    this.ctx.beginPath();
                    this.ctx.arc(blob.x, blob.y, blob.radius * 1.5, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    // Inner metallic blob
                    const gradient = this.ctx.createRadialGradient(
                        blob.x - blob.radius * 0.3, blob.y - blob.radius * 0.3, 0,
                        blob.x, blob.y, blob.radius
                    );
                    
                    gradient.addColorStop(0, `rgba(255, 255, 255, ${0.5 * transparencyMultiplier})`);
                    gradient.addColorStop(0.2, blob.color + Math.floor(0xB3 * transparencyMultiplier).toString(16).padStart(2, '0'));
                    gradient.addColorStop(0.6, blob.color + Math.floor(0x99 * transparencyMultiplier).toString(16).padStart(2, '0'));
                    gradient.addColorStop(1, blob.color + Math.floor(0x26 * transparencyMultiplier).toString(16).padStart(2, '0'));
                    
                    this.ctx.fillStyle = gradient;
                    this.ctx.beginPath();
                    this.ctx.arc(blob.x, blob.y, blob.radius, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    // Highlight
                    const highlight = this.ctx.createRadialGradient(
                        blob.x - blob.radius * 0.4, blob.y - blob.radius * 0.4, 0,
                        blob.x - blob.radius * 0.4, blob.y - blob.radius * 0.4, blob.radius * 0.3
                    );
                    highlight.addColorStop(0, `rgba(255, 255, 255, ${0.5 * transparencyMultiplier})`);
                    highlight.addColorStop(1, 'rgba(255, 255, 255, 0)');
                    
                    this.ctx.fillStyle = highlight;
                    this.ctx.beginPath();
                    this.ctx.arc(
                        blob.x - blob.radius * 0.4, 
                        blob.y - blob.radius * 0.4, 
                        blob.radius * 0.3, 
                        0, Math.PI * 2
                    );
                    this.ctx.fill();
                });
                
                // Draw connection lines between close blobs
                for (let i = 0; i < this.blobs.length; i++) {
                    for (let j = i + 1; j < this.blobs.length; j++) {
                        const b1 = this.blobs[i];
                        const b2 = this.blobs[j];
                        const dist = Math.hypot(b2.x - b1.x, b2.y - b1.y);
                        
                        if (dist < 300) {
                            const alpha = (1 - dist / 300) * 0.3;
                            const gradient = this.ctx.createLinearGradient(b1.x, b1.y, b2.x, b2.y);
                            gradient.addColorStop(0, b1.color + Math.floor(alpha * 255).toString(16).padStart(2, '0'));
                            gradient.addColorStop(1, b2.color + Math.floor(alpha * 255).toString(16).padStart(2, '0'));
                            
                            this.ctx.strokeStyle = gradient;
                            this.ctx.lineWidth = 2;
                            this.ctx.beginPath();
                            this.ctx.moveTo(b1.x, b1.y);
                            this.ctx.lineTo(b2.x, b2.y);
                            this.ctx.stroke();
                        }
                    }
                }
            }
            
            animate() {
                this.step();
                this.render();
                requestAnimationFrame(() => this.animate());
            }
        }

        // Particle burst function
        function createParticles(card) {
            const rect = card.getBoundingClientRect();
            const particles = 6;
            
            for (let i = 0; i < particles; i++) {
                const particle = document.createElement('div');
                particle.style.cssText = `
                    position: fixed;
                    width: 6px;
                    height: 6px;
                    background: linear-gradient(135deg, #F59E0B, #FF6B6B);
                    border-radius: 50%;
                    pointer-events: none;
                    z-index: 9999;
                    left: ${rect.left + rect.width / 2}px;
                    top: ${rect.top + rect.height / 2}px;
                    box-shadow: 0 0 8px rgba(245, 158, 11, 0.8);
                `;
                document.body.appendChild(particle);
                
                const angle = (360 / particles) * i;
                const distance = 80;
                
                gsap.to(particle, {
                    x: Math.cos(angle * Math.PI / 180) * distance,
                    y: Math.sin(angle * Math.PI / 180) * distance,
                    opacity: 0,
                    scale: 0.5,
                    duration: 1,
                    ease: 'power2.out',
                    onComplete: () => particle.remove()
                });
            }
        }

        // Add particle burst to cards when they're rendered
        window.initCardParticles = function() {
            const cards = document.querySelectorAll('.animation-card');
            
            cards.forEach(card => {
                // Clone to remove old listeners
                const newCard = card.cloneNode(true);
                card.parentNode.replaceChild(newCard, card);
                
                // Add hover listener
                newCard.addEventListener('mouseenter', function() {
                    createParticles(newCard);
                });
            });
            
            console.log(` Particle effects added to ${cards.length} cards`);
        };

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', () => {
            if (typeof gsap === 'undefined') {
                console.error(' GSAP not loaded');
                return;
            }
            
            console.log(' Initializing animations...');

            // ==========================================
            // INITIALIZE LIQUID METAL BACKGROUND
            // ==========================================
            const heroBackground = document.querySelector('.hero-background');
            if (heroBackground) {
                const liquidCanvas = document.createElement('canvas');
                liquidCanvas.style.cssText = `
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    z-index: 2;
                    pointer-events: none;
                    opacity: 1;
                    -webkit-mask-image: linear-gradient(to bottom, 
                        rgba(0,0,0,1) 0%, 
                        rgba(0,0,0,1) 40%, 
                        rgba(0,0,0,0.7) 60%, 
                        rgba(0,0,0,0.3) 75%,
                        rgba(0,0,0,0.1) 85%,
                        rgba(0,0,0,0) 92%);
                    mask-image: linear-gradient(to bottom, 
                        rgba(0,0,0,1) 0%, 
                        rgba(0,0,0,1) 40%, 
                        rgba(0,0,0,0.7) 60%, 
                        rgba(0,0,0,0.3) 75%,
                        rgba(0,0,0,0.1) 85%,
                        rgba(0,0,0,0) 92%);
                `;
                heroBackground.insertBefore(liquidCanvas, heroBackground.firstChild);
                
                new LiquidMetal(liquidCanvas);
                console.log(' Liquid metal simulation initialized');
            }

            // ==========================================
            // SLOW HERO TEXT ANIMATION
            // ==========================================
            const heroTitle = document.querySelector('.hero-title');
            
            if (heroTitle) {
                const titleSpans = heroTitle.querySelectorAll('span');
                
                // Set initial state - hidden
                gsap.set(titleSpans, { 
                    opacity: 0, 
                    y: 40, 
                    filter: 'blur(10px)' 
                });
                
                // Create slow timeline
                const heroTl = gsap.timeline({ 
                    defaults: { ease: 'power3.out' },
                    delay: 0.3 
                });
                
                // Animate each word slowly
                titleSpans.forEach((span, index) => {
                    heroTl.to(span, {
                        opacity: 1,
                        y: 0,
                        filter: 'blur(0px)',
                        duration: 1, // Slower - was 0.6
                        ease: 'power2.out'
                    }, index * 0.25); // More delay between words - was 0.15
                });
                
                console.log(' Hero text animation initialized');
            }
            
            // ==========================================
            // TYPEWRITER EFFECT - LOOPING
            // ==========================================
            const typewriterText = document.getElementById('typewriter-text');
            if (typewriterText) {
                const fullText = 'for Unreal Engine, Unity, Blender, and all major 3D platforms.';
                let charIndex = 0;
                let isDeleting = false;
                let isPaused = false;
                
                function typeWriter() {
                    if (isPaused) {
                        setTimeout(typeWriter, 3500); // Increased pause to 3.5 seconds (was 2 seconds)
                        isPaused = false;
                        return;
                    }
                    
                    if (!isDeleting) {
                        // Typing
                        typewriterText.textContent = fullText.substring(0, charIndex + 1);
                        charIndex++;
                        
                        if (charIndex === fullText.length) {
                            isPaused = true;
                            isDeleting = true;
                        }
                        
                        setTimeout(typeWriter, 50); // Typing speed
                    } else {
                        // Deleting
                        typewriterText.textContent = fullText.substring(0, charIndex - 1);
                        charIndex--;
                        
                        if (charIndex === 0) {
                            isDeleting = false;
                            setTimeout(typeWriter, 500); // Pause before typing again
                        } else {
                            setTimeout(typeWriter, 30); // Deleting speed (faster)
                        }
                    }
                }
                
                // Start typewriter after hero text animation completes
                setTimeout(typeWriter, 2000);
                console.log(' Typewriter effect initialized');
            }
        });
    </script>

    <!-- ==========================================
         STRIPE CHECKOUT MODAL HTML
         ========================================== -->
    <div id="stripeCheckoutModal" class="stripe-checkout-modal">
        <div class="stripe-checkout-modal-overlay" onclick="closeStripeCheckout()"></div>
        <div class="stripe-checkout-modal-content">
            <div class="stripe-checkout-modal-header">
                <h3 class="stripe-checkout-modal-title">Complete Your Purchase</h3>
                <button class="stripe-checkout-modal-close" onclick="closeStripeCheckout()"></button>
            </div>
            <div class="stripe-checkout-modal-body">
                <div class="stripe-order-summary">
                    <div class="stripe-order-item">
                        <span class="stripe-order-label" id="stripe-product-name">Loading...</span>
                        <span class="stripe-order-value" id="stripe-product-price">$0.00</span>
                    </div>
                    <div class="stripe-order-item stripe-order-total">
                        <span class="stripe-order-label">Total</span>
                        <span class="stripe-order-value" id="stripe-total-price">$0.00</span>
                    </div>
                </div>
                
                <!-- Payment Form -->
                <div class="stripe-payment-form">
                    <div class="stripe-form-group">
                        <label class="stripe-label">Card Number</label>
                        <div id="stripe-card-number" class="stripe-input"></div>
                    </div>
                    
                    <div class="stripe-form-row">
                        <div class="stripe-form-group">
                            <label class="stripe-label">Expiry Date</label>
                            <div id="stripe-card-expiry" class="stripe-input"></div>
                        </div>
                        <div class="stripe-form-group">
                            <label class="stripe-label">CVC</label>
                            <div id="stripe-card-cvc" class="stripe-input"></div>
                        </div>
                    </div>
                </div>
                
                <div id="stripe-error-message" class="stripe-error-message"></div>
                <button id="stripe-pay-button" class="stripe-pay-button">
                    <span id="stripe-button-text">Pay Now</span>
                    <div id="stripe-button-spinner" class="stripe-pay-button-spinner" style="display: none;"></div>
                </button>
                <div class="stripe-secure-badge">
                    <svg class="stripe-secure-icon" viewBox="0 0 24 24">
                        <path d="M12 2L4 6v6c0 5.5 3.8 10.7 8 12 4.2-1.3 8-6.5 8-12V6l-8-4z" fill="currentColor"/>
                        <path d="M10 12l2 2 4-4" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Secured by Stripe
                </div>
            </div>
        </div>
    </div>

</body>
</html>
